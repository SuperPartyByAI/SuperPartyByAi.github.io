<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuperParty - Portal Operatori v3.9</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- LOGIN SCREEN -->
    <div class="screen active" id="loginScreen">
        <div class="auth-container">
            <div class="auth-box">
                <div class="auth-header">
                    <h1>ğŸ­ SuperParty</h1>
                    <p>Portal Operatori</p>
                </div>
                <div class="auth-content">
                    <div class="error-message" id="loginError"></div>
                    
                    <form id="loginForm" onsubmit="handleLogin(event)">
                        <div class="form-group">
                            <label for="loginEmail">Email</label>
                            <input type="email" id="loginEmail" required placeholder="operator@superparty.ro" autocomplete="email">
                        </div>
                        
                        <div class="form-group">
                            <label for="loginPassword">ParolÄƒ</label>
                            <input type="password" id="loginPassword" required placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password">
                        </div>
                        
                        <button type="submit" class="btn" id="loginBtn">Autentificare</button>
                    </form>
                    
                    <div class="toggle-link">
                        Nu ai cont? <a onclick="showRegister()">ÃnregistreazÄƒ-te</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- REGISTER SCREEN -->
    <div class="screen" id="registerScreen">
        <div class="auth-container">
            <div class="auth-box">
                <div class="auth-header">
                    <h1>ğŸ­ SuperParty</h1>
                    <p>Creare Cont Operator</p>
                </div>
                <div class="auth-content">
                    <div class="error-message" id="registerError"></div>
                    <div class="success-message" id="registerSuccess"></div>
                    
                    <form id="registerForm" onsubmit="handleRegister(event)">
                        <div class="form-group">
                            <label for="registerName">Nume Complet</label>
                            <input type="text" id="registerName" required placeholder="Ion Popescu" autocomplete="name">
                        </div>
                        
                        <div class="form-group">
                            <label for="registerEmail">Email</label>
                            <input type="email" id="registerEmail" required placeholder="operator@superparty.ro" autocomplete="email">
                        </div>
                        
                        <div class="form-group">
                            <label for="registerPassword">ParolÄƒ</label>
                            <input type="password" id="registerPassword" required placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" minlength="6" autocomplete="new-password">
                        </div>
                        
                        <div class="form-group">
                            <label for="registerConfirmPassword">ConfirmÄƒ Parola</label>
                            <input type="password" id="registerConfirmPassword" required placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" minlength="6" autocomplete="new-password">
                        </div>
                        
                        <button type="submit" class="btn" id="registerBtn">Creare Cont</button>
                    </form>
                    
                    <div class="toggle-link">
                        Ai deja cont? <a onclick="showLogin()">AutentificÄƒ-te</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- DASHBOARD SCREEN -->
    <div class="screen" id="dashboardScreen">
        <!-- SIDEBAR -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">ğŸ‰ SuperParty</div>
                <div style="font-size: 12px; color: #94a3b8;">by <span style="color: #f87171;">AI</span> âœ¨</div>
                <div class="sidebar-user">
                    <div class="sidebar-user-name" id="userName"></div>
                    <div class="sidebar-user-code">Cod: <span id="userCode"></span></div>
                    <div id="modeBadge"></div>
                </div>
            </div>

            <div class="sidebar-menu" id="sidebarMenu">
                <!-- Menu items loaded dynamically -->
            </div>

            <button class="logout-btn" onclick="handleLogout()">ğŸšª Deconectare</button>
        </div>

        <!-- MAIN CONTENT -->
        <div class="main-content" id="mainContent">
            <!-- Pages loaded dynamically -->
        </div>
    </div>

    <!-- MODAL: ALOCARE EVENIMENT -->
    <div class="modal" id="modal-alocare">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ¯ AlocÄƒ Eveniment</h2>
                <button class="modal-close" onclick="closeModal('modal-alocare')">Ã—</button>
            </div>

            <div class="form-group">
                <label>Ce cod ai:</label>
                <select id="modal-select-cod">
                    <option value="">SelecteazÄƒ cod...</option>
                </select>
            </div>

            <button class="btn-primary" onclick="saveAlocare()" style="width: 100%; margin-top: 10px;">
                âœ… AlocÄƒ Eveniment
            </button>
        </div>
    </div>

    <!-- MODAL: PASSWORD PROMPT -->
    <div class="modal" id="modal-password">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="passwordModalTitle">ğŸ” Introducere ParolÄƒ</h2>
                <button class="modal-close" onclick="closeModal('modal-password')">Ã—</button>
            </div>

            <div class="form-group">
                <label>ParolÄƒ:</label>
                <input type="password" id="modal-password-input-actual" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" onkeypress="if(event.key==='Enter') checkModePassword()">
            </div>

            <div class="error-message" id="passwordError"></div>

            <button class="btn-primary" onclick="checkModePassword()" style="width: 100%; margin-top: 10px;">
                âœ… ConfirmÄƒ
            </button>
        </div>
    </div>

    <!-- CHAT WIDGET -->
    <div class="chat-widget" id="chatWidget" style="display: none;">
        <button class="chat-button" onclick="toggleChat()" id="chatButton">ğŸ’¬</button>
        
        <div class="chat-window" id="chatWindow">
            <div class="chat-window-header">
                <h3>ğŸ¤– SuperParty AI</h3>
                <button class="chat-close" onclick="toggleChat()">Ã—</button>
            </div>
            
            <div class="chat-window-messages" id="chatMessages">
                <div class="chat-message bot">
                    <div class="chat-bubble">
BunÄƒ! ğŸ‘‹ Sunt asistentul SuperParty. Cu ce te pot ajuta?

ÃntreabÄƒ-mÄƒ despre:
â€¢ Personaje disponibile
â€¢ PreÈ›uri È™i pachete
â€¢ ProgramÄƒri evenimente
â€¢ Orice altceva!
                    </div>
                </div>
            </div>
            
            <div class="chat-window-input">
                <input type="text" id="chatInput" placeholder="Scrie mesajul tÄƒu..." onkeypress="if(event.key==='Enter') sendChatMessage()">
                <button class="chat-send" id="chatSendBtn" onclick="sendChatMessage()">Trimite</button>
            </div>
        </div>
    </div>

    <!-- ECRAN DETALII ROL -->
    <div class="rol-detalii-screen" id="rolDetaliiScreen">
        <div class="rol-detalii-header">
            <button class="btn-back" onclick="inchideDetaliiRol()">
                <span>â†</span>
                <span>Ãnapoi</span>
            </button>
            <h1 id="rolDetaliiTitle">Detalii Rol</h1>
        </div>
        <div id="rolInfoGrid"></div>
        <div id="etapeContainer"></div>
    </div>
    
    <!-- MODAL UPLOAD POZE -->
    <div class="modal-dovezi" id="modalDovezi">
        <div class="modal-dovezi-content" onclick="event.stopPropagation();">
            <div class="modal-dovezi-header">
                <button class="modal-close" onclick="inchideModalDovezi()" style="position:absolute;top:15px;right:15px;background:none;border:none;color:white;font-size:24px;cursor:pointer;">Ã—</button>
                <h2 id="modalDoveziTitle">ÃncarcÄƒ Poze</h2>
                <p id="modalDoveziSubtitle" style="font-size:14px;opacity:0.9;margin-top:5px;"></p>
            </div>
            <div style="padding:25px;">
                <div id="modalChecklist" style="margin-bottom:20px;"></div>
                <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                    <div style="font-size:48px;color:#f87171;margin-bottom:15px;">ğŸ“¸</div>
                    <div style="color:#94a3b8;"><strong>Click pentru a selecta poze</strong></div>
                </div>
                <input type="file" id="fileInput" accept="image/*" multiple style="display:none;" onchange="handleFileSelect(event)">
                <div class="preview-images-grid" id="previewGrid"></div>
                <div class="ai-loading" id="aiLoading">
                    <div class="spinner"></div>
                    <p style="color:#94a3b8;margin-top:15px;">ğŸ¤– AI analizeazÄƒ...</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width:0%;">0%</div>
                    </div>
                </div>
                <div id="aiResultContainer"></div>
                <div style="display:flex;gap:10px;margin-top:20px;">
                    <button class="btn-secondary" onclick="inchideModalDovezi()" style="flex:1;">âŒ AnuleazÄƒ</button>
                    <button class="btn-action primary" id="btnTrimite" onclick="trimitePozeAI()" disabled style="flex:2;">ğŸš€ Trimite</button>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         PAGINI NOI v3.9 - Notare Evenimente cu AI
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <!-- PAGINÄ‚: Notare Evenimente AI -->
    <div id="pageNotareAI" class="page" style="display:none;">
        <div class="page-header">
            <h1>ğŸ¤– Notare Evenimente cu AI</h1>
            <p>VorbeÈ™te cu AI pentru a nota evenimente</p>
        </div>
        <div class="page-content">
            <div style="background: linear-gradient(135deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9)); border: 1px solid rgba(248, 113, 113, 0.3); border-radius: 12px; padding: 30px; max-width: 900px; margin: 0 auto;">
                <div id="chatMessagesAI" style="height: 450px; overflow-y: auto; padding: 20px; background: #0f172a; border-radius: 10px; margin-bottom: 20px;">
                    <div style="text-align: center; color: rgba(255,255,255,0.5); padding: 50px 20px;">
                        <div style="font-size: 48px; margin-bottom: 15px;">ğŸ’¬</div>
                        <p>Ãncepe conversaÈ›ia cu AI pentru a nota un eveniment</p>
                    </div>
                </div>
                
                <div id="proofUploadAreaAI" style="display:none; background: #fef3c7; padding: 20px; margin-bottom: 20px; border-radius: 10px; color: #92400e;">
                    <p style="margin-bottom: 15px; font-weight: 600;">ğŸ“¸ Trebuie dovadÄƒ obligatoriu!</p>
                    <input type="file" id="proofFileAI" accept="image/*" multiple style="margin-bottom: 15px; padding: 10px;">
                    <button onclick="uploadProofAI()" class="btn-primary">ÃncarcÄƒ DovadÄƒ</button>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="chatInputAI" placeholder="Ex: NoteazÄƒ Elsa pe 10 decembrie ora 15:00..." style="flex: 1; padding: 15px; border: 2px solid rgba(255,255,255,0.1); border-radius: 10px; background: rgba(255,255,255,0.05); color: white;">
                    <button onclick="sendChatMessageAI()" class="btn-primary" style="padding: 15px 30px;">Trimite ğŸš€</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- PAGINÄ‚: Erori AI -->
    <div id="pageEroriAI" class="page" style="display:none;">
        <div class="page-header">
            <h1>âš ï¸ Erori Notare AI</h1>
            <p>Tracking erori de notare</p>
        </div>
        <div class="page-content">
            <div style="margin-bottom: 30px; display: flex; gap: 10px; justify-content: center;">
                <button onclick="loadEroriAI('today')" class="btn-secondary">AstÄƒzi</button>
                <button onclick="loadEroriAI('week')" class="btn-secondary">SÄƒptÄƒmÃ¢na asta</button>
                <button onclick="loadEroriAI('month')" class="btn-secondary">Luna asta</button>
                <button onclick="loadEroriAI('all')" class="btn-primary">Toate</button>
            </div>
            <div id="eroriListAI" style="max-width: 1000px; margin: 0 auto;">
                <div class="no-events">
                    <div class="icon">âœ…</div>
                    <h3>Nicio eroare gÄƒsitÄƒ!</h3>
                    <p>AI-ul funcÈ›ioneazÄƒ perfect ğŸ‰</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- PAGINÄ‚: Istoric ConversaÈ›ii -->
    <div id="pageIstoricConversatii" class="page" style="display:none;">
        <div class="page-header">
            <h1>ğŸ’¬ Istoric ConversaÈ›ii cu AI</h1>
            <p>Vezi toate conversaÈ›iile operatorilor</p>
        </div>
        <div class="page-content">
            <div style="background: linear-gradient(135deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9)); border: 1px solid rgba(248, 113, 113, 0.3); border-radius: 12px; padding: 30px; max-width: 1100px; margin: 0 auto 30px;">
                <h3 style="margin-bottom: 20px; color: #f87171;">ğŸ” Filtre Rapide</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label>ğŸ“ NumÄƒr telefon</label>
                        <input type="text" id="filterTelefonAI" placeholder="0721...">
                    </div>
                    <div class="form-group">
                        <label>ğŸ« ID Eveniment</label>
                        <input type="text" id="filterEventIDAI" placeholder="EV-...">
                    </div>
                    <div class="form-group">
                        <label>ğŸ‘¤ Operator</label>
                        <select id="filterOperatorAI" class="filter-select">
                            <option value="">ToÈ›i</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ğŸ“… PerioadÄƒ</label>
                        <select id="filterPeriodAI" class="filter-select">
                            <option value="today">AstÄƒzi</option>
                            <option value="week">Ultima sÄƒptÄƒmÃ¢nÄƒ</option>
                            <option value="month" selected>Ultima lunÄƒ</option>
                            <option value="all">Toate</option>
                        </select>
                    </div>
                </div>
                <button onclick="searchConversationsAI()" class="btn-primary" style="width: 100%; padding: 15px;">CautÄƒ ConversaÈ›ii ğŸ”</button>
            </div>
            <div id="conversationsListAI" style="max-width: 1100px; margin: 0 auto;">
                <div class="no-events">
                    <div class="icon">ğŸ’¬</div>
                    <h3>Nicio conversaÈ›ie gÄƒsitÄƒ</h3>
                    <p>FoloseÈ™te filtrele de mai sus</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- PAGINÄ‚: Aprobare Evenimente -->
    <div id="pageAprobareEvenimente" class="page" style="display:none;">
        <div class="page-header">
            <h1>âœ… Aprobare Evenimente</h1>
            <p>AprobÄƒ evenimente incomplete</p>
        </div>
        <div class="page-content">
            <div style="margin-bottom: 30px; display: flex; gap: 10px; justify-content: center;">
                <button onclick="loadApprovalsAI('incomplete')" class="btn-primary">Incomplete (0)</button>
                <button onclick="loadApprovalsAI('ai_rejected')" class="btn-secondary">AI Respins (0)</button>
                <button onclick="loadApprovalsAI('all')" class="btn-secondary">Toate</button>
            </div>
            <div id="approvalsListAI" style="max-width: 1000px; margin: 0 auto;">
                <div class="no-events">
                    <div class="icon">âœ…</div>
                    <h3>Toate evenimentele sunt complete!</h3>
                    <p>Niciun eveniment nu necesitÄƒ aprobare ğŸ‰</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- PAGINÄ‚: ExcepÈ›ii Permanente -->
    <div id="pageExceptiiPermanente" class="page" style="display:none;">
        <div class="page-header">
            <h1>âš™ï¸ ExcepÈ›ii Permanente Dovezi</h1>
            <p>GestioneazÄƒ excepÈ›ii pentru operatori</p>
        </div>
        <div class="page-content">
            <button onclick="showAddExceptionAI()" class="btn-primary" style="margin-bottom: 30px; padding: 15px 30px;">â• AdaugÄƒ excepÈ›ie nouÄƒ</button>
            <div id="exceptionsListAI" style="max-width: 1000px; margin: 0 auto;">
                <div class="no-events">
                    <div class="icon">âš™ï¸</div>
                    <h3>Nicio excepÈ›ie activÄƒ</h3>
                    <p>AdaugÄƒ excepÈ›ii pentru operatori de Ã®ncredere</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- PAGINÄ‚: Modificare Evenimente -->
    <div id="pageModificareEvenimente" class="page" style="display:none;">
        <div class="page-header">
            <h1>âœï¸ Modificare Eveniment</h1>
            <p>EditeazÄƒ evenimente existente</p>
        </div>
        <div class="page-content">
            <div style="background: linear-gradient(135deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9)); border: 1px solid rgba(248, 113, 113, 0.3); border-radius: 12px; padding: 30px; max-width: 800px; margin: 0 auto;">
                <div style="margin-bottom: 30px;">
                    <label style="display: block; margin-bottom: 10px; font-weight: 600;">ğŸ” CautÄƒ eveniment dupÄƒ ID</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="searchEventIDAI" placeholder="EV-12345..." style="flex: 1; padding: 12px; border: 2px solid rgba(255,255,255,0.1); border-radius: 8px; background: rgba(255,255,255,0.05); color: white;">
                        <button onclick="loadEventForEditAI()" class="btn-primary" style="padding: 12px 30px;">CautÄƒ ğŸ”</button>
                    </div>
                </div>
                <div id="editEventFormAI" style="display:none;">
                    <div class="no-events">
                        <div class="icon">ğŸ“</div>
                        <h3>Formular Ã®n dezvoltare</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT FILES -->
    <script src="config.js"></script>
    <script src="api.js"></script>
    <script src="auth.js"></script>
    <script src="utils.js"></script>
    <script src="operator.js"></script>
    <script src="admin.js"></script>
    <script src="gm.js"></script>
    <script src="dovezi.js"></script>
    <script src="chat.js"></script>
</body>
</html>
