<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>SuperParty v2</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #0f172a;
      --bg-alt: #020617;
      --card: #020617;
      --card-alt: #020617;
      --accent: #e11d48;
      --accent-soft: rgba(225, 29, 72, 0.15);
      --border-subtle: #1f2937;
      --text: #e5e7eb;
      --text-soft: #9ca3af;
      --text-soft2: #6b7280;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.95);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Roboto", sans-serif;
      background: radial-gradient(circle at top, #111827 0, #020617 55%, #020617 100%);
      color: var(--text);
      height: 100vh;
      overflow: hidden;
    }

    .app-shell {
      display: grid;
      grid-template-columns: 260px 1fr;
      height: 100vh;
      max-height: 100vh;
    }

    /* SIDEBAR */

    .sidebar {
      background: radial-gradient(circle at top left, #111827 0, #020617 55%, #020617 100%);
      border-right: 1px solid rgba(148, 163, 184, 0.15);
      padding: 18px 14px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .logo-row {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 8px 10px 14px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, rgba(248, 113, 113, 0.32), transparent 55%);
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.85);
    }

    .logo-badge {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #f97316, #e11d48);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      color: white;
      font-size: 16px;
      box-shadow: 0 12px 35px rgba(239, 68, 68, 0.6);
    }

    .logo-text-main {
      font-size: 15px;
      font-weight: 700;
      letter-spacing: 0.03em;
      text-transform: uppercase;
    }

    .logo-text-sub {
      font-size: 11px;
      color: var(--text-soft);
    }

    .sidebar-section-label {
      font-size: 11px;
      text-transform: uppercase;
      color: var(--text-soft2);
      letter-spacing: 0.18em;
      margin: 6px 8px 4px;
    }

    .nav-list {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-bottom: 6px;
    }

    .nav-item {
      border-radius: 999px;
      padding: 7px 11px;
      display: flex;
      align-items: center;
      gap: 9px;
      cursor: pointer;
      font-size: 13px;
      color: var(--text-soft);
      transition: all 0.18s ease;
      border: 1px solid transparent;
      position: relative;
    }

    .nav-item .nav-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: transparent;
      box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.5);
    }

    .nav-item span.label {
      flex: 1;
      white-space: nowrap;
    }

    .nav-item small {
      font-size: 11px;
      color: var(--text-soft2);
    }

    .nav-item:hover {
      background: rgba(15, 23, 42, 0.9);
      color: var(--text);
      border-color: rgba(148, 163, 184, 0.3);
    }

    .nav-item.active {
      background: radial-gradient(circle at 15% 0%, rgba(248, 113, 113, 0.5), transparent 65%);
      color: #f9fafb;
      border-color: rgba(248, 113, 113, 0.65);
      box-shadow: 0 10px 30px rgba(248, 113, 113, 0.55);
    }

    .nav-item.active .nav-dot {
      background: #f97316;
      box-shadow: 0 0 0 1px rgba(248, 113, 113, 0.8),
        0 0 15px rgba(248, 113, 113, 0.9);
    }

    .sidebar-footer {
      margin-top: auto;
      padding-top: 10px;
      border-top: 1px dashed rgba(148, 163, 184, 0.25);
      display: flex;
      flex-direction: column;
      gap: 10px;
      font-size: 11px;
      color: var(--text-soft2);
    }

    .mode-pill {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      padding: 7px 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      font-size: 11px;
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.8), rgba(15, 23, 42, 0.95));
    }

    .mode-pill span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .mode-badge {
      border-radius: 999px;
      padding: 1px 7px;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      background: rgba(15, 118, 110, 0.1);
      color: #a5f3fc;
      border: 1px solid rgba(34, 211, 238, 0.35);
    }

    .mode-pill strong {
      color: #f9fafb;
      font-weight: 600;
    }

    .mode-status {
      border-radius: 999px;
      padding: 2px 7px;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .mode-status span.dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.8);
    }

    .mode-status.off span.dot {
      background: #6b7280;
      box-shadow: none;
    }

    .mode-status.off {
      color: var(--text-soft2);
      border: 1px solid rgba(75, 85, 99, 0.4);
      background: rgba(15, 23, 42, 0.9);
    }

    .mode-status.on {
      color: #bbf7d0;
      border: 1px solid rgba(34, 197, 94, 0.6);
      background: rgba(22, 163, 74, 0.15);
    }

    .hint-commands {
      font-size: 10px;
      line-height: 1.5;
      color: var(--text-soft2);
    }

    .hint-commands code {
      font-size: 10px;
      border-radius: 999px;
      padding: 2px 6px;
      border: 1px solid rgba(75, 85, 99, 0.7);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
    }

    /* MAIN LAYOUT */

    .main {
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
      padding: 14px 16px 16px;
    }

    .main-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
    }

    .main-title-wrap {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .main-title {
      font-size: 20px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .main-title span.emoji {
      font-size: 20px;
    }

    .main-subtitle {
      font-size: 12px;
      color: var(--text-soft2);
    }

    .header-badges {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .pill {
      padding: 4px 9px;
      border-radius: 999px;
      font-size: 11px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: rgba(15, 23, 42, 0.82);
    }

    .pill.accent {
      border-color: rgba(248, 113, 113, 0.8);
      color: #fecaca;
      background: radial-gradient(circle at 0 50%, rgba(248, 113, 113, 0.32), rgba(15, 23, 42, 0.85));
    }

    .pill span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #f97316;
      box-shadow: 0 0 10px rgba(248, 113, 113, 0.8);
    }

    .main-body {
      flex: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .page {
      display: none;
      height: 100%;
      overflow: auto;
      padding-right: 4px;
    }

    .page.active {
      display: block;
    }

    /* CARDS, LAYOUTS */

    .grid {
      display: grid;
      gap: 10px;
    }

    .grid-3 {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    .grid-2 {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    @media (max-width: 1100px) {
      .app-shell {
        grid-template-columns: 220px 1fr;
      }
      .grid-3 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 900px) {
      .app-shell {
        grid-template-columns: 1fr;
      }
      .sidebar {
        display: none;
      }
    }

    @media (max-width: 768px) {
      .grid-3,
      .grid-2 {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: radial-gradient(circle at 0 0, #020617 0, #020617 60%, #020617 100%);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-subtle);
      padding: 12px 14px;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.95);
      position: relative;
      overflow: hidden;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 6px;
    }

    .card-title {
      font-size: 13px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card-title span.icon {
      font-size: 15px;
    }

    .card-subtitle {
      font-size: 11px;
      color: var(--text-soft2);
    }

    .stat-main {
      font-size: 19px;
      font-weight: 600;
      margin-top: 4px;
    }

    .stat-sub {
      font-size: 11px;
      color: var(--text-soft2);
    }

    .badge-soft {
      border-radius: 999px;
      padding: 2px 7px;
      font-size: 10px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: #e5e7eb;
      background: rgba(15, 23, 42, 0.9);
    }

    .badge-soft.green {
      color: #bbf7d0;
      border-color: rgba(34, 197, 94, 0.6);
      background: rgba(22, 163, 74, 0.18);
    }

    .badge-soft.pink {
      color: #fecaca;
      border-color: rgba(248, 113, 113, 0.7);
      background: rgba(248, 113, 113, 0.12);
    }

    .divider {
      border-bottom: 1px dashed rgba(31, 41, 55, 0.9);
      margin: 8px -14px;
    }

    .list {
      list-style: none;
      padding: 0;
      margin: 4px 0 0;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 12px;
    }

    .list-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      padding: 4px 0;
    }

    .list-item-main {
      display: flex;
      flex-direction: column;
    }

    .muted {
      color: var(--text-soft2);
      font-size: 11px;
    }

    /* GM MODULE */

    .gm-tabs {
      display: inline-flex;
      gap: 6px;
      padding: 4px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.92);
      border: 1px solid rgba(75, 85, 99, 0.7);
      margin-bottom: 8px;
    }

    .gm-tab-btn {
      border-radius: 999px;
      border: none;
      padding: 4px 10px;
      font-size: 11px;
      color: var(--text-soft2);
      background: transparent;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .gm-tab-btn:hover {
      color: #e5e7eb;
    }

    .gm-tab-btn.active {
      background: radial-gradient(circle at 0 0, rgba(248, 113, 113, 0.32), rgba(15, 23, 42, 0.9));
      color: #fee2e2;
      box-shadow: 0 10px 25px rgba(248, 113, 113, 0.5);
    }

    .gm-panels {
      margin-top: 6px;
    }

    .gm-panel {
      display: none;
    }

    .gm-panel.active {
      display: block;
    }

    .table-like {
      width: 100%;
      border-collapse: collapse;
      font-size: 11px;
      margin-top: 4px;
    }

    .table-like thead {
      background: rgba(15, 23, 42, 0.9);
    }

    .table-like th,
    .table-like td {
      padding: 5px 6px;
      border-bottom: 1px solid rgba(31, 41, 55, 0.9);
      text-align: left;
    }

    .table-like th {
      font-weight: 500;
      color: var(--text-soft2);
      font-size: 11px;
    }

    .btn-xs {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.9);
      padding: 2px 7px;
      font-size: 10px;
      cursor: pointer;
      color: #e5e7eb;
    }

    .btn-xs.primary {
      border-color: rgba(248, 113, 113, 0.8);
      background: rgba(248, 113, 113, 0.1);
      color: #fecaca;
    }

    .btn-xs.green {
      border-color: rgba(34, 197, 94, 0.7);
      background: rgba(22, 163, 74, 0.12);
      color: #bbf7d0;
    }

    .btn-xs.yellow {
      border-color: rgba(234, 179, 8, 0.7);
      background: rgba(234, 179, 8, 0.14);
      color: #fef9c3;
    }

    .btn-xs.blue {
      border-color: rgba(59, 130, 246, 0.7);
      background: rgba(37, 99, 235, 0.14);
      color: #bfdbfe;
    }

    .btn-xs + .btn-xs {
      margin-left: 4px;
    }

    .pill-filter {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      margin-bottom: 4px;
    }

    .pill-filter select {
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      padding: 2px 7px;
      font-size: 11px;
    }

    .pill-filter button {
      margin-left: 4px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.9);
      padding: 2px 7px;
      font-size: 11px;
      cursor: pointer;
      color: #e5e7eb;
    }

    /* CHAT FLOATING */

    .chat-launcher {
      position: fixed;
      right: 18px;
      bottom: 18px;
      z-index: 30;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 8px;
    }

    .chat-badge {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-soft);
      border: 1px solid rgba(148, 163, 184, 0.7);
      backdrop-filter: blur(10px);
    }

    .chat-toggle-btn {
      width: 52px;
      height: 52px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: radial-gradient(circle at 30% 0, #f97316, #e11d48);
      box-shadow: 0 18px 45px rgba(248, 113, 113, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 24px;
      position: relative;
    }

    .chat-toggle-btn span.ping {
      position: absolute;
      width: 82%;
      height: 82%;
      border-radius: inherit;
      border: 1px solid rgba(248, 250, 252, 0.7);
      opacity: 0.6;
      animation: ping 1.5s infinite;
    }

    @keyframes ping {
      0% {
        transform: scale(1);
        opacity: 0.6;
      }
      100% {
        transform: scale(1.45);
        opacity: 0;
      }
    }

    .chat-window {
      position: fixed;
      right: 16px;
      bottom: 80px;
      width: 320px;
      max-height: 460px;
      background: radial-gradient(circle at top, #020617 0, #020617 50%, #020617 100%);
      border-radius: 20px;
      box-shadow: 0 20px 50px rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.35);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: 40;
      backdrop-filter: blur(22px);
    }

    .chat-header {
      padding: 8px 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(31, 41, 55, 0.95);
      background: radial-gradient(circle at 0 0, rgba(248, 113, 113, 0.32), rgba(15, 23, 42, 0.95));
    }

    .chat-header-main {
      display: flex;
      flex-direction: column;
      gap: 0;
    }

    .chat-header-main strong {
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .chat-header-main span.mode-label {
      font-size: 10px;
      color: #fee2e2;
    }

    .chat-header-sub {
      font-size: 10px;
      color: #fecaca;
    }

    .chat-messages {
      flex: 1;
      padding: 8px;
      overflow-y: auto;
      font-size: 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      background: radial-gradient(circle at 0 0, rgba(15, 23, 42, 0.96), #020617 65%);
    }

    .chat-msg {
      max-width: 82%;
      padding: 6px 8px;
      border-radius: 11px;
      border: 1px solid rgba(15, 23, 42, 0.9);
      position: relative;
    }

    .chat-msg.user {
      margin-left: auto;
      background: rgba(37, 99, 235, 0.16);
      border-color: rgba(59, 130, 246, 0.85);
    }

    .chat-msg.ai {
      margin-right: auto;
      background: rgba(15, 23, 42, 0.9);
      border-color: rgba(55, 65, 81, 0.9);
    }

    .chat-meta {
      font-size: 9px;
      color: var(--text-soft2);
      margin-top: 2px;
      display: flex;
      justify-content: space-between;
      gap: 6px;
    }

    .chat-input-wrap {
      padding: 7px;
      border-top: 1px solid rgba(31, 41, 55, 0.95);
      background: rgba(15, 23, 42, 1);
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .chat-input-row {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .chat-input-row input {
      flex: 1;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.95);
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      padding: 6px 10px;
      font-size: 12px;
      outline: none;
    }

    .chat-input-row input::placeholder {
      color: var(--text-soft2);
    }

    .chat-input-row button {
      border-radius: 999px;
      border: 1px solid rgba(248, 113, 113, 0.85);
      background: radial-gradient(circle at 0 0, rgba(248, 113, 113, 0.3), rgba(15, 23, 42, 1));
      color: #fee2e2;
      padding: 5px 10px;
      font-size: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }

    .chat-hints {
      font-size: 10px;
      color: var(--text-soft2);
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
    }

    .chat-hints span {
      border-radius: 999px;
      border: 1px dashed rgba(75, 85, 99, 0.9);
      padding: 1px 6px;
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="logo-row">
        <div class="logo-badge">SP</div>
        <div>
          <div class="logo-text-main">SuperParty</div>
          <div class="logo-text-sub">Creier AI + GM Dashboard</div>
        </div>
      </div>

      <div>
        <div class="sidebar-section-label">Navigare</div>
        <div class="nav-list">
          <div class="nav-item active" data-page="home">
            <div class="nav-dot"></div>
            <span class="label">üè† AcasƒÉ</span>
            <small>overview</small>
          </div>
          <div class="nav-item" data-page="noteaza">
            <div class="nav-dot"></div>
            <span class="label">üìù NoteazƒÉ Eveniment</span>
            <small>rapid</small>
          </div>
          <div class="nav-item" data-page="nealocate">
            <div class="nav-dot"></div>
            <span class="label">üéà Petreceri Nealocate</span>
          </div>
          <div class="nav-item" data-page="ce-am">
            <div class="nav-dot"></div>
            <span class="label">üìÖ Ce Petreceri Am</span>
          </div>
          <div class="nav-item" data-page="total">
            <div class="nav-dot"></div>
            <span class="label">üìä Total Petreceri</span>
          </div>
          <div class="nav-item" data-page="soferi">
            <div class="nav-dot"></div>
            <span class="label">üöó Evenimente cu »òoferi</span>
          </div>
          <div class="nav-item" data-page="echipa">
            <div class="nav-dot"></div>
            <span class="label">üë• Echipa</span>
          </div>
          <div class="nav-item" data-page="inventar">
            <div class="nav-dot"></div>
            <span class="label">üì¶ Inventar</span>
          </div>
          <div class="nav-item" data-page="piniata">
            <div class="nav-dot"></div>
            <span class="label">üéä Piniata</span>
          </div>
        </div>
      </div>

      <div id="adminNavGroup" class="hidden">
        <div class="sidebar-section-label">Admin</div>
        <div class="nav-list">
          <div class="nav-item" data-page="admin-users">
            <div class="nav-dot"></div>
            <span class="label">üîê Management Utilizatori</span>
          </div>
        </div>
      </div>

      <div id="gmNavGroup" class="hidden">
        <div class="sidebar-section-label">GM</div>
        <div class="nav-list">
          <div class="nav-item" data-page="gm-panel">
            <div class="nav-dot"></div>
            <span class="label">üéÆ GM Panel</span>
          </div>
        </div>
      </div>

      <div class="sidebar-footer">
        <div class="mode-pill">
          <span>
            <span class="mode-badge">Mode</span>
            <strong id="currentModeLabel">Standard</strong>
          </span>
          <span id="currentModeStatus" class="mode-status off">
            <span class="dot"></span> OFF
          </span>
        </div>
        <div class="hint-commands">
          Comenzi secrete √Æn chat:<br />
          <code>open mod andrei admin</code><br />
          <code>open mod andrei gm</code><br />
          <code>intra in mod logare</code><br />
          <code>iesi din mod admin</code><br />
          <code>iesi din mod gm</code>
        </div>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <header class="main-header">
        <div class="main-title-wrap">
          <div class="main-title">
            <span class="emoji">üß†</span>
            SuperParty ‚Äì Creier AI
          </div>
          <div class="main-subtitle">
            Dashboard pentru petreceri, echipƒÉ & GM ‚Äì conectat la Google Sheets.
          </div>
        </div>
        <div class="header-badges">
          <div class="pill accent">
            <span class="dot"></span>
            <span>AI Live</span>
          </div>
          <div class="pill">
            üåê <span id="backendStatusLabel">Backend conectat</span>
          </div>
        </div>
      </header>

      <section class="main-body">
        <!-- PAGINA ACASƒÇ -->
        <div class="page active" id="page-home">
          <div class="grid grid-3">
            <div class="card">
              <div class="card-header">
                <div>
                  <div class="card-title">
                    <span class="icon">üìà</span>
                    Acurate»õe AI
                  </div>
                  <div class="card-subtitle">Estimat pe baza verificƒÉrilor GM</div>
                </div>
                <span class="badge-soft green" id="aiAccuracyBadge">92% OK</span>
              </div>
              <div class="stat-main" id="aiAccuracyValue">92%</div>
              <div class="stat-sub">Ultima actualizare: automat din Creier AI</div>
            </div>

            <div class="card">
              <div class="card-header">
                <div>
                  <div class="card-title">
                    <span class="icon">‚è±Ô∏è</span>
                    Timp economisit
                  </div>
                  <div class="card-subtitle">Fa»õƒÉ de munca manualƒÉ cu Excel / WhatsApp</div>
                </div>
              </div>
              <div class="stat-main" id="timeSavedValue">120 min</div>
              <div class="stat-sub">Pe ultimele conversa»õii / calcule de salarii</div>
            </div>

            <div class="card">
              <div class="card-header">
                <div>
                  <div class="card-title">
                    <span class="icon">üí¨</span>
                    Conversa»õii AI
                  </div>
                  <div class="card-subtitle">Ce se √Ænt√¢mplƒÉ √Æn chat-ul de pe site</div>
                </div>
              </div>
              <div class="stat-main" id="totalMessagesValue">‚Äì</div>
              <div class="stat-sub">
                conversa»õii: <span id="totalConversationsValue">‚Äì</span> ¬∑ useri loga»õi:
                <span id="uniqueUsersValue">‚Äì</span>
              </div>
            </div>
          </div>

          <div class="grid grid-2" style="margin-top: 10px;">
            <div class="card">
              <div class="card-header">
                <div>
                  <div class="card-title">
                    <span class="icon">üìå</span>
                    Trending Topics
                  </div>
                  <div class="card-subtitle">Top 3 √ÆntrebƒÉri puse de pƒÉrin»õi / clien»õi</div>
                </div>
                <span class="badge-soft">auto din Conversa»õii</span>
              </div>
              <ul class="list" id="trendingTopicsList">
                <li class="muted">Se √ÆncarcƒÉ din Creier AI...</li>
              </ul>
            </div>

            <div class="card">
              <div class="card-header">
                <div>
                  <div class="card-title">
                    <span class="icon">üéâ</span>
                    Flux rapid NoteazƒÉ Petrecere
                  </div>
                  <div class="card-subtitle">Po»õi »ôi din chat: ‚Äûvreau sƒÉ notez o petrecere..."</div>
                </div>
                <span class="badge-soft pink">GPT Trigger</span>
              </div>
              <div>
                <div class="muted" style="margin-bottom: 6px;">
                  Exemplu: <br />
                  <code style="font-size:11px;">
                    vreau sƒÉ notez o petrecere pe 15 martie la ora 17:00, la X, cu Elsa »ôi Spiderman
                  </code>
                </div>
                <button class="btn-xs primary" id="openNoteazaFromHome">
                  Deschide ‚ÄûNoteazƒÉ Eveniment"
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- PAGE: NOTEAZƒÇ EVENIMENT -->
        <div class="page" id="page-noteaza">
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title">
                  <span class="icon">üìù</span>
                  NoteazƒÉ Eveniment
                </div>
                <div class="card-subtitle">Formular simplu ‚Äì dar po»õi folosi »ôi chat-ul AI.</div>
              </div>
            </div>
            <div style="font-size:12px;display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:6px;">
              <div>
                <label>Descriere petrecere</label><br />
                <textarea id="noteazaDescriere" rows="4" style="width:100%;background:#020617;color:#e5e7eb;border-radius:10px;border:1px solid rgba(55,65,81,0.95);padding:6px;font-size:12px;"></textarea>
              </div>
              <div>
                <label>Detalii structurate (JSON simplu)</label><br />
                <textarea id="noteazaDetalii" rows="4" style="width:100%;background:#020617;color:#e5e7eb;border-radius:10px;border:1px solid rgba(55,65,81,0.95);padding:6px;font-size:12px;">{
  "data": "",
  "ora": "",
  "locatie": "",
  "contact": ""
}</textarea>
                <div style="margin-top:8px;">
                  <button class="btn-xs primary" id="btnCreatePetrecereForm">CreeazƒÉ Petrecere</button>
                  <span class="muted" id="noteazaStatus"></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- PAGE: PETRECERI NEALOCATE -->
        <div class="page" id="page-nealocate">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <span class="icon">üéà</span>
                Petreceri Nealocate
              </div>
            </div>
            <table class="table-like" id="tableNealocate">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Descriere</th>
                  <th>Status</th>
                  <th>Detalii</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="4" class="muted">Se vor √ÆncƒÉrca din Creier AI...</td></tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- PAGE: CE PETRECERI AM -->
        <div class="page" id="page-ce-am">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <span class="icon">üìÖ</span>
                Ce Petreceri Am
              </div>
            </div>
            <div class="muted">
              √én viitor: filtrare dupƒÉ user logat. Momentan afi»ôƒÉm toate petrecerile din Google Sheets.
            </div>
            <table class="table-like" id="tableCeAm">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Descriere</th>
                  <th>Status</th>
                  <th>Detalii</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="4" class="muted">Se vor √ÆncƒÉrca din Creier AI...</td></tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- PAGE: TOTAL PETRECERI -->
        <div class="page" id="page-total">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <span class="icon">üìä</span>
                Total Petreceri
              </div>
            </div>
            <div class="grid grid-3">
              <div>
                <div class="muted">Total petreceri</div>
                <div class="stat-main" id="totalPetreceriCount">‚Äì</div>
              </div>
              <div>
                <div class="muted">Nealocate</div>
                <div class="stat-main" id="totalNealocateCount">‚Äì</div>
              </div>
              <div>
                <div class="muted">Cu personaje alocate</div>
                <div class="stat-main" id="totalCuPersonajeCount">‚Äì</div>
              </div>
            </div>
          </div>
        </div>

        <!-- PAGE: »òOFERI -->
        <div class="page" id="page-soferi">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <span class="icon">üöó</span>
                Evenimente cu »òoferi
              </div>
            </div>
            <div class="muted">
              √én viitor putem marca √Æn DetaliiJson dacƒÉ e nevoie de »ôofer »ôi filtra aici.
            </div>
          </div>
        </div>

        <!-- PAGE: ECHIPA -->
        <div class="page" id="page-echipa">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <span class="icon">üë•</span>
                Echipa
              </div>
            </div>
            <table class="table-like" id="tableEchipa">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nume</th>
                  <th>Email</th>
                  <th>Rol</th>
                  <th>Aprobat</th>
                  <th>Blocat</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="6" class="muted">Se vor √ÆncƒÉrca din Creier AI...</td></tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- PAGE: INVENTAR -->
        <div class="page" id="page-inventar">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <span class="icon">üì¶</span>
                Inventar
              </div>
            </div>
            <div class="muted">
              Poate fi conectat ulterior la alt sheet / modul ‚ÄûInventar".
            </div>
          </div>
        </div>

        <!-- PAGE: PINIATA -->
        <div class="page" id="page-piniata">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <span class="icon">üéä</span>
                Piniata
              </div>
            </div>
            <div class="muted">
              Modul special Piniata ‚Äì de construit ulterior. Acum este un placeholder √Æn UI.
            </div>
          </div>
        </div>

        <!-- PAGE: ADMIN USERS -->
        <div class="page" id="page-admin-users">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <span class="icon">üîê</span>
                Management Utilizatori (Admin)
              </div>
            </div>
            <table class="table-like" id="tableAdminUsers">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nume</th>
                  <th>Email</th>
                  <th>Rol</th>
                  <th>Aprobat</th>
                  <th>Blocat</th>
                  <th>Ac»õiuni</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="7" class="muted">Vizibil doar √Æn mod Admin.</td></tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- PAGE: GM PANEL -->
        <div class="page" id="page-gm-panel">
          <div class="card">
            <div class="card-header">
              <div>
                <div class="card-title">
                  <span class="icon">üéÆ</span>
                  GM Panel
                </div>
                <div class="card-subtitle">
                  Control pentru verificƒÉri AI, conversa»õii »ôi training.
                </div>
              </div>
              <span class="badge-soft pink">mod GM</span>
            </div>

            <div class="gm-tabs">
              <button class="gm-tab-btn active" data-gm-tab="gm-conversatii">üìã Toate Conversa»õiile</button>
              <button class="gm-tab-btn" data-gm-tab="gm-logati">üë§ Utilizatori Loga»õi</button>
              <button class="gm-tab-btn" data-gm-tab="gm-nelogati">üëª Neloga»õi</button>
              <button class="gm-tab-btn" data-gm-tab="gm-verificari">üîç VerificƒÉri AI</button>
              <button class="gm-tab-btn" data-gm-tab="gm-analytics">üìä Analytics</button>
              <button class="gm-tab-btn" data-gm-tab="gm-training">‚öôÔ∏è Training</button>
            </div>

            <div class="gm-panels">
              <!-- TAB 1: Conversa»õii -->
              <div class="gm-panel active" id="gm-conversatii">
                <div class="muted">Ultimele conversa»õii (logate + nelogate).</div>
                <table class="table-like" id="tableGMConversations">
                  <thead>
                    <tr>
                      <th>TS</th>
                      <th>Session</th>
                      <th>User</th>
                      <th>From</th>
                      <th>Mesaj</th>
                      <th>Logat?</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr><td colspan="6" class="muted">Se vor √ÆncƒÉrca din Creier AI...</td></tr>
                  </tbody>
                </table>
              </div>

              <!-- TAB 2: Loga»õi -->
              <div class="gm-panel" id="gm-logati">
                <div class="muted">Utilizatori loga»õi (din Echipa + conversa»õii).</div>
                <table class="table-like" id="tableGMLogged">
                  <thead>
                    <tr>
                      <th>User</th>
                      <th>Conversa»õii</th>
                      <th>Ac»õiune</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr><td colspan="3" class="muted">Se calculeazƒÉ din date.</td></tr>
                  </tbody>
                </table>
              </div>

              <!-- TAB 3: Neloga»õi -->
              <div class="gm-panel" id="gm-nelogati">
                <div class="muted">Session guests: prima/ultima vizitƒÉ, nr. conversa»õii.</div>
                <table class="table-like" id="tableGMGuests">
                  <thead>
                    <tr>
                      <th>Session</th>
                      <th>Prima vizitƒÉ</th>
                      <th>Ultima vizitƒÉ</th>
                      <th>Conversa»õii</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr><td colspan="4" class="muted">Se √ÆncarcƒÉ din getUnloggedUsers...</td></tr>
                  </tbody>
                </table>
              </div>

              <!-- TAB 4: VerificƒÉri AI -->
              <div class="gm-panel" id="gm-verificari">
                <div class="muted">Sec»õiune pentru verificƒÉri AI - √Æn dezvoltare.</div>
              </div>

              <!-- TAB 5: Analytics -->
              <div class="gm-panel" id="gm-analytics">
                <div class="grid grid-3">
                  <div>
                    <div class="card-subtitle">Acurate»õe AI (%)</div>
                    <div class="stat-main" id="gmAiAccuracy">92%</div>
                  </div>
                  <div>
                    <div class="card-subtitle">Timp mediu rƒÉspuns</div>
                    <div class="stat-main" id="gmAvgResponse">3s</div>
                  </div>
                  <div>
                    <div class="card-subtitle">Timp economisit</div>
                    <div class="stat-main" id="gmTimeSaved">120 min</div>
                  </div>
                </div>
              </div>

              <!-- TAB 6: Training -->
              <div class="gm-panel" id="gm-training">
                <div class="muted">Sec»õiune pentru training AI - √Æn dezvoltare.</div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- CHAT FLOATING -->
  <div class="chat-launcher">
    <div class="chat-badge">√éntreabƒÉ Creierul AI sau tasteazƒÉ comanda secretƒÉ‚Ä¶</div>
    <button class="chat-toggle-btn" id="chatToggleBtn">
      <span class="ping"></span>
      ü§ñ
    </button>
  </div>

  <div class="chat-window hidden" id="chatWindow">
    <div class="chat-header">
      <div class="chat-header-main">
        <strong>
          ü§ñ SuperParty Bot
          <span class="mode-label" id="chatModeLabel">Standard</span>
        </strong>
        <span class="chat-header-sub">Po»õi scrie natural sau cu comenzi speciale.</span>
      </div>
      <span class="badge-soft">Conectat la Creier AI</span>
    </div>
    <div class="chat-messages" id="chatMessages"></div>
    <div class="chat-input-wrap">
      <div class="chat-input-row">
        <input id="chatInput" placeholder="Scrie un mesaj... ex: 'vreau sƒÉ notez o petrecere...'" />
        <button id="chatSendBtn">Trimite</button>
      </div>
      <div class="chat-hints">
        <span>üí° ex: ‚Äûce servicii oferi»õi?"</span>
        <span>üí° ex: ‚Äûvreau sƒÉ notez o petrecere..."</span>
      </div>
    </div>
  </div>

  <script>
    // =======================
    // CONFIG FRONTEND - URL NOU ACTUALIZAT
    // =======================
    const BACKEND_URL = "https://script.google.com/macros/s/AKfycbyfyw63pxz5z6hW0abaQXEvu1aU1OPSykc2v8Jz23-z2RFY14rw1zU90ETUEn8TLZXd/exec";

    let currentPage = "home";
    let currentMode = "standard";
    let sessionId = "sess-" + Math.random().toString(36).slice(2);
    let loggedUser = null;

    // =======================
    // GENERIC BACKEND CALL
    // =======================
    async function callBackend(action, payload = {}) {
      try {
        const res = await fetch(BACKEND_URL, {
          method: "POST",
          headers: { "Content-Type": "text/plain;charset=utf-8" },
          body: JSON.stringify({ action, payload }),
        });
        const data = await res.json();
        if (!data.ok) {
          console.error("Backend error:", data.error);
          throw new Error(data.error || "Eroare backend");
        }
        return data.data;
      } catch (e) {
        console.error("callBackend failed", e);
        document.getElementById("backendStatusLabel").textContent = "Eroare backend";
        return null;
      }
    }

    // =======================
    // SIDEBAR NAV
    // =======================
    document.querySelectorAll(".nav-item").forEach((item) => {
      item.addEventListener("click", () => {
        const page = item.getAttribute("data-page");
        if (!page) return;
        setActivePage(page);
      });
    });

    function setActivePage(page) {
      currentPage = page;
      document.querySelectorAll(".nav-item").forEach((el) => el.classList.remove("active"));
      document.querySelector('.nav-item[data-page="' + page + '"]')?.classList.add("active");
      document.querySelectorAll(".page").forEach((p) => p.classList.remove("active"));
      document.getElementById("page-" + page)?.classList.add("active");
    }

    document.getElementById("openNoteazaFromHome").addEventListener("click", () => setActivePage("noteaza"));

    // =======================
    // MODURI (ADMIN / GM / LOGARE)
    // =======================
    function updateModeUI() {
      const label = document.getElementById("currentModeLabel");
      const status = document.getElementById("currentModeStatus");
      const chatLabel = document.getElementById("chatModeLabel");

      let modeText = "Standard";
      let on = false;

      if (currentMode === "admin") {
        modeText = "Admin";
        on = true;
        document.getElementById("adminNavGroup").classList.remove("hidden");
      } else {
        document.getElementById("adminNavGroup").classList.add("hidden");
      }

      if (currentMode === "gm") {
        modeText = "GM";
        on = true;
        document.getElementById("gmNavGroup").classList.remove("hidden");
      } else if (currentMode !== "gm") {
        document.getElementById("gmNavGroup").classList.add("hidden");
      }

      if (currentMode === "login") {
        modeText = "Logare";
        on = true;
      }

      label.textContent = modeText;
      chatLabel.textContent = modeText;
      status.classList.toggle("on", on);
      status.classList.toggle("off", !on);
      status.innerHTML = '<span class="dot"></span> ' + (on ? "ON" : "OFF");
    }

    function handleModeCommands(textRaw) {
      const text = textRaw.trim().toLowerCase();

      if (text === "open mod andrei admin") {
        currentMode = "admin";
        updateModeUI();
        pushAIMessage("‚úÖ Am intrat √Æn mod <b>Admin</b>. Ai acces la management utilizatori.");
        return true;
      }
      if (text === "open mod andrei gm") {
        currentMode = "gm";
        updateModeUI();
        pushAIMessage("‚úÖ Am intrat √Æn mod <b>GM</b>. Po»õi vedea GM Panel »ôi verificƒÉri AI.");
        return true;
      }
      if (text === "intra in mod logare") {
        currentMode = "login";
        updateModeUI();
        pushAIMessage("üîê Am intrat √Æn mod <b>Logare</b>. Putem conecta UI-ul la un user din Echipa.");
        return true;
      }
      if (text === "iesi din mod admin") {
        if (currentMode === "admin") {
          currentMode = "standard";
          updateModeUI();
          pushAIMessage("üëã Am ie»ôit din mod Admin.");
        } else {
          pushAIMessage("Nu e»ôti √Æn mod Admin acum.");
        }
        return true;
      }
      if (text === "iesi din mod gm") {
        if (currentMode === "gm") {
          currentMode = "standard";
          updateModeUI();
          pushAIMessage("üëã Am ie»ôit din mod GM.");
        } else {
          pushAIMessage("Nu e»ôti √Æn mod GM acum.");
        }
        return true;
      }
      return false;
    }

    // =======================
    // CHAT UI
    // =======================
    const chatWindow = document.getElementById("chatWindow");
    const chatToggleBtn = document.getElementById("chatToggleBtn");
    const chatMessages = document.getElementById("chatMessages");
    const chatInput = document.getElementById("chatInput");
    const chatSendBtn = document.getElementById("chatSendBtn");

    chatToggleBtn.addEventListener("click", () => {
      chatWindow.classList.toggle("hidden");
      if (!chatWindow.classList.contains("hidden")) {
        chatInput.focus();
      }
    });

    function pushMessage(role, text) {
      const div = document.createElement("div");
      div.className = "chat-msg " + (role === "user" ? "user" : "ai");
      div.innerHTML = '<div>' + text + '</div><div class="chat-meta"><span>' + (role === "user" ? "Tu" : "AI") + '</span><span>' + new Date().toLocaleTimeString("ro-RO", { hour: "2-digit", minute: "2-digit" }) + '</span></div>';
      chatMessages.appendChild(div);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function pushAIMessage(text) {
      pushMessage("ai", text);
    }

    async function handleChatSend() {
      const text = chatInput.value.trim();
      if (!text) return;
      chatInput.value = "";
      pushMessage("user", text);

      if (handleModeCommands(text)) {
        return;
      }

      // Afi»ôeazƒÉ "se g√¢nde»ôte..."
      pushAIMessage("‚è≥ MƒÉ g√¢ndesc...");

      try {
        // Trimite la backend (Apps Script) care vorbe»ôte cu GPT
        const response = await fetch(BACKEND_URL + "?action=chat&message=" + encodeURIComponent(text), {
          method: "GET"
        });
        
        const data = await response.json();
        
        // »òterge mesajul "se g√¢nde»ôte"
        const lastMsg = chatMessages.lastElementChild;
        if (lastMsg && lastMsg.textContent.includes("g√¢ndesc")) {
          lastMsg.remove();
        }
        
        if (data.ok && data.reply) {
          pushAIMessage(data.reply);
        } else if (data.error) {
          pushAIMessage("‚ö†Ô∏è Eroare: " + data.error);
        } else {
          pushAIMessage("‚ö†Ô∏è Nu am primit rƒÉspuns de la AI.");
        }
      } catch (e) {
        // »òterge mesajul "se g√¢nde»ôte"
        const lastMsg = chatMessages.lastElementChild;
        if (lastMsg && lastMsg.textContent.includes("g√¢ndesc")) {
          lastMsg.remove();
        }
        console.error("Chat error:", e);
        pushAIMessage("‚ö†Ô∏è Eroare la conectare cu AI-ul.");
      }
    }

    chatSendBtn.addEventListener("click", handleChatSend);
    chatInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") handleChatSend();
    });

    // =======================
    // GM Tabs
    // =======================
    document.querySelectorAll(".gm-tab-btn").forEach((btn) => {
      btn.addEventListener("click", () => {
        const tab = btn.getAttribute("data-gm-tab");
        document.querySelectorAll(".gm-tab-btn").forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        document.querySelectorAll(".gm-panel").forEach((p) => p.classList.remove("active"));
        document.getElementById(tab)?.classList.add("active");
      });
    });

    // =======================
    // INIT
    // =======================
    (function init() {
      updateModeUI();
      document.getElementById("backendStatusLabel").textContent = "Backend conectat ‚úî";
      pushAIMessage("Salut! Sunt Creierul AI SuperParty. Cu ce te pot ajuta?");
    })();
  </script>
</body>
</html>
