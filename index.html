<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuperParty üéâ - Dashboard</title>
    
    <!-- Supabase Client Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
        }
        
        /* Sidebar */
        .sidebar {
            width: 280px;
            background: white;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
            z-index: 100;
        }
        
        .sidebar-header {
            padding: 35px 20px 30px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            position: relative;
            overflow: hidden;
            text-align: center;
        }
        
        /* Animated background particles */
        .sidebar-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: particlesMove 20s linear infinite;
        }
        
        @keyframes particlesMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        .sidebar-header h1 {
            font-size: 28px;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
            font-weight: 800;
            letter-spacing: 1px;
            animation: glow 2s ease-in-out infinite;
            text-align: center;
        }
        
        @keyframes glow {
            0%, 100% { text-shadow: 0 0 10px rgba(255,255,255,0.5), 0 0 20px rgba(255,255,255,0.3); }
            50% { text-shadow: 0 0 20px rgba(255,255,255,0.8), 0 0 30px rgba(255,255,255,0.5); }
        }
        
        .sidebar-header .by-ai {
            font-size: 16px;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: 700;
            letter-spacing: 2px;
            width: 100%;
        }
        
        .sidebar-header .by-ai > span:first-child {
            margin-right: 2px;
        }
        
        .sidebar-header .by-ai > span:last-child {
            margin-left: 2px;
        }
        
        .ai-badge {
            background: rgba(255,255,255,0.25);
            padding: 6px 16px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 800;
            animation: pulse 2s ease-in-out infinite;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.9; }
            50% { transform: scale(1.05); opacity: 1; }
        }
        
        .ai-icon {
            display: inline-block;
            animation: rotate 3s linear infinite;
            font-size: 20px;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .sparkle {
            display: inline-block;
            animation: sparkle 1.5s ease-in-out infinite;
            font-size: 20px;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(0.8); }
        }
        
        /* Floating AI Chat Button */
        .ai-chat-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 18px 28px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
            animation: floatButton 3s ease-in-out infinite;
        }
        
        .ai-chat-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.6);
        }
        
        .ai-chat-button:active {
            transform: translateY(-2px) scale(1.02);
        }
        
        @keyframes floatButton {
            0%, 100% { 
                transform: translateY(0px);
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            }
            50% { 
                transform: translateY(-10px);
                box-shadow: 0 15px 35px rgba(102, 126, 234, 0.5);
            }
        }
        
        .ai-chat-icon {
            font-size: 24px;
            animation: robotTalk 1s ease-in-out infinite;
        }
        
        @keyframes robotTalk {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }
        
        .ai-chat-pulse {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            border-radius: 50px;
            background: rgba(102, 126, 234, 0.3);
            animation: pulseRing 2s ease-out infinite;
            z-index: -1;
        }
        
        @keyframes pulseRing {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 0;
            }
        }
        
        /* Welcome Page Animations */
        @keyframes bounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .sidebar-menu {
            flex: 1;
            padding: 20px 0;
            overflow-y: auto;
        }
        
        .menu-item {
            padding: 15px 25px;
            color: #4b5563;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 16px;
            font-weight: 500;
            border-left: 3px solid transparent;
        }
        
        .menu-item:hover {
            background: #f3f4f6;
            color: #667eea;
            border-left-color: #667eea;
        }
        
        .menu-item.active {
            background: #ede9fe;
            color: #667eea;
            border-left-color: #667eea;
        }
        
        .menu-icon {
            font-size: 20px;
            width: 24px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 40px;
            overflow-y: auto;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Page Header */
        .page-header {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .page-header h2 {
            font-size: 32px;
            color: #1f2937;
            margin-bottom: 10px;
        }
        
        .page-header p {
            color: #6b7280;
            font-size: 16px;
        }
        
        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: all 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }
        
        .stat-number {
            font-size: 36px;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #6b7280;
            font-size: 14px;
        }
        
        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }
        
        .card-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #1f2937;
        }
        
        .card-content {
            color: #6b7280;
            font-size: 15px;
            line-height: 1.6;
        }
        
        .card-content p {
            margin-bottom: 8px;
        }
        
        /* List */
        .list {
            background: white;
            border-radius: 15px;
            padding: 0;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .list-item {
            padding: 20px 25px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }
        
        .list-item:last-child {
            border-bottom: none;
        }
        
        .list-item:hover {
            background: #f9fafb;
        }
        
        .list-title {
            font-weight: 600;
            color: #1f2937;
            font-size: 16px;
        }
        
        .list-subtitle {
            color: #6b7280;
            font-size: 14px;
            margin-top: 5px;
        }
        
        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .badge-success {
            background: #d1fae5;
            color: #047857;
        }
        
        .badge-warning {
            background: #fef3c7;
            color: #b45309;
        }
        
        .badge-info {
            background: #dbeafe;
            color: #0369a1;
        }
        
        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 101;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 20px;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .mobile-menu-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.6);
        }
        
        .mobile-menu-toggle:active {
            transform: scale(0.95);
        }
        
        /* Super AI Modal Styles */
        .ai-chat-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 0;
        }
        
        .ai-chat-container {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            height: 85vh;
            max-height: 700px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .ai-chat-header {
            padding: 18px 20px;
            border-bottom: 2px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            flex-shrink: 0;
        }
        
        .ai-chat-header-content {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
            min-width: 0;
        }
        
        .ai-chat-icon {
            font-size: 28px;
            flex-shrink: 0;
        }
        
        .ai-chat-title-wrapper {
            flex: 1;
            min-width: 0;
        }
        
        .ai-chat-title {
            margin: 0;
            color: white;
            font-size: 20px;
            font-weight: 700;
            line-height: 1.2;
        }
        
        .ai-chat-subtitle {
            margin: 2px 0 0 0;
            color: rgba(255,255,255,0.9);
            font-size: 12px;
            line-height: 1.2;
        }
        
        .ai-chat-close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            line-height: 1;
            width: 38px;
            height: 38px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            flex-shrink: 0;
        }
        
        .ai-chat-close:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.05);
        }
        
        .ai-chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background: #f9fafb;
            min-height: 0;
        }
        
        .ai-message-wrapper {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .ai-message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 18px;
        }
        
        .ai-message-content {
            background: white;
            padding: 12px 14px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            max-width: 85%;
            word-wrap: break-word;
        }
        
        .ai-chat-input-area {
            padding: 15px;
            border-top: 2px solid #e5e7eb;
            background: white;
            flex-shrink: 0;
        }
        
        .ai-chat-input-wrapper {
            display: flex;
            gap: 8px;
            align-items: stretch;
        }
        
        .ai-chat-input {
            flex: 1;
            padding: 12px 14px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 15px;
            outline: none;
            transition: all 0.3s;
            font-family: inherit;
        }
        
        .ai-chat-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .ai-chat-send-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .ai-chat-send-btn:hover {
            transform: scale(1.03);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .ai-chat-send-btn:active {
            transform: scale(0.98);
        }
        
        .ai-chat-footer-text {
            margin: 8px 0 0 0;
            font-size: 10px;
            color: #9ca3af;
            text-align: center;
            line-height: 1.3;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 1001;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                padding: 20px;
                padding-top: 80px;
                transition: none;
                width: 100%;
            }
            
            /* Overlay √Æntunecat c√¢nd sidebar-ul e deschis */
            .sidebar.open::before {
                content: '';
                position: fixed;
                top: 0;
                left: 280px;
                width: calc(100vw - 280px);
                height: 100vh;
                background: rgba(0, 0, 0, 0.5);
                z-index: -1;
                animation: fadeIn 0.3s ease;
            }
            
            .page-header {
                margin-top: 0;
            }
            
            .page-header h2 {
                font-size: 24px;
            }
            
            .page-header p {
                font-size: 14px;
            }
            
            .mobile-menu-toggle {
                display: flex !important;
                transition: all 0.3s ease;
                z-index: 1002;
            }
            
            .cards-grid,
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            /* Super AI Modal - Mobile Optimizations */
            .ai-chat-modal {
                padding: 0;
                align-items: flex-end;
            }
            
            .ai-chat-container {
                width: 100%;
                height: 92vh;
                max-height: none;
                border-radius: 20px 20px 0 0;
                margin: 0;
            }
            
            .ai-chat-header {
                padding: 15px 16px;
            }
            
            .ai-chat-icon {
                font-size: 24px;
            }
            
            .ai-chat-title {
                font-size: 18px;
            }
            
            .ai-chat-subtitle {
                font-size: 11px;
            }
            
            .ai-chat-close {
                width: 36px;
                height: 36px;
                font-size: 26px;
            }
            
            .ai-chat-messages {
                padding: 12px;
            }
            
            .ai-message-avatar {
                width: 32px;
                height: 32px;
                font-size: 16px;
            }
            
            .ai-message-content {
                max-width: 80%;
                padding: 10px 12px;
                font-size: 14px;
            }
            
            .ai-chat-input-area {
                padding: 12px;
            }
            
            .ai-chat-input {
                padding: 11px 12px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .ai-chat-send-btn {
                padding: 11px 16px;
                font-size: 13px;
            }
            
            .ai-chat-footer-text {
                font-size: 9px;
            }
        }
        
        /* Extra small phones */
        @media (max-width: 380px) {
            .ai-chat-header {
                padding: 12px 14px;
            }
            
            .ai-chat-icon {
                font-size: 22px;
            }
            
            .ai-chat-title {
                font-size: 16px;
            }
            
            .ai-chat-subtitle {
                font-size: 10px;
            }
            
            .ai-chat-send-btn {
                padding: 11px 14px;
                font-size: 12px;
            }
        }
        
        /* Photo Verification Animations */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-15px);
            }
        }
        
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        }
        
        /* Password Modal pentru PaginƒÉ SecretƒÉ */
        .password-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .password-modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .password-modal h3 {
            font-size: 24px;
            color: #1f2937;
            margin-bottom: 10px;
        }

        .password-modal input {
            width: 100%;
            padding: 15px;
            margin: 20px 0;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 18px;
            text-align: center;
            letter-spacing: 5px;
        }

        .password-modal input:focus {
            outline: none;
            border-color: #667eea;
        }

        .password-modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .password-cancel {
            flex: 1;
            padding: 12px;
            background: #e5e7eb;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
        }

        .password-submit {
            flex: 1;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
        }
        
        /* Secret Page Styles */
        .secret-content {
            display: none;
        }
        
        .secret-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuBtn" onclick="toggleSidebar()">‚ò∞</button>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1>üéâ SuperParty</h1>
            <div class="by-ai">
                <span>BY</span>
                <span class="ai-badge" id="adminTrigger" style="cursor: default; transition: transform 0.2s;" title="">
                    <span class="ai-icon">ü§ñ</span>
                    <span>AI</span>
                </span>
                <span class="sparkle">‚ú®</span>
            </div>
        </div>
        
        <div class="sidebar-menu" id="mainMenu">
            <div class="menu-item active" onclick="showPage('home')">
                <span class="menu-icon">üè†</span>
                <span>AcasƒÉ</span>
            </div>
            <div class="menu-item" onclick="showPage('noteaza-eveniment')">
                <span class="menu-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 24px;">‚ûï</span>
                <span style="color: #10b981; font-weight: 600;">NoteazƒÉ Eveniment</span>
            </div>
            <div class="menu-item" onclick="showPage('petreceri-nealocate')">
                <span class="menu-icon">üìã</span>
                <span>Petreceri Nealocate</span>
            </div>
            <div class="menu-item" onclick="showPage('ce-petreceri-am')">
                <span class="menu-icon">üéä</span>
                <span>Ce Petreceri Am</span>
            </div>
            <div class="menu-item" onclick="showPage('total-petreceri')">
                <span class="menu-icon">üìà</span>
                <span>Total Petreceri</span>
            </div>
            <div class="menu-item" onclick="showPage('soferi')">
                <span class="menu-icon">üöó</span>
                <span>Evenimente cu »òoferi</span>
            </div>
            <div class="menu-item" onclick="showPage('cu-factura')">
                <span class="menu-icon">üßæ</span>
                <span>Cu FacturƒÉ</span>
            </div>
            <div class="menu-item" onclick="showPage('echipa')">
                <span class="menu-icon">üë•</span>
                <span>Echipa</span>
            </div>
            <div class="menu-item" onclick="showPage('inventar')">
                <span class="menu-icon">üì¶</span>
                <span>Inventar</span>
            </div>
            <div class="menu-item" onclick="showPage('piniata')">
                <span class="menu-icon">üéØ</span>
                <span>Piniata</span>
            </div>
            <div class="menu-item" onclick="showPage('verifica-formular')">
                <span class="menu-icon">üì∏</span>
                <span>VerificƒÉ Formular</span>
            </div>
            
            <!-- BUTON MODIFICƒÇ EVENIMENTE -->
            <div class="menu-item" onclick="checkPasswordAndShowSecret()" style="cursor: pointer;">
                <span class="menu-icon">üîí</span>
                <span>ModificƒÉ Evenimente</span>
            </div>
            
            <!-- MENIU SECRET - Apare doar dupƒÉ autentificare -->
            <div id="secretMenuSection" style="display: none; margin-left: 15px; border-left: 3px solid #ef4444; padding-left: 5px;">
                <div class="menu-item" onclick="showSecretPage('bifeaza-evenimente-secret')" style="font-size: 14px; padding: 12px 20px;">
                    <span class="menu-icon">‚úÖ</span>
                    <span>BifeazƒÉ Evenimente</span>
                </div>
                <div class="menu-item" onclick="showSecretPage('vezi-statistici')" style="font-size: 14px; padding: 12px 20px;">
                    <span class="menu-icon">üìä</span>
                    <span>Vezi Statistici</span>
                </div>
                <div class="menu-item" onclick="showSecretPage('total-statistici')" style="font-size: 14px; padding: 12px 20px;">
                    <span class="menu-icon">üìà</span>
                    <span>Total Statistici</span>
                </div>
                <div class="menu-item" onclick="showSecretPage('target-traineri')" style="font-size: 14px; padding: 12px 20px;">
                    <span class="menu-icon">üí∞</span>
                    <span>Target Traineri</span>
                </div>
                <div class="menu-item" onclick="showSecretPage('target-animatie')" style="font-size: 14px; padding: 12px 20px;">
                    <span class="menu-icon">üé≠</span>
                    <span>Target Anima»õie</span>
                </div>
                <div class="menu-item" onclick="showSecretPage('target-vanzari')" style="font-size: 14px; padding: 12px 20px;">
                    <span class="menu-icon">üíµ</span>
                    <span>Target V√¢nzƒÉri</span>
                </div>
                <div class="menu-item" onclick="showSecretPage('genereaza-coduri-secret')" style="font-size: 14px; padding: 12px 20px;">
                    <span class="menu-icon">üîë</span>
                    <span>GenereazƒÉ Coduri</span>
                </div>
            </div>
            
            <!-- ADMIN MENU - Dezactivat
            <div id="adminMenu" style="display: none;">
                <div style="border-top: 2px solid #ef4444; margin: 15px 0; padding-top: 15px;">
                    <div style="color: #ef4444; font-weight: 700; font-size: 12px; padding: 0 20px 10px 20px; letter-spacing: 1px;">üîê ADMIN MODE</div>
                </div>
                <div class="menu-item active" onclick="showPage('bifeaza-evenimente')" style="background: rgba(239, 68, 68, 0.1);">
                    <span class="menu-icon">‚úÖ</span>
                    <span style="color: #ef4444; font-weight: 600;">BifeazƒÉ Evenimente</span>
                </div>
                <div class="menu-item" onclick="logoutAdmin()" style="background: rgba(239, 68, 68, 0.2); margin-top: 20px;">
                    <span class="menu-icon">üö™</span>
                    <span style="color: #ef4444; font-weight: 700;">Ie»ôire Admin</span>
                </div>
            </div>
            -->
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <!-- Welcome Home Page (Default - COMPLETELY EMPTY) -->
        <div class="page active" id="home">
            <!-- GOL - Nimic aici -->
        </div>
        
        <!-- Page: NoteazƒÉ Eveniment (FORM) -->
        <div class="page" id="noteaza-eveniment">
            <div class="page-header">
                <h2>‚ûï NoteazƒÉ Eveniment Nou</h2>
                <p>CompleteazƒÉ formularul pentru a adƒÉuga un eveniment nou</p>
            </div>
            
            <!-- √énregistreazƒÉ Colaboratori Button -->
            <div style="margin-bottom: 25px;">
                <button onclick="openColaboratoriModal()" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border: none; padding: 15px 25px; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 16px; box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4); transition: all 0.3s; display: inline-flex; align-items: center; gap: 10px;">
                    <span style="font-size: 22px;">üë•</span>
                    <span>√énregistreazƒÉ Colaboratori</span>
                </button>
            </div>
            
            <!-- AI Photo Scan Section -->
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px; padding: 25px; margin-bottom: 25px; box-shadow: 0 8px 30px rgba(102, 126, 234, 0.3);">
                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                    <div style="font-size: 40px;">üì∏</div>
                    <div>
                        <h3 style="color: white; font-size: 20px; font-weight: 700; margin: 0 0 5px 0;">ScaneazƒÉ Formular cu AI</h3>
                        <p style="color: rgba(255,255,255,0.9); font-size: 14px; margin: 0;">√éncarcƒÉ o pozƒÉ »ôi AI va completa automat c√¢mpurile din formular</p>
                    </div>
                </div>
                
                <input type="file" id="aiPhotoInput" accept="image/*" style="display: none;" onchange="processPhotoWithAI(this)">
                
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button type="button" onclick="document.getElementById('aiPhotoInput').click()" style="flex: 1; min-width: 200px; background: white; color: #667eea; border: none; padding: 15px 20px; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <span style="font-size: 20px;">üì∑</span>
                        <span>FƒÉ PozƒÉ</span>
                    </button>
                    
                    <button type="button" onclick="document.getElementById('aiPhotoInput').click()" style="flex: 1; min-width: 200px; background: rgba(255,255,255,0.2); color: white; border: 2px solid white; padding: 15px 20px; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 15px; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <span style="font-size: 20px;">üñºÔ∏è</span>
                        <span>√éncarcƒÉ PozƒÉ</span>
                    </button>
                </div>
                
                <!-- Preview Area -->
                <div id="photoPreview" style="margin-top: 15px; display: none;">
                    <div style="background: rgba(255,255,255,0.2); border-radius: 12px; padding: 15px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;">
                            <span style="color: white; font-weight: 600;">ü§ñ AI ProceseazƒÉ imaginea...</span>
                            <div style="width: 20px; height: 20px; border: 3px solid white; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                        </div>
                        <img id="previewImage" style="width: 100%; max-height: 300px; object-fit: contain; border-radius: 8px; background: white;">
                    </div>
                </div>
            </div>
            
            <!-- Form Container -->
            <div style="background: white; border-radius: 20px; padding: 30px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);">
                <form id="eventForm" onsubmit="handleFormSubmit(event)">
                    <!-- Data primit formular -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Pe ce data ai primit formularul</label>
                        <input type="text" name="dataFormular" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="15/11/2025" pattern="\d{2}/\d{2}/\d{4}" required>
                    </div>
                    
                    <!-- Adauga dovada primit formular -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Adauga dovada primit formular</label>
                        <input type="file" id="dovadaFormular" name="dovadaFormular" accept="image/*" style="display: none;">
                        <button type="button" onclick="document.getElementById('dovadaFormular').click()" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; background: white; text-align: left; cursor: pointer; font-size: 15px; color: #6b7280;">
                            üñºÔ∏è Add image
                        </button>
                    </div>
                    
                    <!-- Cine noteaza -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Cine noteaza eveniment</label>
                        <input type="text" name="cineNoteaza" list="trainerCodes" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Scrie cod (ex: A1, B5, Z50)" required>
                        <p style="margin-top: 5px; font-size: 12px; color: #9ca3af; font-style: italic;">üí° Scrie litera »ôi numƒÉrul (A1-Z50) - lista se filtreazƒÉ automat</p>
                    </div>
                    
                    <!-- Numar eveniment - COD UNIC -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 12px; font-weight: 500;">Cod unic eveniment</label>
                        <div style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px 30px; border-radius: 15px; font-size: 42px; font-weight: 700; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                            <span id="numarEveniment">318</span>
                        </div>
                        <p style="margin-top: 8px; font-size: 12px; color: #9ca3af; font-style: italic;">Generator automat - folosit pentru dublarea evenimentelor √Æn func»õie de roluri</p>
                    </div>
                    
                    <!-- De pe ce a intrat -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">De pe ce a intrat clientul</label>
                        <select name="sursa" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Facebook</option>
                            <option>Instagram</option>
                            <option>Google</option>
                            <option>Recomandare</option>
                            <option>WhatsApp</option>
                            <option>Altele</option>
                        </select>
                    </div>
                    
                    <!-- De unde a intrat -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">De unde a intrat clientul</label>
                        <select name="locatie" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Bucure»ôti</option>
                            <option>Ilfov</option>
                            <option>Constan»õa</option>
                            <option>Bra»ôov</option>
                            <option>Cluj</option>
                            <option>Altele</option>
                        </select>
                    </div>
                    
                    <!-- Telefon -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Numar de telefon</label>
                        <input type="tel" name="telefon" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="+40 700 000 000" required>
                    </div>
                    
                    <!-- Necesita sofer -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Necesita sofer</label>
                        <select name="necesitaSofer" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Da</option>
                            <option>Nu</option>
                        </select>
                    </div>
                    
                    <!-- Titlu - INPUT TEXT pentru parsing live -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">üìù Titlu Eveniment</label>
                        <input type="text" name="titlu" id="titluInput" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: Spider-Man + Iron Man + Piniata + Tort Kinder" required oninput="parseTitluLive()">
                        <p style="margin-top: 5px; font-size: 12px; color: #9ca3af; font-style: italic;">üí° SeparƒÉ cu <strong>+</strong> sau <strong>si</strong> sau <strong>»ôi</strong> | Include roluri + extra-uri (piniata, tort, vata, etc.)</p>
                    </div>
                    
                    <!-- Container DINAMIC pentru durate pe fiecare rol (FƒÇRƒÇ extra-uri) -->
                    <div id="durateRolesContainer" style="margin-bottom: 20px; display: none;">
                        <!-- C√¢mpurile de duratƒÉ vor fi generate automat aici -->
                    </div>
                    
                    <!-- Data si ora petrecere - UN SINGUR CAMP -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">üìÖ Data »ôi Ora Petrecere</label>
                        <input type="datetime-local" name="dataOraPetrecere" id="dataOraPetrecere" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                        <p style="margin-top: 5px; font-size: 12px; color: #9ca3af; font-style: italic;">üí° SelecteazƒÉ at√¢t data c√¢t »ôi ora petrecerii</p>
                    </div>
                    
                    <!-- Cate ore ai vandut -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Cate ore ai vandut in eveniment</label>
                        <select name="oreVandute" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>1 orƒÉ</option>
                            <option>2 ore</option>
                            <option>3 ore</option>
                            <option>4 ore</option>
                            <option>5 ore</option>
                        </select>
                    </div>
                    
                    
                    <!-- Adresa -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Adresa</label>
                        <input type="text" name="adresa" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Bucure»ôti, Sector 3" required>
                    </div>
                    
                    <!-- Total -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Total</label>
                        <input type="number" name="total" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="123" required>
                    </div>
                    
                    <!-- MetodƒÉ PlatƒÉ -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Cum se √ÆncaseazƒÉ? üí≥</label>
                        <select name="metodaPlata" id="metodaPlata" onchange="handleMetodaPlataChange()" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option value="Cash la final">üíµ Cash la final de petrecere</option>
                            <option value="Prin factura">üßæ Prin facturƒÉ</option>
                            <option value="Alta varianta">‚úÖ AltƒÉ variantƒÉ / A plƒÉtit</option>
                            <option value="Card partial + Cash rest">üí≥ Pe card o parte + restul cash</option>
                            <option value="Cash partial + Card rest">üíµ Cash o parte + restul pe card</option>
                        </select>
                    </div>
                    
                    <!-- C√¢mp condi»õionat: Card partial -->
                    <div id="campCardPartial" style="margin-bottom: 20px; display: none;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">üí≥ C√¢t s-a plƒÉtit pe card?</label>
                        <input type="number" name="sumaCard" id="sumaCard" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: 150">
                        <p style="margin-top: 5px; font-size: 13px; color: #6b7280;">Restul se va plƒÉti cash</p>
                    </div>
                    
                    <!-- C√¢mp condi»õionat: Cash partial -->
                    <div id="campCashPartial" style="margin-bottom: 20px; display: none;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">üíµ C√¢t s-a plƒÉtit cash?</label>
                        <input type="number" name="sumaCash" id="sumaCash" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: 100">
                        <p style="margin-top: 5px; font-size: 13px; color: #6b7280;">Restul se va plƒÉti pe card</p>
                    </div>
                    
                    <!-- Servicii dorite -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Servicii dorite</label>
                        <select name="servicii" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Anima»õie</option>
                            <option>Piniata</option>
                            <option>Facepainting</option>
                            <option>Baloane</option>
                            <option>MuzicƒÉ</option>
                        </select>
                    </div>
                    
                    <!-- Are piniata -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Are piniata</label>
                        <select name="arePiniata" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Da</option>
                            <option>Nu</option>
                        </select>
                    </div>
                    
                    <!-- Prenume parinte -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Prenume parinte</label>
                        <input type="text" name="prenumeParinte" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Introdu prenumele..." required>
                    </div>
                    
                    <!-- Prenume copil -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Prenume copil</label>
                        <input type="text" name="prenumeCopil" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Alexandru" required>
                    </div>
                    
                    <!-- Varsta copil -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Varsta copil</label>
                        <input type="number" name="varstaCopil" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="123" required>
                    </div>
                    
                    <!-- Numar copii aproximativ -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Numar copii aproximativ</label>
                        <select name="numarCopii" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>5-10 copii</option>
                            <option>10-15 copii</option>
                            <option>15-20 copii</option>
                            <option>20+ copii</option>
                        </select>
                    </div>
                    
                    <!-- Alte detalii -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Alte detalii</label>
                        <textarea name="alteDetalii" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px; min-height: 80px; resize: vertical;" placeholder="Detalii suplimentare..."></textarea>
                    </div>
                    
                    <!-- Cum se incaseaza -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Cum se incaseaza</label>
                        <select name="cumSeIncaseaza" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Cash</option>
                            <option>Card</option>
                            <option>Transfer bancar</option>
                        </select>
                    </div>
                    
                    <!-- Situatie incasare -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Situatie incasare</label>
                        <select name="situatieIncasare" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>PlƒÉtit integral</option>
                            <option>Avans</option>
                            <option>NeplƒÉtit</option>
                        </select>
                    </div>
                    
                    <!-- Scrie datele de facturare -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Scrie datele de facturare</label>
                        <select name="dateleFacturare" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Da - necesitƒÉ facturƒÉ</option>
                            <option>Nu - nu necesitƒÉ facturƒÉ</option>
                        </select>
                    </div>
                    
                    <!-- Dovada platii -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Dovada platii</label>
                        <input type="file" id="dovadaPlatii" name="dovadaPlatii" accept="image/*" style="display: none;">
                        <button type="button" onclick="document.getElementById('dovadaPlatii').click()" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; background: white; text-align: left; cursor: pointer; font-size: 15px; color: #6b7280;">
                            üñºÔ∏è Add image
                        </button>
                    </div>
                    
                    <!-- Dovada Factura -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Dovada Factura</label>
                        <input type="file" id="dovadaFactura" name="dovadaFactura" accept="image/*" style="display: none;">
                        <button type="button" onclick="document.getElementById('dovadaFactura').click()" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; background: white; text-align: left; cursor: pointer; font-size: 15px; color: #6b7280;">
                            üñºÔ∏è Add image
                        </button>
                    </div>
                    
                    <!-- Submit Button -->
                    <button type="submit" style="width: 100%; padding: 16px; background: #f0f0f0; color: #666; border: none; border-radius: 12px; font-size: 18px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                        Am terminat!
                    </button>
                </form>
            </div>
        </div>
        
        <!-- Page: Petreceri Nealocate -->
        <div class="page active" id="petreceri-nealocate">
            <div class="page-header">
                <h2>üìã Petreceri Nealocate</h2>
                <p>Lista petrecerilor care a»ôteaptƒÉ sƒÉ fie alocate unui »ôofer</p>
            </div>
        </div>
        
        <!-- Page: Ce Petreceri Am -->
        <div class="page" id="ce-petreceri-am">
            <div class="page-header">
                <h2>üéä Ce Petreceri Am</h2>
                <p>Petrecerile pe care le-ai notat tu - bazat pe codul tƒÉu de trainer</p>
            </div>
            
            <!-- Cod Trainer Input -->
            <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.06);">
                <div style="display: flex; gap: 15px; align-items: end; flex-wrap: wrap;">
                    <div style="flex: 1; min-width: 200px;">
                        <label style="display: block; margin-bottom: 8px; font-size: 14px; color: #6b7280; font-weight: 600;">üéØ Introdu codul tƒÉu de trainer:</label>
                        <input type="text" id="myTrainerCode" placeholder="Ex: A1, B5, Z50" style="width: 100%; padding: 12px 15px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px; text-transform: uppercase; font-weight: 600; transition: all 0.3s;" onfocus="this.style.borderColor='#667eea'" onblur="this.style.borderColor='#e5e7eb'">
                        <p style="margin-top: 8px; font-size: 13px; color: #9ca3af; font-style: italic;">üí° Acela»ôi cod pe care √Æl folose»ôti c√¢nd notezi evenimente</p>
                    </div>
                    <button onclick="loadMyParties()" style="padding: 12px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; font-size: 15px; font-weight: 700; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); white-space: nowrap;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(102, 126, 234, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.4)'">
                        üîç Vezi Petrecerile Mele
                    </button>
                </div>
            </div>
            
            <!-- My Parties Cards Grid -->
            <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 2px 15px rgba(0,0,0,0.08);">
                <h3 style="margin-bottom: 20px; color: #374151; font-size: 18px;" id="myPartiesTitle">üìã Petrecerile Mele</h3>
                <div id="myPartiesCardsContainer" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px;">
                    <!-- Cardurile vor fi generate dinamic aici -->
                    <div style="grid-column: 1 / -1; padding: 60px; text-align: center; color: #9ca3af; font-size: 16px;">
                        <div style="font-size: 48px; margin-bottom: 15px;">üéØ</div>
                        <div style="font-weight: 600;">Introdu codul tƒÉu de trainer pentru a vedea petrecerile</div>
                        <div style="margin-top: 10px; font-size: 14px;">Codul este acela»ôi pe care √Æl folose»ôti c√¢nd notezi un eveniment nou</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Page: Total Petreceri -->
        <div class="page" id="total-petreceri">
            <div class="page-header">
                <h2>üìà Total Petreceri</h2>
                <p>Vezi toate petrecerile salvate cu posibilitate de filtrare dupƒÉ datƒÉ</p>
            </div>
            
            <!-- Date Filter - Compact -->
            <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.06);">
                <div style="display: flex; flex-wrap: wrap; gap: 15px; align-items: end;">
                    <!-- Date Inputs -->
                    <div style="flex: 1; min-width: 180px;">
                        <label style="display: block; margin-bottom: 6px; font-size: 13px; color: #6b7280; font-weight: 500;">De la:</label>
                        <input type="date" id="dateFrom" style="width: 100%; padding: 10px 12px; border: 1px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: all 0.3s;" onfocus="this.style.borderColor='#667eea'" onblur="this.style.borderColor='#e5e7eb'">
                    </div>
                    <div style="flex: 1; min-width: 180px;">
                        <label style="display: block; margin-bottom: 6px; font-size: 13px; color: #6b7280; font-weight: 500;">P√¢nƒÉ la:</label>
                        <input type="date" id="dateTo" style="width: 100%; padding: 10px 12px; border: 1px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: all 0.3s;" onfocus="this.style.borderColor='#667eea'" onblur="this.style.borderColor='#e5e7eb'">
                    </div>
                    
                    <!-- Quick Filter Buttons -->
                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                        <button onclick="applyQuickFilter('today')" style="padding: 10px 14px; background: white; border: 1px solid #e5e7eb; border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s; color: #374151;" onmouseover="this.style.background='#f9fafb'; this.style.borderColor='#667eea'" onmouseout="this.style.background='white'; this.style.borderColor='#e5e7eb'">
                            Azi
                        </button>
                        <button onclick="applyQuickFilter('week')" style="padding: 10px 14px; background: white; border: 1px solid #e5e7eb; border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s; color: #374151;" onmouseover="this.style.background='#f9fafb'; this.style.borderColor='#667eea'" onmouseout="this.style.background='white'; this.style.borderColor='#e5e7eb'">
                            SƒÉptƒÉm√¢na
                        </button>
                        <button onclick="applyQuickFilter('month')" style="padding: 10px 14px; background: white; border: 1px solid #e5e7eb; border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s; color: #374151;" onmouseover="this.style.background='#f9fafb'; this.style.borderColor='#667eea'" onmouseout="this.style.background='white'; this.style.borderColor='#e5e7eb'">
                            Luna
                        </button>
                        <button onclick="applyQuickFilter('year')" style="padding: 10px 14px; background: white; border: 1px solid #e5e7eb; border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s; color: #374151;" onmouseover="this.style.background='#f9fafb'; this.style.borderColor='#667eea'" onmouseout="this.style.background='white'; this.style.borderColor='#e5e7eb'">
                            Anul
                        </button>
                        <button onclick="applyQuickFilter('all')" style="padding: 10px 16px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-size: 13px; font-weight: 700; cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);" onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 12px rgba(102, 126, 234, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(102, 126, 234, 0.3)'">
                            Toate
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Parties Cards Grid -->
            <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 2px 15px rgba(0,0,0,0.08);">
                <h3 style="margin-bottom: 20px; color: #374151; font-size: 18px;">üìã Lista Petrecerilor</h3>
                <div id="partiesCardsContainer" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px;">
                    <!-- Cardurile vor fi generate dinamic aici -->
                    <div style="grid-column: 1 / -1; padding: 60px; text-align: center; color: #9ca3af; font-size: 16px;">
                        <div style="font-size: 48px; margin-bottom: 15px;">üìä</div>
                        <div style="font-weight: 600;">SelecteazƒÉ un interval de date pentru a vedea petrecerile</div>
                        <div style="margin-top: 10px; font-size: 14px;">sau</div>
                        <div style="margin-top: 10px; font-size: 14px; font-weight: 600; color: #667eea;">Click pe "Toate" pentru a vedea toate evenimentele salvate</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Page: Evenimente cu »òoferi -->
        <div class="page" id="soferi">
            <!-- GOL - Nimic aici -->
        </div>
        
        <!-- Page: Evenimente cu FacturƒÉ -->
        <div class="page" id="cu-factura">
            <div class="page-header">
                <h2>üßæ Evenimente cu FacturƒÉ</h2>
                <p>Toate evenimentele plƒÉtite prin facturƒÉ</p>
            </div>
            
            <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 2px 15px rgba(0,0,0,0.08);">
                <!-- Statistici Rapide -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 25px;">
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 12px; color: white;">
                        <div style="font-size: 32px; font-weight: 800;" id="totalFacturi">0</div>
                        <div style="opacity: 0.9; font-size: 14px;">Total Facturi</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); padding: 20px; border-radius: 12px; color: white;">
                        <div style="font-size: 32px; font-weight: 800;" id="sumaFacturi">0 RON</div>
                        <div style="opacity: 0.9; font-size: 14px;">Valoare TotalƒÉ</div>
                    </div>
                </div>
                
                <!-- Lista Evenimente -->
                <div id="listaFacturi" style="margin-top: 20px;">
                    <p style="text-align: center; color: #6b7280; padding: 40px 0;">
                        üìÑ Nu existƒÉ evenimente cu facturƒÉ √ÆncƒÉ
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Page: Echipa -->
        <div class="page" id="echipa">
            <div class="page-header">
                <h2>üë• Echipa</h2>
                <p>GestioneazƒÉ membrii echipei tale</p>
            </div>
            
            <!-- Add Member Button -->
            <div style="margin-bottom: 30px;">
                <button onclick="addTeamMember()" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 12px 24px; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 15px; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3); transition: all 0.3s;">
                    ‚ûï AdaugƒÉ Membru
                </button>
            </div>
            
            <!-- Team Table -->
            <div style="background: white; border-radius: 20px; padding: 30px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); overflow-x: auto;">
                <table id="teamTable" style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="border-bottom: 2px solid #e5e7eb;">
                            <th style="padding: 15px; text-align: left; color: #6b7280; font-weight: 600; font-size: 14px;">Nume</th>
                            <th style="padding: 15px; text-align: left; color: #6b7280; font-weight: 600; font-size: 14px;">Telefon</th>
                            <th style="padding: 15px; text-align: left; color: #6b7280; font-weight: 600; font-size: 14px;">Ce cod am</th>
                            <th style="padding: 15px; text-align: left; color: #6b7280; font-weight: 600; font-size: 14px;">Rol</th>
                            <th style="padding: 15px; text-align: center; color: #6b7280; font-weight: 600; font-size: 14px;">Ac»õiuni</th>
                        </tr>
                    </thead>
                    <tbody id="teamTableBody">
                        <!-- Exemplu de r√¢nd -->
                        <tr style="border-bottom: 1px solid #f3f4f6;">
                            <td style="padding: 15px; color: #111827; font-weight: 500;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 16px;">
                                        A
                                    </div>
                                    <span>Andrei Popescu</span>
                                </div>
                            </td>
                            <td style="padding: 15px; color: #6b7280;">
                                <span style="color: #667eea; font-weight: 500;">üìû +40 700 123 456</span>
                            </td>
                            <td style="padding: 15px; color: #6b7280;">
                                <span style="background: #f3f4f6; padding: 6px 12px; border-radius: 8px; font-weight: 600; color: #667eea;">001</span>
                            </td>
                            <td style="padding: 15px;">
                                <span style="background: #dcfce7; color: #16a34a; padding: 6px 12px; border-radius: 8px; font-weight: 600; font-size: 13px;">Animator Principal</span>
                            </td>
                            <td style="padding: 15px; text-align: center;">
                                <button onclick="editTeamMember(this)" style="background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; margin-right: 8px; font-size: 13px;">‚úèÔ∏è EditeazƒÉ</button>
                                <button onclick="deleteTeamMember(this)" style="background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 13px;">üóëÔ∏è »òterge</button>
                            </td>
                        </tr>
                        
                        <tr style="border-bottom: 1px solid #f3f4f6;">
                            <td style="padding: 15px; color: #111827; font-weight: 500;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 16px;">
                                        M
                                    </div>
                                    <span>Maria Ionescu</span>
                                </div>
                            </td>
                            <td style="padding: 15px; color: #6b7280;">
                                <span style="color: #667eea; font-weight: 500;">üìû +40 700 234 567</span>
                            </td>
                            <td style="padding: 15px; color: #6b7280;">
                                <span style="background: #f3f4f6; padding: 6px 12px; border-radius: 8px; font-weight: 600; color: #667eea;">002</span>
                            </td>
                            <td style="padding: 15px;">
                                <span style="background: #dbeafe; color: #2563eb; padding: 6px 12px; border-radius: 8px; font-weight: 600; font-size: 13px;">»òofer</span>
                            </td>
                            <td style="padding: 15px; text-align: center;">
                                <button onclick="editTeamMember(this)" style="background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; margin-right: 8px; font-size: 13px;">‚úèÔ∏è EditeazƒÉ</button>
                                <button onclick="deleteTeamMember(this)" style="background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 13px;">üóëÔ∏è »òterge</button>
                            </td>
                        </tr>
                        
                        <tr>
                            <td style="padding: 15px; color: #111827; font-weight: 500;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #ec4899 0%, #be185d 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 16px;">
                                        I
                                    </div>
                                    <span>Ion Georgescu</span>
                                </div>
                            </td>
                            <td style="padding: 15px; color: #6b7280;">
                                <span style="color: #667eea; font-weight: 500;">üìû +40 700 345 678</span>
                            </td>
                            <td style="padding: 15px; color: #6b7280;">
                                <span style="background: #f3f4f6; padding: 6px 12px; border-radius: 8px; font-weight: 600; color: #667eea;">003</span>
                            </td>
                            <td style="padding: 15px;">
                                <span style="background: #fef3c7; color: #d97706; padding: 6px 12px; border-radius: 8px; font-weight: 600; font-size: 13px;">Asistent</span>
                            </td>
                            <td style="padding: 15px; text-align: center;">
                                <button onclick="editTeamMember(this)" style="background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; margin-right: 8px; font-size: 13px;">‚úèÔ∏è EditeazƒÉ</button>
                                <button onclick="deleteTeamMember(this)" style="background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 13px;">üóëÔ∏è »òterge</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Page: Inventar (EMPTY) -->
        <div class="page" id="inventar">
            <div class="page-header">
                <h2>üì¶ Inventar</h2>
                <p>Gestionare inventar »ôi materiale</p>
            </div>
            <!-- GOL - PregƒÉtit pentru viitor -->
        </div>
        
        <!-- Page: Piniata -->
        <div class="page" id="piniata">
            <div class="page-header">
                <h2>üéØ Piniata</h2>
                <p>Gestionare »ôi statistici pentru piniata</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">156</div>
                    <div class="stat-label">Total piniate folosite</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">23</div>
                    <div class="stat-label">√én stoc</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">12</div>
                    <div class="stat-label">Comandate</div>
                </div>
            </div>
            
            <div class="cards-grid">
                <div class="card">
                    <div class="card-title">üé® Tipuri de Piniate</div>
                    <div class="card-content">
                        <p><strong>Unicorn:</strong> 45 bucƒÉ»õi (29%)</p>
                        <p><strong>Super Eroi:</strong> 38 bucƒÉ»õi (24%)</p>
                        <p><strong>Prin»õ/Prin»õesƒÉ:</strong> 32 bucƒÉ»õi (21%)</p>
                        <p><strong>Animale:</strong> 28 bucƒÉ»õi (18%)</p>
                        <p><strong>Personalizate:</strong> 13 bucƒÉ»õi (8%)</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">üìä Statistici Lunare</div>
                    <div class="card-content">
                        <p><strong>Noiembrie:</strong> 18 piniate</p>
                        <p><strong>Octombrie:</strong> 22 piniate</p>
                        <p><strong>Septembrie:</strong> 20 piniate</p>
                        <p><strong>Medie lunarƒÉ:</strong> 20 piniate</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">üí∞ Costuri</div>
                    <div class="card-content">
                        <p><strong>Cost mediu:</strong> 150 lei / piniata</p>
                        <p><strong>Total investit:</strong> 23,400 lei</p>
                        <p><strong>Stoc curent:</strong> 3,450 lei</p>
                        <p><strong>ComandƒÉ nouƒÉ:</strong> 1,800 lei</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Page: VerificƒÉ Formular -->
        <div class="page" id="verifica-formular">
            <div class="page-header">
                <h2>üì∏ VerificƒÉ Formular cu PozƒÉ</h2>
                <p>√éncarcƒÉ poza cu formularul primit »ôi verificƒÉ data de notare pentru puncte</p>
            </div>
            
            <!-- Points Display Card -->
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px; padding: 30px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3); text-align: center;">
                <div style="font-size: 16px; color: rgba(255,255,255,0.9); margin-bottom: 10px; font-weight: 600;">Puncte √Æn Sistem</div>
                <div id="systemPointsDisplay" style="font-size: 64px; font-weight: 900; color: white; text-shadow: 0 4px 15px rgba(0,0,0,0.3);">0</div>
            </div>
            
            <!-- Upload Section -->
            <div id="uploadPhotoSection" style="background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%); border: 3px dashed #667eea; border-radius: 20px; padding: 50px 30px; text-align: center; margin-bottom: 30px; cursor: pointer; transition: all 0.3s;" onclick="document.getElementById('verificationPhotoInput').click()">
                <div style="font-size: 80px; margin-bottom: 20px;">üì∑</div>
                <div style="font-size: 22px; font-weight: 700; color: #374151; margin-bottom: 10px;">Click pentru a √ÆncƒÉrca pozƒÉ sau face pozƒÉ</div>
                <div style="font-size: 15px; color: #6b7280;">AcceptƒÉ JPG, PNG, JPEG - Maximum 10MB</div>
                <input type="file" id="verificationPhotoInput" accept="image/*" style="display: none;">
                
                <button onclick="event.stopPropagation(); document.getElementById('verificationPhotoInput').setAttribute('capture', 'environment'); document.getElementById('verificationPhotoInput').click();" style="margin-top: 20px; width: 100%; max-width: 300px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 18px; border-radius: 12px; font-size: 18px; font-weight: 700; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);">
                    <span>üì±</span>
                    <span>Sau Deschide Camera</span>
                </button>
            </div>
            
            <!-- Preview & Verification Section -->
            <div id="photoVerificationSection" style="display: none;">
                <!-- Photo Preview with Date Overlay -->
                <div style="position: relative; margin-bottom: 30px; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.2);">
                    <img id="verificationPhotoPreview" style="width: 100%; display: block; max-height: 500px; object-fit: contain; background: #000;">
                    <div id="photoDateOverlay" style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(0, 0, 0, 0.9); color: white; padding: 15px 35px; border-radius: 12px; font-size: 20px; font-weight: 700; box-shadow: 0 8px 25px rgba(0,0,0,0.5); border: 2px solid rgba(255,255,255,0.3);"></div>
                </div>
                
                <!-- Date Input Form -->
                <div style="background: white; border-radius: 20px; padding: 35px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 30px;">
                    <h3 style="color: #111827; font-size: 22px; margin-bottom: 25px; display: flex; align-items: center; gap: 10px;">
                        <span>üìÖ</span>
                        <span>Introdu Data Primirii Formularului</span>
                    </h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                        <div>
                            <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 10px; font-size: 15px;">Data din PozƒÉ (c√¢nd a fost primit formularul):</label>
                            <input type="date" id="receivedFormDate" style="width: 100%; padding: 14px 16px; border: 2px solid #e5e7eb; border-radius: 12px; font-size: 16px; transition: all 0.3s;" required onfocus="this.style.borderColor='#667eea'" onblur="this.style.borderColor='#e5e7eb'">
                        </div>
                        
                        <div>
                            <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 10px; font-size: 15px;">Data CurentƒÉ (azi):</label>
                            <input type="date" id="currentFormDate" readonly style="width: 100%; padding: 14px 16px; border: 2px solid #e5e7eb; border-radius: 12px; font-size: 16px; background: #f9fafb; color: #6b7280;">
                        </div>
                    </div>
                    
                    <button onclick="verifyFormDate()" style="width: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 18px; border-radius: 12px; font-size: 18px; font-weight: 700; cursor: pointer; transition: all 0.3s; box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <span>üîç</span>
                        <span>VerificƒÉ Data »ôi CalculeazƒÉ Puncte</span>
                    </button>
                </div>
            </div>
            
            <!-- Result Section -->
            <div id="verificationResult" style="display: none; padding: 40px; border-radius: 20px; margin-bottom: 30px; text-align: center; animation: slideIn 0.5s ease;">
                <div id="resultIcon" style="font-size: 96px; margin-bottom: 25px; animation: bounce 1s ease infinite;"></div>
                <div id="resultTitle" style="font-size: 36px; font-weight: 900; margin-bottom: 20px;"></div>
                <div id="resultMessage" style="font-size: 20px; font-weight: 600; margin-bottom: 25px;"></div>
                <div id="resultPoints" style="font-size: 64px; font-weight: 900; margin: 30px 0;"></div>
                
                <!-- Details Box -->
                <div style="background: rgba(255, 255, 255, 0.8); padding: 25px; border-radius: 15px; margin-top: 30px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="padding: 15px; border-bottom: 2px solid rgba(0,0,0,0.1);">
                            <div style="font-weight: 600; color: #374151; margin-bottom: 5px;">Data Primire Formular:</div>
                            <div id="detailReceivedFormDate" style="font-weight: 700; color: #1f2937; font-size: 18px;"></div>
                        </div>
                        <div style="padding: 15px; border-bottom: 2px solid rgba(0,0,0,0.1);">
                            <div style="font-weight: 600; color: #374151; margin-bottom: 5px;">Data CurentƒÉ:</div>
                            <div id="detailCurrentFormDate" style="font-weight: 700; color: #1f2937; font-size: 18px;"></div>
                        </div>
                        <div style="padding: 15px;">
                            <div style="font-weight: 600; color: #374151; margin-bottom: 5px;">Diferen»õƒÉ (zile):</div>
                            <div id="detailDifferenceDays" style="font-weight: 700; color: #1f2937; font-size: 18px;"></div>
                        </div>
                        <div style="padding: 15px;">
                            <div style="font-weight: 600; color: #374151; margin-bottom: 5px;">Puncte Acordate:</div>
                            <div id="detailPointsAwarded" style="font-weight: 700; color: #1f2937; font-size: 18px;"></div>
                        </div>
                    </div>
                </div>
                
                <button onclick="resetPhotoVerification()" style="margin-top: 30px; background: #6b7280; color: white; border: none; padding: 16px 40px; border-radius: 12px; font-size: 17px; font-weight: 600; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 15px rgba(107, 114, 128, 0.3);">
                    üîÑ VerificƒÉ Alt Formular
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal AdaugƒÉ Membru EchipƒÉ -->
    <div id="addMemberModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; justify-content: center; align-items: center;">
        <div style="background: white; border-radius: 20px; padding: 30px; max-width: 500px; width: 90%; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0; color: #111827; font-size: 24px;">‚ûï AdaugƒÉ Membru EchipƒÉ</h2>
                <button onclick="closeAddMemberModal()" style="background: none; border: none; font-size: 28px; cursor: pointer; color: #6b7280; line-height: 1;">√ó</button>
            </div>
            
            <p style="color: #6b7280; margin-bottom: 25px;">CompleteazƒÉ datele noului membru din echipƒÉ</p>
            
            <!-- Form -->
            <form id="addMemberForm" onsubmit="submitNewMember(event)">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Nume complet *</label>
                    <input type="text" id="newMemberName" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: Andrei Popescu" required>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Cod trainer *</label>
                    <input type="text" id="newMemberCode" list="trainerCodes" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: A1, B5, Z50" required>
                    <p style="margin-top: 5px; font-size: 11px; color: #9ca3af; font-style: italic;">üí° Scrie cod (A1-Z50) - lista se filtreazƒÉ automat</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Telefon *</label>
                    <input type="tel" id="newMemberPhone" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="+40 700 123 456" required>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Email *</label>
                    <input type="email" id="newMemberEmail" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="email@exemplu.ro" required>
                    <p style="margin-top: 5px; font-size: 11px; color: #9ca3af; font-style: italic;">üìß Membrul va primi invita»õie pe acest email</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Rol</label>
                    <select id="newMemberRole" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;">
                        <option value="">SelecteazƒÉ rol...</option>
                        <option value="Animator Principal">Animator Principal</option>
                        <option value="Animator">Animator</option>
                        <option value="»òofer">»òofer</option>
                        <option value="Asistent">Asistent</option>
                        <option value="Fotograf">Fotograf</option>
                        <option value="Manager">Manager</option>
                    </select>
                </div>
                
                <div style="display: flex; gap: 10px; margin-top: 30px;">
                    <button type="button" onclick="closeAddMemberModal()" style="flex: 1; padding: 12px; background: #f3f4f6; color: #6b7280; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 15px;">
                        AnuleazƒÉ
                    </button>
                    <button type="submit" style="flex: 1; padding: 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 15px; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);">
                        ‚úÖ AdaugƒÉ Membru
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Modal Colaboratori -->
    <div id="colaboratoriModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; justify-content: center; align-items: center;">
        <div style="background: white; border-radius: 20px; padding: 30px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0; color: #111827; font-size: 24px;">üë• √énregistreazƒÉ Colaboratori</h2>
                <button onclick="closeColaboratoriModal()" style="background: none; border: none; font-size: 28px; cursor: pointer; color: #6b7280; line-height: 1;">√ó</button>
            </div>
            
            <p style="color: #6b7280; margin-bottom: 25px;">AdaugƒÉ colaboratorii »ôi pre»õurile pentru acest eveniment</p>
            
            <!-- Add Colaborator Form -->
            <div style="background: #f9fafb; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                <div style="display: grid; gap: 15px;">
                    <div>
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Nume Colaborator</label>
                        <input type="text" id="colaboratorNume" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: Ion Popescu">
                    </div>
                    
                    <div>
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Telefon colaborator</label>
                        <input type="text" id="colaboratorTelefon" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: +40700123456">
                    </div>
                    
                    <div>
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Cod cine noteaza</label>
                        <input type="text" id="colaboratorCod" list="trainerCodes" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: A1, B5, Z50">
                        <p style="margin-top: 5px; font-size: 11px; color: #9ca3af; font-style: italic;">Scrie cod (A1-Z50)</p>
                    </div>
                    
                    <div>
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Tip Colaborare</label>
                        <select id="colaboratorTip" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;">
                            <option value="">SelecteazƒÉ...</option>
                            <option value="Loc de joacƒÉ">Loc de joacƒÉ</option>
                        </select>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                        <div>
                            <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Tip Pre»õ</label>
                            <select id="colaboratorTipPret" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;">
                                <option value="eveniment">Pe Eveniment</option>
                                <option value="ora">Pe OrƒÉ</option>
                            </select>
                        </div>
                        
                        <div>
                            <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Pre»õ (RON)</label>
                            <input type="number" id="colaboratorPret" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: 500">
                        </div>
                        
                        <div>
                            <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Pre»õ Transport (RON)</label>
                            <input type="number" id="colaboratorPretTransport" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: 50">
                        </div>
                    </div>
                    
                    <button onclick="addColaborator()" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 12px 20px; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 15px; margin-top: 10px;">
                        ‚ûï AdaugƒÉ Colaborator
                    </button>
                </div>
            </div>
            
            <!-- Colaboratori List -->
            <div id="colaboratoriList" style="margin-top: 20px;">
                <h3 style="color: #111827; font-size: 18px; margin-bottom: 15px;">Colaboratori AdƒÉuga»õi:</h3>
                <div id="colaboratoriItems" style="display: flex; flex-direction: column; gap: 10px;">
                    <!-- Colaboratori items will be added here -->
                </div>
            </div>
            
            <!-- Close Button -->
            <button onclick="closeColaboratoriModal()" style="width: 100%; background: #6b7280; color: white; border: none; padding: 12px; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 15px; margin-top: 20px;">
                √énchide
            </button>
        </div>
    </div>

    <!-- AI Chat Modal -->
    <div id="aiChatModal" class="ai-chat-modal">
        <div class="ai-chat-container">
            <!-- Header -->
            <div class="ai-chat-header">
                <div class="ai-chat-header-content">
                    <span class="ai-chat-icon">ü§ñ</span>
                    <div class="ai-chat-title-wrapper">
                        <h2 class="ai-chat-title">Super AI Assistant</h2>
                        <p class="ai-chat-subtitle">√éntreabƒÉ orice despre SuperParty</p>
                    </div>
                </div>
                <button onclick="closeAIChat()" class="ai-chat-close">√ó</button>
            </div>
            
            <!-- Chat Messages -->
            <div id="chatMessages" class="ai-chat-messages">
                <!-- Welcome message -->
                <div class="ai-message-wrapper">
                    <div class="ai-message-avatar">
                        <span>ü§ñ</span>
                    </div>
                    <div class="ai-message-content">
                        <p style="margin: 0; color: #111827; line-height: 1.5; font-weight: 600;">üëã Salut! Sunt Super AI!</p>
                        <p style="margin: 8px 0 0 0; color: #6b7280; line-height: 1.5;">√éntreabƒÉ-mƒÉ orice despre aplica»õie. RƒÉspund scurt »ôi la obiect! üòä</p>
                    </div>
                </div>
            </div>
            
            <!-- Input Area -->
            <div class="ai-chat-input-area">
                <div class="ai-chat-input-wrapper">
                    <input 
                        type="text" 
                        id="chatInput" 
                        class="ai-chat-input"
                        placeholder="Scrie mesajul tƒÉu aici..." 
                        onkeypress="if(event.key === 'Enter') sendMessage()"
                    >
                    <button 
                        onclick="sendMessage()" 
                        id="sendButton"
                        class="ai-chat-send-btn"
                    >
                        üì§ Trimite
                    </button>
                </div>
                <p class="ai-chat-footer-text">
                    üí° Powered by ChatGPT - RƒÉspunsurile sunt generate de inteligen»õƒÉ artificialƒÉ
                </p>
            </div>
        </div>
    </div>
    
    <!-- PAGINƒÇ SECRETƒÇ -->
    <div class="page" id="pagina-secreta">
        <!-- BifeazƒÉ Evenimente Secret -->
        <div class="secret-content active" id="bifeaza-evenimente-secret" style="display: block;">
            <div class="page-header">
                <h2>‚úÖ BifeazƒÉ Evenimente</h2>
                <p>MarcheazƒÉ evenimentele completate din sistem</p>
            </div>
            
            <div style="background: white; border-radius: 20px; padding: 40px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-top: 20px;">
                <h4 style="color: #1f2937; font-size: 22px; margin-bottom: 20px;">üìã ListƒÉ Evenimente de Bifat</h4>
                
                <div style="display: grid; gap: 15px;">
                    <div style="padding: 20px; background: #f9fafb; border-radius: 12px; border-left: 4px solid #10b981; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 700; color: #1f2937; margin-bottom: 5px;">üéâ Petrecere Spider-Man - #318</div>
                            <div style="font-size: 14px; color: #6b7280;">Client: Maria Popescu | Data: 15 Nov 2024 | Trainer: A1</div>
                        </div>
                        <button style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                            ‚úÖ BifeazƒÉ
                        </button>
                    </div>
                    
                    <div style="padding: 20px; background: #f9fafb; border-radius: 12px; border-left: 4px solid #f59e0b; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 700; color: #1f2937; margin-bottom: 5px;">üéâ Petrecere Iron Man - #319</div>
                            <div style="font-size: 14px; color: #6b7280;">Client: Ion Ionescu | Data: 16 Nov 2024 | Trainer: B2</div>
                        </div>
                        <button style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                            ‚úÖ BifeazƒÉ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vezi Statistici -->
        <div class="secret-content" id="vezi-statistici" style="display: none;">
            <div class="page-header">
                <h2>üìä Vezi Statistici</h2>
                <p>Statistici detaliate despre evenimente »ôi performan»õƒÉ</p>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0;">
                <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); padding: 25px; border-radius: 15px; color: white; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">üí∞ Venituri Totale</div>
                    <div style="font-size: 36px; font-weight: 900;">125,450</div>
                    <div style="font-size: 14px; opacity: 0.9; margin-top: 5px;">RON</div>
                </div>
                
                <div style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); padding: 25px; border-radius: 15px; color: white; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">üéâ Evenimente Luna Asta</div>
                    <div style="font-size: 36px; font-weight: 900;">47</div>
                    <div style="font-size: 14px; opacity: 0.9; margin-top: 5px;">petreceri</div>
                </div>
                
                <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); padding: 25px; border-radius: 15px; color: white; box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">üë• Clien»õi Noi</div>
                    <div style="font-size: 36px; font-weight: 900;">28</div>
                    <div style="font-size: 14px; opacity: 0.9; margin-top: 5px;">acest an</div>
                </div>
            </div>
        </div>

        <!-- Total Statistici -->
        <div class="secret-content" id="total-statistici" style="display: none;">
            <div class="page-header">
                <h2>üìà Total Statistici</h2>
                <p>Vizualizare completƒÉ a tuturor statisticilor din sistem</p>
            </div>
            
            <div style="background: white; border-radius: 20px; padding: 40px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-top: 20px;">
                <h4 style="color: #1f2937; font-size: 22px; margin-bottom: 25px;">üìä Statistici Complete 2024</h4>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div style="padding: 20px; background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); border-radius: 12px; text-align: center;">
                        <div style="font-size: 24px; font-weight: 900; color: #1f2937;">287</div>
                        <div style="font-size: 14px; color: #6b7280; margin-top: 5px;">Total Evenimente</div>
                    </div>
                    <div style="padding: 20px; background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); border-radius: 12px; text-align: center;">
                        <div style="font-size: 24px; font-weight: 900; color: #10b981;">‚Ç¨450,000</div>
                        <div style="font-size: 14px; color: #6b7280; margin-top: 5px;">Venituri Anuale</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- GenereazƒÉ Coduri Secret -->
        <div class="secret-content" id="genereaza-coduri-secret" style="display: none;">
            <div class="page-header">
                <h2>üîë GenereazƒÉ Coduri de Acces</h2>
                <p>CreeazƒÉ coduri unice pentru noi angaja»õi</p>
            </div>
            
            <!-- Generate Button -->
            <div style="text-align: center; margin: 30px 0;">
                <button onclick="generateLicenseCode()" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 20px 40px; border-radius: 15px; font-size: 18px; font-weight: 700; cursor: pointer; box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4); transition: all 0.3s; display: inline-flex; align-items: center; gap: 12px;">
                    <span style="font-size: 28px;">üîë</span>
                    <span>GenereazƒÉ Cod Nou</span>
                </button>
            </div>
            
            <!-- Generated Code Display -->
            <div id="generatedCodeDisplay" style="display: none; background: white; border-radius: 20px; padding: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 30px;">
                <h4 style="color: #1f2937; font-size: 20px; margin-bottom: 20px; text-align: center;">‚úÖ Cod Generat cu Succes!</h4>
                
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 15px; text-align: center; margin-bottom: 20px;">
                    <div style="color: rgba(255,255,255,0.9); font-size: 14px; margin-bottom: 10px;">CODUL DE ACCES:</div>
                    <div id="displayedCode" style="color: white; font-size: 32px; font-weight: 900; letter-spacing: 3px; font-family: monospace;">SP-XXXX-XXXX</div>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button onclick="copyCodeToClipboard()" style="flex: 1; background: #10b981; color: white; border: none; padding: 15px; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 16px; transition: all 0.3s;">
                        üìã CopiazƒÉ Cod
                    </button>
                    <button onclick="closeCodeDisplay()" style="flex: 1; background: #e5e7eb; color: #6b7280; border: none; padding: 15px; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 16px; transition: all 0.3s;">
                        ‚úï √énchide
                    </button>
                </div>
            </div>
            
            <!-- Loading Indicator -->
            <div id="codeGenerationLoading" style="display: none; text-align: center; padding: 30px;">
                <div style="display: inline-block; width: 50px; height: 50px; border: 5px solid #e5e7eb; border-top-color: #667eea; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                <p style="margin-top: 15px; color: #6b7280; font-weight: 600;">GenereazƒÉ cod...</p>
            </div>
            
            <!-- License Codes List -->
            <div style="background: white; border-radius: 20px; padding: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h4 style="color: #1f2937; font-size: 20px; font-weight: 700;">üìã Toate Codurile Generate</h4>
                    <button onclick="refreshCodesList()" style="background: #f3f4f6; color: #6b7280; border: none; padding: 10px 20px; border-radius: 10px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
                        üîÑ Refresh
                    </button>
                </div>
                
                <div id="codesListContainer" style="display: grid; gap: 12px; max-height: 500px; overflow-y: auto;">
                    <div style="text-align: center; padding: 40px; color: #9ca3af;">
                        <div style="font-size: 48px; margin-bottom: 15px;">üìù</div>
                        <p>ApasƒÉ butonul de mai sus pentru a genera primul cod</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Target Traineri (Secret) -->
        <div class="secret-content" id="target-traineri" style="display: none;">
            <div class="page-header">
                <h2 style="color: #000; font-size: 36px; font-weight: 900;">üí∞ TARGET TRAINERI</h2>
                <p style="color: #6b7280; font-size: 18px;">Sistem de monetizare Nivel 1 & Nivel 2</p>
            </div>

            <!-- Month Selector -->
            <div style="display: flex; gap: 15px; align-items: center; justify-content: center; margin-bottom: 40px; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                <button onclick="previousMonth()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 25px; border-radius: 10px; cursor: pointer; font-weight: 700; transition: all 0.3s;">
                    ‚óÄ Luna AnterioarƒÉ
            </button>
            <div id="currentMonthDisplay" style="font-size: 24px; font-weight: 900; color: #667eea; min-width: 250px; text-align: center;">
                Noiembrie 2025
            </div>
            <button onclick="nextMonth()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 25px; border-radius: 10px; cursor: pointer; font-weight: 700; transition: all 0.3s;">
                Luna UrmƒÉtoare ‚ñ∂
            </button>
        </div>

        <!-- Tab Navigation for Target Traineri -->
        <div style="display: flex; gap: 10px; margin-bottom: 30px; flex-wrap: wrap; justify-content: center;">
            <button class="target-tab active" onclick="switchTargetTab('dashboard-traineri')" style="padding: 15px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; border-radius: 12px; cursor: pointer; font-size: 16px; font-weight: 700; transition: all 0.3s; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                üìä Dashboard
            </button>
            <button class="target-tab" onclick="switchTargetTab('evenimente-traineri')" style="padding: 15px 30px; background: white; border: 2px solid #667eea; color: #667eea; border-radius: 12px; cursor: pointer; font-size: 16px; font-weight: 700; transition: all 0.3s;">
                üéâ AdaugƒÉ Eveniment
            </button>
            <button class="target-tab" onclick="switchTargetTab('info-traineri')" style="padding: 15px 30px; background: white; border: 2px solid #667eea; color: #667eea; border-radius: 12px; cursor: pointer; font-size: 16px; font-weight: 700; transition: all 0.3s;">
                üë• Info Traineri
            </button>
            <button class="target-tab" onclick="switchTargetTab('calcule-traineri')" style="padding: 15px 30px; background: white; border: 2px solid #667eea; color: #667eea; border-radius: 12px; cursor: pointer; font-size: 16px; font-weight: 700; transition: all 0.3s;">
                üßÆ Calcule Detaliate
            </button>
        </div>

        <!-- Dashboard Tab -->
        <div class="target-content active" id="dashboard-traineri" style="display: block;">
            <!-- Summary Cards -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; margin-bottom: 40px;">
                <div class="stat-card" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">üíµ Total V√¢nzƒÉri Luna</div>
                    <div id="totalSalesTrainers" class="stat-number" style="color: white;">0 lei</div>
                    <div style="font-size: 14px; opacity: 0.9;">100% din business</div>
                </div>
                
                <div class="stat-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">üéØ Nivel 1 (Competi»õie)</div>
                    <div id="level1TotalTrainers" class="stat-number" style="color: white;">0 lei</div>
                    <div style="font-size: 14px; opacity: 0.9;">1% din total v√¢nzƒÉri</div>
                </div>
                
                <div class="stat-card" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">‚è±Ô∏è Total Ore Lucrate</div>
                    <div id="totalHoursTrainers" class="stat-number" style="color: white;">0h</div>
                    <div style="font-size: 14px; opacity: 0.9;">To»õi trainerii</div>
                </div>
                
                <div class="stat-card" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">üëë Top Performer</div>
                    <div id="topPerformerTrainers" class="stat-number" style="color: white;">-</div>
                    <div style="font-size: 14px; opacity: 0.9;">SeteazƒÉ pragul</div>
                </div>
                
                <div class="stat-card" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">üìà Prag Actual</div>
                    <div id="currentThresholdTrainers" class="stat-number" style="color: white;">0h</div>
                    <div style="font-size: 14px; opacity: 0.9;">Setat de top performer</div>
                </div>
                
                <div class="stat-card" style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">üè¢ Bani RƒÉma»ôi FirmƒÉ</div>
                    <div id="companyMoneyTrainers" class="stat-number" style="color: white;">0 lei</div>
                    <div style="font-size: 14px; opacity: 0.9;">Din Nivel 2</div>
                </div>
            </div>
            
            <!-- Trainer Rankings Table -->
            <div class="card">
                <h3 style="font-size: 24px; color: #667eea; margin-bottom: 25px; font-weight: 800;">üèÜ Clasament Traineri</h3>
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                                <th style="padding: 15px; text-align: left; font-weight: 800;">Pozi»õie</th>
                                <th style="padding: 15px; text-align: left; font-weight: 800;">Trainer</th>
                                <th style="padding: 15px; text-align: left; font-weight: 800;">Ore Totale</th>
                                <th style="padding: 15px; text-align: left; font-weight: 800;">V√¢nzƒÉri EchipƒÉ</th>
                                <th style="padding: 15px; text-align: left; font-weight: 800;">Nivel 1</th>
                                <th style="padding: 15px; text-align: left; font-weight: 800;">Nivel 2</th>
                                <th style="padding: 15px; text-align: left; font-weight: 800;">Total C√¢»ôtigat</th>
                                <th style="padding: 15px; text-align: left; font-weight: 800;">Status</th>
                            </tr>
                        </thead>
                        <tbody id="trainerRankingsTable">
                            <tr>
                                <td colspan="8" style="text-align: center; padding: 40px; color: #6b7280;">
                                    <div style="font-size: 48px; margin-bottom: 15px;">üìä</div>
                                    <p>Nu existƒÉ date pentru luna selectatƒÉ</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Evenimente Tab -->
        <div class="target-content" id="evenimente-traineri" style="display: none;">
            <div class="card">
                <h3 style="font-size: 24px; color: #667eea; margin-bottom: 25px; font-weight: 800;">üéâ AdaugƒÉ Eveniment Nou</h3>
                
                <div style="display: grid; gap: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: #667eea; font-weight: 700;">Nume Client</label>
                        <input type="text" id="clientNameTrainers" placeholder="Ex: Maria Popescu" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <label style="display: block; margin-bottom: 8px; color: #667eea; font-weight: 700;">Valoare Eveniment (lei)</label>
                            <input type="number" id="eventValueTrainers" placeholder="Ex: 1500" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 8px; color: #667eea; font-weight: 700;">Data Eveniment</label>
                            <input type="date" id="eventDateTrainers" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                        </div>
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: #667eea; font-weight: 700;">Cine Vinde (V√¢nzƒÉtor)</label>
                        <select id="sellerTrainers" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                            <option value="">SelecteazƒÉ v√¢nzƒÉtorul...</option>
                        </select>
                    </div>
                    
                    <div style="border-top: 2px solid #e5e7eb; padding-top: 20px; margin-top: 10px;">
                        <h4 style="color: #667eea; margin-bottom: 15px; font-size: 18px; font-weight: 700;">Executan»õi (Cine LucreazƒÉ)</h4>
                        <div id="executorsContainerTrainers"></div>
                        <button onclick="addExecutorRowTrainers()" style="background: #f3f4f6; color: #667eea; border: 2px dashed #667eea; padding: 12px 25px; border-radius: 10px; cursor: pointer; font-weight: 700; margin-top: 15px; width: 100%;">
                            ‚ûï AdaugƒÉ Executant
                        </button>
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button onclick="saveEventTrainers()" style="flex: 1; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 15px 35px; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);">
                            üíæ SalveazƒÉ Eveniment
                        </button>
                        <button onclick="resetEventFormTrainers()" style="flex: 1; background: white; color: #667eea; border: 2px solid #667eea; padding: 15px 35px; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer;">
                            üîÑ ReseteazƒÉ
                        </button>
                    </div>
                    
                    <div id="eventMessageTrainers"></div>
                </div>
            </div>
            
            <!-- Lista Evenimente -->
            <div class="card" style="margin-top: 30px;">
                <h3 style="font-size: 24px; color: #667eea; margin-bottom: 25px; font-weight: 800;">üìã Evenimente Luna CurentƒÉ</h3>
                <div id="eventsListTrainers"></div>
            </div>
        </div>

        <!-- Info Traineri Tab -->
        <div class="target-content" id="info-traineri" style="display: none;">
            <div class="card">
                <h3 style="font-size: 24px; color: #667eea; margin-bottom: 25px; font-weight: 800;">üë• Structura Echipelor</h3>
                
                <div style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border: 2px solid #667eea; border-radius: 12px; padding: 25px; margin-bottom: 25px;">
                    <div style="font-size: 18px; font-weight: 700; color: #667eea; margin-bottom: 15px;">‚ÑπÔ∏è Sistem Automat</div>
                    <p style="color: #1f2937; line-height: 1.8;">Trainerii (Atrainer-Ztrainer) »ôi oamenii (A1-Z50) sunt deja √Æn sistem!</p>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div style="background: #f9fafb; border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px;">
                        <h4 style="color: #667eea; margin-bottom: 15px; font-weight: 700;">üìå TRAINERI</h4>
                        <p style="color: #6b7280; line-height: 1.8;">
                            Atrainer, Btrainer, Ctrainer...<br>
                            p√¢nƒÉ la Ztrainer<br>
                            <strong style="color: #1f2937;">Total: 26 traineri</strong>
                        </p>
                    </div>
                    
                    <div style="background: #f9fafb; border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px;">
                        <h4 style="color: #667eea; margin-bottom: 15px; font-weight: 700;">üë• OAMENI PER ECHIPƒÇ</h4>
                        <p style="color: #6b7280; line-height: 1.8;">
                            A1-A50, B1-B50, C1-C50...<br>
                            p√¢nƒÉ la Z1-Z50<br>
                            <strong style="color: #1f2937;">Total: 1,300 oameni</strong>
                        </p>
                    </div>
                </div>
                
                <h3 style="font-size: 24px; color: #667eea; margin: 40px 0 25px 0; font-weight: 800;">üìã Regulile MonetizƒÉrii</h3>
                
                <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 2px solid #f59e0b; border-radius: 12px; padding: 25px; margin-bottom: 20px;">
                    <h4 style="color: #d97706; margin-bottom: 15px; font-size: 18px; font-weight: 700;">üéØ NIVEL 1 (1% din total v√¢nzƒÉri)</h4>
                    <ul style="color: #78350f; line-height: 2; padding-left: 20px;">
                        <li>Bazat pe <strong>orele lucrate</strong> de oamenii din echipƒÉ</li>
                        <li>Prag minim: <strong>150h</strong> pe lunƒÉ</li>
                        <li>Formula: <strong>(Ore - 150) = Puncte</strong></li>
                        <li>Se √Æmparte √Æntre <strong>to»õi trainerii</strong> peste 150h</li>
                        <li>Top performer seteazƒÉ pragul pentru Nivel 2</li>
                    </ul>
                </div>
                
                <div style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border: 2px solid #667eea; border-radius: 12px; padding: 25px;">
                    <h4 style="color: #667eea; margin-bottom: 15px; font-size: 18px; font-weight: 700;">üí∞ NIVEL 2 (1% din v√¢nzƒÉri echipƒÉ)</h4>
                    <ul style="color: #1e3a8a; line-height: 2; padding-left: 20px;">
                        <li>Bazat pe <strong>cine vinde + cine executƒÉ</strong></li>
                        <li>V√¢nzarea se atribuie <strong>propor»õional cu orele echipei</strong></li>
                        <li>Formula: <strong>Ore / Prag Top Performer</strong></li>
                        <li>Diferen»õa ‚Üí <strong>rƒÉm√¢ne la firmƒÉ</strong></li>
                        <li>FƒÉrƒÉ prag minim, se porne»ôte de la 0h</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Calcule Detaliate Tab -->
        <div class="target-content" id="calcule-traineri" style="display: none;">
            <div class="card">
                <h3 style="font-size: 24px; color: #667eea; margin-bottom: 25px; font-weight: 800;">üßÆ Calcule Detaliate Luna CurentƒÉ</h3>
                
                <button onclick="recalculateMonthTrainers()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px 35px; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); margin-bottom: 30px;">
                    üîÑ RecalculeazƒÉ Luna
                </button>
                
                <div id="detailedCalculationsTrainers"></div>
            </div>
        </div>
    </div>
    <!-- END SECRET CONTENT: target-traineri -->

    <!-- Target Anima»õie (Secret) -->
    <div class="secret-content" id="target-animatie" style="display: none;">
        <div class="page-header">
            <h2 style="color: #000; font-size: 36px; font-weight: 900;">üé≠ TARGET ANIMA»öIE</h2>
            <p style="color: #6b7280; font-size: 18px;">Sistem de monetizare pentru roluri de anima»õie (2.5 lei/orƒÉ)</p>
        </div>

        <!-- Month Selector Animatie -->
        <div style="display: flex; gap: 15px; align-items: center; justify-content: center; margin-bottom: 40px; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
            <button onclick="previousMonthAnimatie()" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border: none; padding: 12px 25px; border-radius: 10px; cursor: pointer; font-weight: 700; transition: all 0.3s;">
                ‚óÄ Luna AnterioarƒÉ
            </button>
            <div id="currentMonthDisplayAnimatie" style="font-size: 24px; font-weight: 900; color: #f59e0b; min-width: 250px; text-align: center;">
                Noiembrie 2025
            </div>
            <button onclick="nextMonthAnimatie()" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border: none; padding: 12px 25px; border-radius: 10px; cursor: pointer; font-weight: 700; transition: all 0.3s;">
                Luna UrmƒÉtoare ‚ñ∂
            </button>
        </div>

        <!-- Tab Navigation for Target Animatie -->
        <div style="display: flex; gap: 10px; margin-bottom: 30px; flex-wrap: wrap; justify-content: center;">
            <button class="target-tab-animatie active" onclick="switchTargetTabAnimatie('dashboard-animatie')" style="padding: 15px 30px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border: none; color: white; border-radius: 12px; cursor: pointer; font-size: 16px; font-weight: 700; transition: all 0.3s; box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);">
                üìä Dashboard
            </button>
            <button class="target-tab-animatie" onclick="switchTargetTabAnimatie('evenimente-animatie')" style="padding: 15px 30px; background: white; border: 2px solid #f59e0b; color: #f59e0b; border-radius: 12px; cursor: pointer; font-size: 16px; font-weight: 700; transition: all 0.3s;">
                üéâ AdaugƒÉ Eveniment
            </button>
            <button class="target-tab-animatie" onclick="switchTargetTabAnimatie('info-animatie')" style="padding: 15px 30px; background: white; border: 2px solid #f59e0b; color: #f59e0b; border-radius: 12px; cursor: pointer; font-size: 16px; font-weight: 700; transition: all 0.3s;">
                üë• Info Anima»õie
            </button>
            <button class="target-tab-animatie" onclick="switchTargetTabAnimatie('calcule-animatie')" style="padding: 15px 30px; background: white; border: 2px solid #f59e0b; color: #f59e0b; border-radius: 12px; cursor: pointer; font-size: 16px; font-weight: 700; transition: all 0.3s;">
                üßÆ Calcule Detaliate
            </button>
        </div>

        <!-- Dashboard Tab Animatie -->
        <div class="target-content-animatie active" id="dashboard-animatie" style="display: block;">
            <!-- Summary Cards -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; margin-bottom: 40px;">
                <div class="stat-card" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">‚è±Ô∏è Total Ore V√¢ndute</div>
                    <div id="totalHoursAnimatie" class="stat-number" style="color: white;">0h</div>
                    <div style="font-size: 14px; opacity: 0.9;">Toate rolurile (minus Training)</div>
                </div>
                
                <div class="stat-card" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">üí∞ Pot Total</div>
                    <div id="potTotalAnimatie" class="stat-number" style="color: white;">0 lei</div>
                    <div style="font-size: 14px; opacity: 0.9;">2.5 lei √ó ore v√¢ndute</div>
                </div>
                
                <div class="stat-card" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">üëë Top Performer</div>
                    <div id="topPerformerAnimatie" class="stat-number" style="color: white;">-</div>
                    <div style="font-size: 14px; opacity: 0.9;">Cele mai multe ore anima»õie</div>
                </div>
                
                <div class="stat-card" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">üìà Ore Top Performer</div>
                    <div id="topHoursAnimatie" class="stat-number" style="color: white;">0h</div>
                    <div style="font-size: 14px; opacity: 0.9;">Ore anima»õie</div>
                </div>
                
                <div class="stat-card" style="background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">üë• Participan»õi Activi</div>
                    <div id="activeParticipantsAnimatie" class="stat-number" style="color: white;">0</div>
                    <div style="font-size: 14px; opacity: 0.9;">Peste 20h anima»õie</div>
                </div>
                
                <div class="stat-card" style="background: linear-gradient(135deg, #ec4899 0%, #db2777 100%); color: white;">
                    <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">üìä Total Puncte</div>
                    <div id="totalPointsAnimatie" class="stat-number" style="color: white;">0</div>
                    <div style="font-size: 14px; opacity: 0.9;">Suma (Ore - 20)</div>
                </div>
            </div>
            
            <!-- Clasament TO»öI oamenii -->
            <div class="card">
                <h3 style="font-size: 24px; color: #f59e0b; margin-bottom: 25px; font-weight: 800;">üèÜ Clasament Anima»õie (To»õi Participan»õii)</h3>
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white;">
                                <th style="padding: 15px; text-align: left; font-weight: 800;">Pozi»õie</th>
                                <th style="padding: 15px; text-align: left; font-weight: 800;">Cod</th>
                                <th style="padding: 15px; text-align: left; font-weight: 800;">Ore Anima»õie</th>
                                <th style="padding: 15px; text-align: left; font-weight: 800;">Puncte</th>
                                <th style="padding: 15px; text-align: left; font-weight: 800;">C√¢»ôtig</th>
                                <th style="padding: 15px; text-align: left; font-weight: 800;">Status</th>
                            </tr>
                        </thead>
                        <tbody id="animatieRankingsTable">
                            <tr>
                                <td colspan="6" style="text-align: center; padding: 40px; color: #6b7280;">
                                    <div style="font-size: 48px; margin-bottom: 15px;">üé≠</div>
                                    <p>Nu existƒÉ date pentru luna selectatƒÉ</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Evenimente Tab Animatie -->
        <div class="target-content-animatie" id="evenimente-animatie" style="display: none;">
            <div class="card">
                <h3 style="font-size: 24px; color: #f59e0b; margin-bottom: 25px; font-weight: 800;">üéâ AdaugƒÉ Eveniment Anima»õie</h3>
                
                <div style="display: grid; gap: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: #f59e0b; font-weight: 700;">Nume Client</label>
                        <input type="text" id="clientNameAnimatie" placeholder="Ex: Maria Popescu" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <label style="display: block; margin-bottom: 8px; color: #f59e0b; font-weight: 700;">Valoare Eveniment (lei)</label>
                            <input type="number" id="eventValueAnimatie" placeholder="Ex: 1500" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 8px; color: #f59e0b; font-weight: 700;">Data Eveniment</label>
                            <input type="date" id="eventDateAnimatie" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                        </div>
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: #f59e0b; font-weight: 700;">Cine NoteazƒÉ (O singurƒÉ persoanƒÉ)</label>
                        <select id="sellerAnimatie" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                            <option value="">SelecteazƒÉ...</option>
                        </select>
                    </div>
                    
                    <div style="border-top: 2px solid #e5e7eb; padding-top: 20px; margin-top: 10px;">
                        <h4 style="color: #f59e0b; margin-bottom: 15px; font-size: 18px; font-weight: 700;">Executan»õi (Cine LucreazƒÉ - Mai multe persoane)</h4>
                        <div id="executorsContainerAnimatie"></div>
                        <button onclick="addExecutorRowAnimatie()" style="background: #fef3c7; color: #f59e0b; border: 2px dashed #f59e0b; padding: 12px 25px; border-radius: 10px; cursor: pointer; font-weight: 700; margin-top: 15px; width: 100%;">
                            ‚ûï AdaugƒÉ Executant
                        </button>
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button onclick="saveEventAnimatie()" style="flex: 1; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 15px 35px; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);">
                            üíæ SalveazƒÉ Eveniment
                        </button>
                        <button onclick="resetEventFormAnimatie()" style="flex: 1; background: white; color: #f59e0b; border: 2px solid #f59e0b; padding: 15px 35px; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer;">
                            üîÑ ReseteazƒÉ
                        </button>
                    </div>
                    
                    <div id="eventMessageAnimatie"></div>
                </div>
            </div>
            
            <!-- Lista Evenimente -->
            <div class="card" style="margin-top: 30px;">
                <h3 style="font-size: 24px; color: #f59e0b; margin-bottom: 25px; font-weight: 800;">üìã Evenimente Luna CurentƒÉ</h3>
                <div id="eventsListAnimatie"></div>
            </div>
        </div>

        <!-- Info Animatie Tab -->
        <div class="target-content-animatie" id="info-animatie" style="display: none;">
            <div class="card">
                <h3 style="font-size: 24px; color: #f59e0b; margin-bottom: 25px; font-weight: 800;">üé≠ Info Target Anima»õie</h3>
                
                <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 2px solid #f59e0b; border-radius: 12px; padding: 25px; margin-bottom: 25px;">
                    <div style="font-size: 18px; font-weight: 700; color: #d97706; margin-bottom: 15px;">üìå Sistem Simplificat</div>
                    <p style="color: #78350f; line-height: 1.8; margin-bottom: 10px;">Target Anima»õie func»õioneazƒÉ diferit fa»õƒÉ de Target Traineri:</p>
                    <ul style="color: #78350f; line-height: 2; padding-left: 20px;">
                        <li><strong>Pot fix:</strong> 2.5 lei √ó Total ore v√¢ndute</li>
                        <li><strong>Doar Nivel 1</strong> (NU existƒÉ Nivel 2)</li>
                        <li><strong>Prag minim:</strong> 21h (peste 20h pentru a participa)</li>
                        <li><strong>To»õi primesc bani:</strong> Traineri + Oameni (A1-Z50)</li>
                    </ul>
                </div>
                
                <h3 style="font-size: 24px; color: #f59e0b; margin: 40px 0 25px 0; font-weight: 800;">üé≠ Roluri Anima»õie</h3>
                
                <div style="background: #f9fafb; border: 2px solid #e5e7eb; border-radius: 12px; padding: 25px; margin-bottom: 20px;">
                    <h4 style="color: #f59e0b; margin-bottom: 15px; font-weight: 700;">‚úÖ Roluri care participƒÉ:</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; color: #1f2937; line-height: 1.8;">
                        <div>‚Ä¢ Anima»õie</div>
                        <div>‚Ä¢ Ur»ôitoare</div>
                        <div>‚Ä¢ Arcade pe suport</div>
                        <div>‚Ä¢ Arcade fƒÉrƒÉ suport</div>
                        <div>‚Ä¢ Arcade pe suport cu cifre</div>
                        <div>‚Ä¢ Arcade fƒÉrƒÉ suport cu cifre</div>
                        <div>‚Ä¢ Ghea»õƒÉ carbonicƒÉ</div>
                        <div>‚Ä¢ VatƒÉ</div>
                        <div>‚Ä¢ Popcorn</div>
                        <div>‚Ä¢ VatƒÉ »ôi Popcorn</div>
                        <div>‚Ä¢ Mo»ô CrƒÉciun</div>
                        <div>‚Ä¢ Heliu</div>
                        <div>‚Ä¢ Piniata personalizatƒÉ</div>
                    </div>
                </div>
                
                <div style="background: #fee2e2; border: 2px solid #ef4444; border-radius: 12px; padding: 25px;">
                    <h4 style="color: #dc2626; margin-bottom: 15px; font-weight: 700;">‚ùå Rol care NU participƒÉ:</h4>
                    <div style="color: #991b1b; font-weight: 600;">‚Ä¢ Training</div>
                </div>
                
                <h3 style="font-size: 24px; color: #f59e0b; margin: 40px 0 25px 0; font-weight: 800;">üßÆ Formula de Calcul</h3>
                
                <div style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border: 2px solid #3b82f6; border-radius: 12px; padding: 25px;">
                    <div style="font-size: 16px; color: #1e3a8a; line-height: 2;">
                        <strong>1. Pot Total:</strong> 2.5 lei √ó Total ore v√¢ndute<br>
                        <strong>2. Puncte persoanƒÉ:</strong> (Ore anima»õie - 20)<br>
                        <strong>3. Valoare punct:</strong> Pot / Suma tuturor punctelor<br>
                        <strong>4. C√¢»ôtig:</strong> Puncte √ó Valoare punct
                    </div>
                </div>
            </div>
        </div>

        <!-- Calcule Detaliate Tab Animatie -->
        <div class="target-content-animatie" id="calcule-animatie" style="display: none;">
            <div class="card">
                <h3 style="font-size: 24px; color: #f59e0b; margin-bottom: 25px; font-weight: 800;">üßÆ Calcule Detaliate Luna CurentƒÉ</h3>
                
                <button onclick="recalculateMonthAnimatie()" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border: none; padding: 15px 35px; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3); margin-bottom: 30px;">
                    üîÑ RecalculeazƒÉ Luna
                </button>
                
                <div id="detailedCalculationsAnimatie"></div>
            </div>
        </div>
    </div>
    <!-- END SECRET CONTENT: target-animatie -->

    <!-- Target V√¢nzƒÉri (Secret) - PLACEHOLDER -->
    <div class="secret-content" id="target-vanzari" style="display: none;">
        <div class="page-header">
            <h2 style="color: #000; font-size: 36px; font-weight: 900;">üíµ TARGET V√ÇNZƒÇRI</h2>
            <p style="color: #6b7280; font-size: 18px;">Sistem de monetizare bazat pe v√¢nzƒÉri</p>
        </div>

        <div style="background: white; border-radius: 20px; padding: 60px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); text-align: center; margin-top: 40px;">
            <div style="font-size: 80px; margin-bottom: 30px;">üíµ</div>
            <h3 style="color: #1f2937; font-size: 32px; margin-bottom: 20px; font-weight: 800;">Target V√¢nzƒÉri</h3>
            <p style="color: #6b7280; font-size: 18px; line-height: 1.8; max-width: 600px; margin: 0 auto;">
                Sistemul de monetizare pentru v√¢nzƒÉri va fi configurat √Æn continuare.<br>
                Spune-mi cum vrei sƒÉ func»õioneze acest target »ôi √Æl implementez!
            </p>
            <div style="margin-top: 40px; padding: 30px; background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); border-radius: 15px; max-width: 500px; margin-left: auto; margin-right: auto;">
                <div style="color: #667eea; font-weight: 700; margin-bottom: 15px; font-size: 18px;">üìã Ce trebuie configurat:</div>
                <ul style="color: #6b7280; text-align: left; line-height: 2;">
                    <li>Formula de calcul a potului</li>
                    <li>Prag minim de participare</li>
                    <li>Nivele (1 sau 2?)</li>
                    <li>Cine participƒÉ (traineri/to»õi)</li>
                    <li>Ce se ia √Æn calcul</li>
                </ul>
            </div>
        </div>
    </div>
    <!-- END SECRET CONTENT: target-vanzari -->

    </div>
    <!-- END pagina-secreta -->
    
    <!-- ADMIN PAGES -->
    
    <!-- Page: BifeazƒÉ Evenimente -->
    <div class="page" id="bifeaza-evenimente">
        <div class="page-header" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; padding: 30px; border-radius: 15px; margin-bottom: 30px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h2 style="margin: 0 0 10px 0;">‚úÖ BifeazƒÉ Evenimente</h2>
                    <p style="opacity: 0.9; margin: 0;">MarcheazƒÉ evenimentele ca finalizate</p>
                </div>
                <button onclick="logoutAdmin()" style="background: rgba(255, 255, 255, 0.2); color: white; border: 2px solid white; padding: 12px 24px; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 15px; transition: all 0.3s; display: flex; align-items: center; gap: 10px;" onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'">
                    <span style="font-size: 20px;">üö™</span>
                    <span>Ie»ôire Admin</span>
                </button>
            </div>
        </div>
        
        <div style="background: #fee2e2; border-left: 4px solid #ef4444; padding: 20px; border-radius: 10px; margin-bottom: 25px;">
            <div style="font-weight: 700; color: #991b1b; margin-bottom: 5px;">üîê MOD ADMIN ACTIV</div>
            <div style="color: #7f1d1d; font-size: 14px;">Pagina pentru bifarea evenimentelor este √Æn construc»õie</div>
        </div>
        
        <div style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 2px 15px rgba(0,0,0,0.08); text-align: center;">
            <div style="font-size: 64px; margin-bottom: 20px;">üöß</div>
            <h3 style="color: #1f2937; margin-bottom: 15px;">Func»õionalitate √Æn Dezvoltare</h3>
            <p style="color: #6b7280; font-size: 16px; max-width: 500px; margin: 0 auto;">
                Pagina pentru bifarea »ôi gestionarea evenimentelor va fi adƒÉugatƒÉ √Æn cur√¢nd.
            </p>
        </div>
    </div>

    </div>
    <!-- End Main Content -->

    <!-- Floating AI Chat Button -->
    <button class="ai-chat-button" onclick="openAIChat()">
        <div class="ai-chat-pulse"></div>
        <span class="ai-chat-icon">ü§ñ</span>
        <span>√éntreabƒÉ Super AI</span>
    </button>

    <script>
        // ============================================
        // SUPABASE CONFIGURATION
        // ============================================
        const SUPABASE_URL = 'https://bkhzilcjxuncyxpyhtbb.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJraHppbGNqeHVuY3l4cHlodGJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5ODE5ODAsImV4cCI6MjA3ODU1Nzk4MH0._nYGKr3QqjCBhRDJ8zXrcEpG5pUA980ZZIivjC1VXS8';
        
        let supabase;
        
        // Initialize Supabase Client
        document.addEventListener('DOMContentLoaded', () => {
            try {
                supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                console.log('‚úÖ Supabase connected successfully!');
                console.log('üìä Database ready for: team_members, evenimente, colaboratori');
            } catch (error) {
                console.error('‚ùå Supabase initialization error:', error);
            }
        });
        
        // ============================================
        // HELPER FUNCTIONS
        // ============================================
        
        // Generate trainer codes (A1-A50, B1-B50, ..., Z1-Z50)
        function generateTrainerCodes() {
            const codes = [];
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            
            for (let i = 0; i < letters.length; i++) {
                const letter = letters[i];
                for (let num = 1; num <= 50; num++) {
                    codes.push(letter + num);
                }
            }
            
            return codes;
        }
        
        // Create datalist with all trainer codes
        function createTrainerCodesDatalist() {
            // Remove existing datalist if any
            const existingDatalist = document.getElementById('trainerCodes');
            if (existingDatalist) {
                existingDatalist.remove();
            }
            
            // Create new datalist
            const datalist = document.createElement('datalist');
            datalist.id = 'trainerCodes';
            
            const codes = generateTrainerCodes();
            codes.forEach(code => {
                const option = document.createElement('option');
                option.value = code;
                datalist.appendChild(option);
            });
            
            document.body.appendChild(datalist);
        }
        
        // Generate event number on page load - START FROM 1 and INCREMENT
        document.addEventListener('DOMContentLoaded', function() {
            // Create trainer codes datalist
            createTrainerCodesDatalist();
            // Get last event number from localStorage, or start from 1
            let lastEventNumber = localStorage.getItem('lastEventNumber');
            let eventNumber;
            
            if (lastEventNumber) {
                eventNumber = parseInt(lastEventNumber) + 1;
            } else {
                eventNumber = 1; // Start from 1
            }
            
            // Save and display
            localStorage.setItem('lastEventNumber', eventNumber);
            const eventNumberEl = document.getElementById('numarEveniment');
            if (eventNumberEl) {
                eventNumberEl.textContent = eventNumber;
            }
            
            // Add date format validation for BOTH date inputs
            const dateInputs = document.querySelectorAll('input[type="text"][pattern*="\\\\d{2}"]');
            dateInputs.forEach(dateInput => {
                dateInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, ''); // Remove non-digits
                    
                    if (value.length >= 2) {
                        value = value.substring(0, 2) + '/' + value.substring(2);
                    }
                    if (value.length >= 5) {
                        value = value.substring(0, 5) + '/' + value.substring(5);
                    }
                    if (value.length > 10) {
                        value = value.substring(0, 10);
                    }
                    
                    e.target.value = value;
                });
                
                // Validate date format on blur
                dateInput.addEventListener('blur', function(e) {
                    const datePattern = /^(\d{2})\/(\d{2})\/(\d{4})$/;
                    const match = e.target.value.match(datePattern);
                    
                    if (match && e.target.value) {
                        const day = parseInt(match[1]);
                        const month = parseInt(match[2]);
                        const year = parseInt(match[3]);
                        
                        if (day < 1 || day > 31 || month < 1 || month > 12 || year < 2024) {
                            alert('Data invalidƒÉ! Folose»ôte formatul: zi/lunƒÉ/an (ex: 15/11/2025)');
                            e.target.value = '';
                        }
                    }
                });
            });
        });
        
        // Handle form submit
        
        // ============================================
        // üé≠ LIVE PARSING TITLU + DURATE DINAMICE (cu filtrare EXTRA-uri)
        // ============================================
        
        // Lista keywords pentru EXTRA-uri (NU sunt roluri)
        const extraKeywords = [
            "piniata", "pinata", "pi√±ata",
            "vata", "vatƒÉ",
            "popcorn",
            "arcada",
            "decoratiuni", "decora»õiuni",
            "cifre",
            "heliu",
            "bener", "banner",
            "tort",
            "baloane de sapun",
            "masina de baloane"
        ];
        
        let currentParsedRoles = []; // Store globally (doar roluri, fƒÉrƒÉ extra-uri)
        let currentExtras = []; // Store extras separately
        
        function isExtra(element) {
            const lowerElement = element.toLowerCase();
            return extraKeywords.some(keyword => lowerElement.includes(keyword));
        }
        
        function parseTitluLive() {
            const input = document.getElementById('titluInput').value.trim();
            const container = document.getElementById('durateRolesContainer');
            
            if (!input) {
                container.style.display = 'none';
                container.innerHTML = '';
                currentParsedRoles = [];
                currentExtras = [];
                return;
            }
            
            // Parse with multiple separators: +, si, »ôi
            let elements = [];
            
            // Try separators in order
            if (input.includes('+')) {
                elements = input.split('+').map(r => r.trim()).filter(r => r.length > 0);
            } else if (input.toLowerCase().includes(' si ')) {
                elements = input.toLowerCase().split(' si ').map(r => r.trim()).filter(r => r.length > 0);
            } else if (input.includes(' »ôi ')) {
                elements = input.split(' »ôi ').map(r => r.trim()).filter(r => r.length > 0);
            } else {
                // No separator found - single element
                elements = [input];
            }
            
            // FILTER: Separate ROLES from EXTRAS
            const roles = [];
            const extras = [];
            
            elements.forEach(element => {
                if (isExtra(element)) {
                    extras.push(element);
                } else {
                    roles.push(element);
                }
            });
            
            currentParsedRoles = roles;
            currentExtras = extras;
            
            // Generate duration fields ONLY for ROLES (not extras)
            if (roles.length > 0) {
                container.style.display = 'block';
                
                const extrasInfo = extras.length > 0 
                    ? `<div style="font-size: 13px; color: #9ca3af; margin-bottom: 8px;">
                         üì¶ Extra-uri detectate: ${extras.join(', ')}
                       </div>`
                    : '';
                
                container.innerHTML = `
                    <div style="background: #f0fdf4; border: 2px solid #86efac; border-radius: 12px; padding: 15px; margin-bottom: 15px;">
                        <div style="font-size: 14px; font-weight: 700; color: #16a34a; margin-bottom: 8px;">
                            ü§ñ AI a detectat ${roles.length} ${roles.length === 1 ? 'rol' : 'roluri'}:
                        </div>
                        ${extrasInfo}
                        ${roles.map((role, index) => `
                            <div style="margin-bottom: 15px;">
                                <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 600;">
                                    ‚è±Ô∏è Durata pentru <span style="color: #7c3aed; font-weight: 700;">${role}</span>:
                                </label>
                                <input 
                                    type="number" 
                                    name="durata_${index}" 
                                    id="durata_${index}"
                                    step="0.5" 
                                    min="0.5" 
                                    max="8" 
                                    style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" 
                                    placeholder="Ex: 1.5 ore"
                                    required>
                                <p style="margin-top: 5px; font-size: 11px; color: #9ca3af; font-style: italic;">
                                    üí° Exemple: 1 = o orƒÉ | 1.5 = o orƒÉ »ôi jumƒÉtate | 2 = douƒÉ ore
                                </p>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else {
                container.style.display = 'block';
                container.innerHTML = `
                    <div style="background: #fef3c7; border: 2px solid #fcd34d; border-radius: 12px; padding: 15px; margin-bottom: 15px;">
                        <div style="font-size: 14px; font-weight: 700; color: #d97706;">
                            ‚ö†Ô∏è Nu am detectat niciun ROL, doar extra-uri: ${extras.join(', ')}
                        </div>
                        <p style="font-size: 12px; color: #9ca3af; margin-top: 8px;">
                            AdaugƒÉ cel pu»õin un personaj/rol (ex: Spider-Man)
                        </p>
                    </div>
                `;
            }
            
            console.log('üé≠ Roluri detectate:', roles);
            console.log('üì¶ Extra-uri detectate:', extras);
        }
        
        // ============================================
        // END LIVE PARSING
        // ============================================
        
        // ============================================
        // ü§ñ AI LEARNING SYSTEM
        // ============================================
        
        // Initialize knowledge base
        function initKnowledgeBase() {
            if (!localStorage.getItem('aiKnowledgeBase')) {
                const initialKB = {
                    patterns: [],
                    errors: [],
                    stats: {
                        totalLearned: 0,
                        totalErrors: 0,
                        totalResolved: 0,
                        accuracy: 100
                    }
                };
                localStorage.setItem('aiKnowledgeBase', JSON.stringify(initialKB));
            }
        }
        
        // Parse personaje with AI
        function parsePersonajeWithAI(input, expectedCount) {
            // Check knowledge base first
            const learned = checkKnowledgeBase(input);
            if (learned) {
                console.log('üß† Found in knowledge base!');
                updatePatternUsage(learned.id);
                return {
                    success: true,
                    roles: learned.roles,
                    source: 'knowledge_base'
                };
            }
            
            // Try to parse with separator +
            const separator = '+';
            if (input.includes(separator)) {
                const roles = input.split(separator)
                    .map(r => r.trim())
                    .filter(r => r.length > 0);
                
                if (roles.length === expectedCount) {
                    console.log('‚úÖ Parsed successfully with +');
                    return {
                        success: true,
                        roles: roles,
                        source: 'auto_parse'
                    };
                } else {
                    console.log(`‚ö†Ô∏è Mismatch: found ${roles.length}, expected ${expectedCount}`);
                    return {
                        success: false,
                        found: roles.length,
                        expected: expectedCount,
                        roles: roles
                    };
                }
            }
            
            // No separator found - create empty roles
            console.log('‚ö†Ô∏è No separator found, creating empty roles');
            return {
                success: false,
                found: 1,
                expected: expectedCount,
                roles: []
            };
        }
        
        // Check knowledge base
        function checkKnowledgeBase(input) {
            const kb = JSON.parse(localStorage.getItem('aiKnowledgeBase') || '{}');
            if (!kb.patterns) return null;
            
            return kb.patterns.find(p => p.input.toLowerCase() === input.toLowerCase());
        }
        
        // Save pattern to knowledge base
        function savePatternToKnowledgeBase(input, roles, count) {
            const kb = JSON.parse(localStorage.getItem('aiKnowledgeBase'));
            
            // Check if pattern already exists
            const existingIndex = kb.patterns.findIndex(p => p.input.toLowerCase() === input.toLowerCase());
            
            if (existingIndex >= 0) {
                // Update existing
                kb.patterns[existingIndex].usedCount++;
                kb.patterns[existingIndex].lastUsed = new Date().toISOString();
            } else {
                // Add new pattern
                const newPattern = {
                    id: Date.now(),
                    input: input,
                    roles: roles,
                    count: count,
                    usedCount: 1,
                    learnedFrom: 'auto',
                    timestamp: new Date().toISOString(),
                    lastUsed: new Date().toISOString(),
                    confidence: 100
                };
                kb.patterns.push(newPattern);
                kb.stats.totalLearned++;
            }
            
            // Update accuracy
            const totalProcessed = kb.stats.totalLearned + kb.stats.totalErrors;
            kb.stats.accuracy = totalProcessed > 0 
                ? Math.round((kb.stats.totalLearned / totalProcessed) * 100) 
                : 100;
            
            localStorage.setItem('aiKnowledgeBase', JSON.stringify(kb));
            console.log('üíæ Pattern saved to knowledge base');
        }
        
        // Update pattern usage
        function updatePatternUsage(patternId) {
            const kb = JSON.parse(localStorage.getItem('aiKnowledgeBase'));
            const pattern = kb.patterns.find(p => p.id === patternId);
            
            if (pattern) {
                pattern.usedCount++;
                pattern.lastUsed = new Date().toISOString();
                localStorage.setItem('aiKnowledgeBase', JSON.stringify(kb));
            }
        }
        
        // Log parse error
        function logParseError(input, expected, parseResult) {
            const kb = JSON.parse(localStorage.getItem('aiKnowledgeBase'));
            
            const error = {
                id: Date.now(),
                input: input,
                expectedCount: expected,
                foundCount: parseResult.found || 1,
                timestamp: new Date().toISOString(),
                resolved: false,
                learnedPattern: null
            };
            
            kb.errors.push(error);
            kb.stats.totalErrors++;
            
            // Update accuracy
            const totalProcessed = kb.stats.totalLearned + kb.stats.totalErrors;
            kb.stats.accuracy = Math.round((kb.stats.totalLearned / totalProcessed) * 100);
            
            localStorage.setItem('aiKnowledgeBase', JSON.stringify(kb));
            console.log('üìù Error logged for admin review');
        }
        
        // Learn from manual edit (called when user edits "Ce personaj vrei sa fi")
        function learnFromManualEdit(eventId, roles) {
            const parties = JSON.parse(localStorage.getItem('superpartyEvents') || '[]');
            const mamaEvent = parties.find(p => p.duplicateOf === eventId || p.id === eventId);
            
            if (!mamaEvent) return;
            
            const kb = JSON.parse(localStorage.getItem('aiKnowledgeBase'));
            
            // Find related error
            const errorIndex = kb.errors.findIndex(e => 
                !e.resolved && 
                e.input.toLowerCase() === mamaEvent.personaj?.toLowerCase()
            );
            
            if (errorIndex >= 0) {
                // Mark error as resolved
                kb.errors[errorIndex].resolved = true;
                kb.errors[errorIndex].resolvedAt = new Date().toISOString();
                kb.errors[errorIndex].learnedPattern = {
                    input: mamaEvent.personaj,
                    roles: roles
                };
                kb.stats.totalResolved++;
                
                // Save new pattern
                const newPattern = {
                    id: Date.now(),
                    input: mamaEvent.personaj,
                    roles: roles,
                    count: roles.length,
                    usedCount: 1,
                    learnedFrom: 'manual_correction',
                    timestamp: new Date().toISOString(),
                    lastUsed: new Date().toISOString(),
                    confidence: 100,
                    originalError: true
                };
                kb.patterns.push(newPattern);
                kb.stats.totalLearned++;
                
                // Update accuracy
                const totalProcessed = kb.stats.totalLearned + kb.stats.totalErrors;
                kb.stats.accuracy = Math.round((kb.stats.totalLearned / totalProcessed) * 100);
                
                localStorage.setItem('aiKnowledgeBase', JSON.stringify(kb));
                
                console.log('üéì AI learned from manual correction!');
                console.log('Pattern:', mamaEvent.personaj, '‚Üí', roles);
            }
        }
        
        // Initialize KB on load
        initKnowledgeBase();
        
        // ============================================
        // END AI LEARNING SYSTEM
        // ============================================
        
        function handleFormSubmit(event) {
            event.preventDefault();
            
            // Get form data
            const formData = new FormData(event.target);
            const data = {};
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            // Get event code
            const eventCode = document.getElementById('numarEveniment').textContent;
            data.codEveniment = eventCode;
            
            // Add timestamp and ID
            data.id = Date.now();
            data.createdAt = new Date().toISOString();
            
            // Add status (default: pending)
            data.status = 'pending';
            
            // Process datetime-local field (dataOraPetrecere)
            if (data.dataOraPetrecere) {
                // dataOraPetrecere format: "2025-12-15T14:00"
                const datetime = new Date(data.dataOraPetrecere);
                
                // Format: "15 decembrie 2025" (ZI LUNA AN)
                data.dataPetrecere = datetime.toLocaleDateString('ro-RO', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                }); // Format: "15 decembrie 2025"
                
                data.oraPetrecere = datetime.toLocaleTimeString('ro-RO', {
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: false
                }); // Format: "14:00" (24h)
                
                // For filtering (YYYY-MM-DD)
                data.dateForFilter = data.dataOraPetrecere.split('T')[0]; // "2025-12-15"
            }
            
            // Convert durata to display format (already in hours from input)
            if (data.durata) {
                const hours = parseFloat(data.durata);
                if (hours === 1) {
                    data.durataDisplay = "1 orƒÉ";
                } else if (hours < 1) {
                    data.durataDisplay = `${hours * 60} minute`;
                } else if (Number.isInteger(hours)) {
                    data.durataDisplay = `${hours} ore`;
                } else {
                    // 1.5 ore = 1 orƒÉ »ôi 30 minute
                    const wholeHours = Math.floor(hours);
                    const minutes = Math.round((hours - wholeHours) * 60);
                    data.durataDisplay = `${wholeHours} ${wholeHours === 1 ? 'orƒÉ' : 'ore'} »ôi ${minutes} minute`;
                }
            }
            
            // Use AI-parsed duration info if available
            if (window.currentEventDurataInfo) {
                data.durataDisplay = window.currentEventDurataInfo.durataDisplay;
                data.durataRoluri = window.currentEventDurataInfo.roleGroups; // Use roleGroups
                data.durataType = window.currentEventDurataInfo.type;
                console.log('‚úÖ Using AI-parsed duration:', data.durataDisplay);
                console.log('‚úÖ Role groups:', data.durataRoluri);
            }
            
            // Use AI-parsed price breakdown if available
            if (window.currentEventPriceBreakdown) {
                data.preturiBreakdown = window.currentEventPriceBreakdown;
                console.log('‚úÖ Price breakdown:', data.preturiBreakdown);
            }
            
            // Mark as MAMA (original event)
            data.isMama = true;
            data.duplicateOf = null;
            
            // USE PARSED ROLES from live parsing (already filtered, without extras)
            const titluInput = data.titlu || '';
            const roles = currentParsedRoles; // Already parsed LIVE, without extras
            const extras = currentExtras; // Store extras separately
            const numarRoluri = roles.length;
            
            console.log('ü§ñ Processing eveniment...');
            console.log('Titlu:', titluInput);
            console.log('Roluri detectate:', roles);
            console.log('Extra-uri detectate:', extras);
            console.log('NumƒÉr roluri:', numarRoluri);
            
            // Store for mama - use roleGroups if available
            data.parsedRoles = roles;
            data.extras = extras;
            data.parseSuccess = roles.length > 0;
            
            // Get existing parties from localStorage
            let parties = JSON.parse(localStorage.getItem('superpartyEvents') || '[]');
            
            // Add MAMA event
            parties.push(data);
            
            // USE AI-PARSED roleGroups if available, otherwise use parsed roles
            let duplicatesToCreate = [];
            
            if (data.durataRoluri && data.durataRoluri.length > 0) {
                // Use AI-parsed role groups
                console.log('ü§ñ Using AI-parsed role groups:', data.durataRoluri);
                duplicatesToCreate = data.durataRoluri.map(group => ({
                    roles: group.roles || [group.rol], // Handle both old and new format
                    ore: group.ore,
                    minute: group.minute,
                    isGroup: group.roles ? group.roles.length > 1 : false
                }));
            } else {
                // Fallback: use parsed roles (1 duplicate per role)
                console.log('üìã Using parsed roles (fallback):', roles);
                duplicatesToCreate = roles.map((rol, i) => {
                    const durataIndividuala = formData.get(`durata_${i}`);
                    const hours = parseFloat(durataIndividuala || data.durata || 1);
                    return {
                        roles: [rol],
                        ore: hours,
                        minute: hours * 60,
                        isGroup: false
                    };
                });
            }
            
            console.log('üéØ Creating duplicates for:', duplicatesToCreate);
            
            // CREATE DUPLICATES based on roleGroups
            const duplicates = [];
            for (let i = 0; i < duplicatesToCreate.length; i++) {
                const group = duplicatesToCreate[i];
                const duplicate = { ...data };
                
                // Modify duplicate
                duplicate.id = Date.now() + i + 1; // Unique ID
                duplicate.isMama = false;
                duplicate.duplicateOf = data.id; // Reference to mama
                duplicate.duplicateIndex = i + 1;
                duplicate.codEveniment = `${eventCode}-${i + 1}`;
                
                // Auto-fill "Ce personaj vrei sa fi" with role(s)
                if (group.roles && group.roles.length > 0) {
                    duplicate.cePersonajVreisaFi = group.isGroup 
                        ? group.roles.join(' »ôi ') // Grouped: "VatƒÉ »ôi Popcorn"
                        : group.roles[0]; // Single: "Ana"
                    duplicate.autoFilled = true;
                } else {
                    duplicate.cePersonajVreisaFi = ''; // Empty - will be filled manually
                    duplicate.autoFilled = false;
                }
                
                // Set duration for this duplicate
                duplicate.durata = group.minute || group.ore * 60;
                duplicate.durataDisplay = `${group.ore} ${group.ore === 1 ? 'orƒÉ' : 'ore'}`;
                
                // Set prices for this duplicate
                // total = TOTAL GENERAL (afi»ôat la to»õi)
                // totalRol = TOTAL SPECIFIC pentru acest rol (doar pentru admin)
                duplicate.total = data.total || 0; // Keep general total for all users
                
                if (data.preturiBreakdown && group.roles && group.roles.length > 0) {
                    // For single role
                    if (!group.isGroup && group.roles.length === 1) {
                        const priceItem = data.preturiBreakdown.find(p => p.rol === group.roles[0]);
                        if (priceItem) {
                            duplicate.totalRol = priceItem.pret; // Specific price for this role (admin only)
                            console.log(`   üí∞ Total general: ${duplicate.total} RON, Total rol: ${duplicate.totalRol} RON`);
                        }
                    }
                    // For grouped roles - sum their prices
                    else if (group.isGroup && group.roles.length > 1) {
                        let totalPrice = 0;
                        group.roles.forEach(rol => {
                            const priceItem = data.preturiBreakdown.find(p => p.rol === rol);
                            if (priceItem) {
                                totalPrice += priceItem.pret;
                            }
                        });
                        if (totalPrice > 0) {
                            duplicate.totalRol = totalPrice; // Specific price for grouped roles (admin only)
                            console.log(`   üí∞ Total general: ${duplicate.total} RON, Total rol (grouped): ${duplicate.totalRol} RON`);
                        }
                    }
                }
                
                // Fallback: If no breakdown, totalRol = total
                if (!duplicate.totalRol) {
                    duplicate.totalRol = duplicate.total;
                }
                
                console.log(`‚úÖ Duplicate ${i+1}: "${duplicate.cePersonajVreisaFi}" = ${duplicate.durataDisplay}, Total: ${duplicate.total} RON (general), ${duplicate.totalRol} RON (rol)`);
                
                duplicates.push(duplicate);
                parties.push(duplicate);
            }
            
            // Save to localStorage
            localStorage.setItem('superpartyEvents', JSON.stringify(parties));
            
            console.log('üìù Eveniment salvat:', data);
            console.log('üìä Duplicate create:', duplicates.length);
            console.log('üìä Total evenimente:', parties.length);
            
            // Show success message
            const extrasMsg = extras.length > 0 ? `\nüì¶ Extra-uri: ${extras.join(', ')}` : '';
            const successMsg = `‚úÖ Eveniment salvat cu succes!\n\nCod eveniment: ${eventCode}\nüéØ ${numarRoluri} ${numarRoluri === 1 ? 'rol' : 'roluri'}\n‚ú® Roluri: ${roles.join(', ')}${extrasMsg}\n\nVezi evenimentele √Æn "Ce Petreceri Am"`;
            
            alert(successMsg);
            
            // Reset form
            event.target.reset();
            
            // Reset parsed data
            currentParsedRoles = [];
            currentExtras = [];
            window.currentEventDurataInfo = null; // Reset duration info
            window.currentEventPriceBreakdown = null; // Reset price breakdown
            document.getElementById('durateRolesContainer').style.display = 'none';
            document.getElementById('durateRolesContainer').innerHTML = '';
            
            // Generate NEXT sequential event number
            let lastEventNumber = localStorage.getItem('lastEventNumber');
            let newEventNumber = parseInt(lastEventNumber) + 1;
            localStorage.setItem('lastEventNumber', newEventNumber);
            document.getElementById('numarEveniment').textContent = newEventNumber;
            
            // Update parties data for filtering
            loadPartiesFromStorage();
        }
        
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Remove active from all menu items
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Add active to clicked menu item
            event.currentTarget.classList.add('active');
            
            // Load data for specific pages
            if (pageId === 'cu-factura') {
                loadEvenimenteCuFactura();
            }
            
            // Close sidebar on mobile
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('open');
            }
        }
        
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }
        
        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768) {
                const sidebar = document.getElementById('sidebar');
                const toggle = document.querySelector('.mobile-menu-toggle');
                
                if (!sidebar.contains(event.target) && !toggle.contains(event.target)) {
                    sidebar.classList.remove('open');
                }
            }
        });
        
        // Open AI Chat function
        // AI Chat Functions
        let chatHistory = [];
        
        // AI Chat Server Configuration
        const AI_SERVER_URL = 'https://superparty-backend.vercel.app';
        
        
        function openAIChat() {
            document.getElementById('aiChatModal').style.display = 'flex';
            // Focus pe input
            setTimeout(() => {
                document.getElementById('chatInput').focus();
            }, 100);
        }
        
        function closeAIChat() {
            document.getElementById('aiChatModal').style.display = 'none';
        }
        
        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Clear input
            input.value = '';
            
            // Add user message to chat
            addMessageToChat(message, 'user');
            
            // Show loading indicator
            const loadingId = addLoadingMessage();
            
            // Disable send button
            const sendButton = document.getElementById('sendButton');
            sendButton.disabled = true;
            sendButton.textContent = '‚è≥ A»ôteaptƒÉ...';
            
            try {
                // Call Secure Server (NOT OpenAI directly!)
                const response = await fetch(`${AI_SERVER_URL}/api/chat`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: message,
                        history: chatHistory.slice(-6)
                    })
                });
                
                if (!response.ok) {
                    throw new Error('Server error: ' + response.status);
                }
                
                const data = await response.json();
                
                // Remove loading
                removeLoadingMessage(loadingId);
                
                // Add AI response from server
                if (data.success) {
                    const aiMessage = data.response;
                    addMessageToChat(aiMessage, 'assistant');
                    
                    // Update history
                    chatHistory.push({ role: 'user', content: message });
                    chatHistory.push({ role: 'assistant', content: aiMessage });
                } else {
                    throw new Error(data.error || 'Unknown error');
                }
                
                // Keep only last 10 messages (5 pairs) to avoid token limits
                if (chatHistory.length > 10) {
                    chatHistory = chatHistory.slice(-10);
                }
                
            } catch (error) {
                console.error('AI Chat Error:', error);
                removeLoadingMessage(loadingId);
                
                // Add error message
                addMessageToChat(
                    '‚ùå Oops! Am √Ænt√¢mpinat o problemƒÉ. Te rog √ÆncearcƒÉ din nou sau verificƒÉ conexiunea la internet.\n\nüí° DacƒÉ problema persistƒÉ, verificƒÉ cƒÉ API key-ul ChatGPT este configurat corect.',
                    'assistant',
                    true
                );
            } finally {
                // Re-enable send button
                sendButton.disabled = false;
                sendButton.textContent = 'üì§ Trimite';
                input.focus();
            }
        }
        
        function addMessageToChat(message, role, isError = false) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.style.cssText = 'display: flex; gap: 10px; margin-bottom: 15px; animation: fadeIn 0.3s ease;';
            
            if (role === 'user') {
                // User message (right aligned)
                messageDiv.style.justifyContent = 'flex-end';
                messageDiv.innerHTML = `
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 16px; border-radius: 12px; max-width: 80%; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);">
                        <p style="margin: 0; line-height: 1.5; white-space: pre-wrap;">${escapeHtml(message)}</p>
                    </div>
                    <div style="width: 40px; height: 40px; border-radius: 50%; background: #667eea; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                        <span style="font-size: 20px;">üë§</span>
                    </div>
                `;
            } else {
                // AI message (left aligned)
                const bgColor = isError ? '#fee2e2' : 'white';
                const textColor = isError ? '#dc2626' : '#111827';
                
                messageDiv.innerHTML = `
                    <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                        <span style="font-size: 20px;">ü§ñ</span>
                    </div>
                    <div style="background: ${bgColor}; padding: 12px 16px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); max-width: 80%;">
                        <p style="margin: 0; color: ${textColor}; line-height: 1.5; white-space: pre-wrap;">${escapeHtml(message)}</p>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function addLoadingMessage() {
            const chatMessages = document.getElementById('chatMessages');
            const loadingDiv = document.createElement('div');
            const loadingId = 'loading-' + Date.now();
            loadingDiv.id = loadingId;
            loadingDiv.style.cssText = 'display: flex; gap: 10px; margin-bottom: 15px;';
            loadingDiv.innerHTML = `
                <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                    <span style="font-size: 20px;">ü§ñ</span>
                </div>
                <div style="background: white; padding: 12px 16px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <div style="display: flex; gap: 4px; align-items: center;">
                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #667eea; animation: bounce 1s infinite;"></div>
                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #667eea; animation: bounce 1s infinite 0.2s;"></div>
                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #667eea; animation: bounce 1s infinite 0.4s;"></div>
                    </div>
                </div>
            `;
            chatMessages.appendChild(loadingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            return loadingId;
        }
        
        function removeLoadingMessage(loadingId) {
            const loadingDiv = document.getElementById(loadingId);
            if (loadingDiv) {
                loadingDiv.remove();
            }
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('aiChatModal');
            if (event.target === modal) {
                closeAIChat();
            }
        });
        
        // Colaboratori Management Functions
        let colaboratoriData = [];
        
        function openColaboratoriModal() {
            document.getElementById('colaboratoriModal').style.display = 'flex';
            renderColaboratori();
        }
        
        function closeColaboratoriModal() {
            document.getElementById('colaboratoriModal').style.display = 'none';
        }
        
        function addColaborator() {
            const nume = document.getElementById('colaboratorNume').value;
            const telefon = document.getElementById('colaboratorTelefon').value;
            const cod = document.getElementById('colaboratorCod').value;
            const tip = document.getElementById('colaboratorTip').value;
            const tipPret = document.getElementById('colaboratorTipPret').value;
            const pret = document.getElementById('colaboratorPret').value;
            const pretTransport = document.getElementById('colaboratorPretTransport').value || 0;
            
            if (!nume || !tip || !pret) {
                alert('‚ö†Ô∏è Te rog completeazƒÉ toate c√¢mpurile obligatorii!');
                return;
            }
            
            const colaborator = {
                id: Date.now(),
                nume: nume,
                telefon: telefon,
                cod: cod,
                tip: tip,
                tipPret: tipPret,
                pret: parseFloat(pret),
                pretTransport: parseFloat(pretTransport)
            };
            
            colaboratoriData.push(colaborator);
            renderColaboratori();
            
            // Clear form
            document.getElementById('colaboratorNume').value = '';
            document.getElementById('colaboratorTelefon').value = '';
            document.getElementById('colaboratorCod').value = '';
            document.getElementById('colaboratorTip').value = '';
            document.getElementById('colaboratorPret').value = '';
            document.getElementById('colaboratorPretTransport').value = '';
            
            alert('‚úÖ Colaborator adƒÉugat!');
        }
        
        function deleteColaborator(id) {
            if (confirm('Sigur vrei sƒÉ »ôtergi acest colaborator?')) {
                colaboratoriData = colaboratoriData.filter(c => c.id !== id);
                renderColaboratori();
                alert('‚úÖ Colaborator »ôters!');
            }
        }
        
        function renderColaboratori() {
            const container = document.getElementById('colaboratoriItems');
            
            if (colaboratoriData.length === 0) {
                container.innerHTML = '<p style="color: #9ca3af; text-align: center; padding: 20px;">Niciun colaborator adƒÉugat √ÆncƒÉ</p>';
                return;
            }
            
            const tipColors = {
                'Loc de joacƒÉ': 'background: #dcfce7; color: #16a34a;'
            };
            
            let html = '';
            let totalCost = 0;
            let totalTransport = 0;
            
            colaboratoriData.forEach(col => {
                const colorStyle = tipColors[col.tip] || 'background: #f3f4f6; color: #6b7280;';
                const costTotal = col.pret + (col.pretTransport || 0);
                totalCost += col.pret;
                totalTransport += (col.pretTransport || 0);
                
                html += `
                    <div style="background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 15px; display: flex; justify-content: space-between; align-items: center;">
                        <div style="flex: 1;">
                            <div style="font-weight: 600; color: #111827; margin-bottom: 5px;">${col.nume}</div>
                            ${col.telefon ? `<div style="color: #6b7280; font-size: 13px; margin-bottom: 5px;">üìû ${col.telefon}</div>` : ''}
                            ${col.cod ? `<div style="color: #6b7280; font-size: 13px; margin-bottom: 5px;">üè∑Ô∏è Cod: ${col.cod}</div>` : ''}
                            <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap;">
                                <span style="${colorStyle} padding: 4px 10px; border-radius: 6px; font-size: 13px; font-weight: 600;">${col.tip}</span>
                                <span style="background: #f3f4f6; color: #667eea; padding: 4px 10px; border-radius: 6px; font-size: 13px; font-weight: 600;">${col.pret} RON / ${col.tipPret === 'ora' ? 'OrƒÉ' : 'Eveniment'}</span>
                                ${col.pretTransport > 0 ? `<span style="background: #fef3c7; color: #d97706; padding: 4px 10px; border-radius: 6px; font-size: 13px; font-weight: 600;">üöó Transport: ${col.pretTransport} RON</span>` : ''}
                            </div>
                        </div>
                        <button onclick="deleteColaborator(${col.id})" style="background: #fee2e2; color: #dc2626; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: 600;">
                            üóëÔ∏è »òterge
                        </button>
                    </div>
                `;
            });
            
            const grandTotal = totalCost + totalTransport;
            
            html += `
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px; padding: 15px; margin-top: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; opacity: 0.9; font-size: 14px;">
                        <span>Cost Servicii:</span>
                        <span style="font-weight: 600;">${totalCost} RON</span>
                    </div>
                    ${totalTransport > 0 ? `
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; opacity: 0.9; font-size: 14px;">
                        <span>Cost Transport:</span>
                        <span style="font-weight: 600;">${totalTransport} RON</span>
                    </div>
                    ` : ''}
                    <div style="border-top: 2px solid rgba(255,255,255,0.3); padding-top: 10px; margin-top: 10px;">
                        <div style="text-align: center;">
                            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">Cost Total</div>
                            <div style="font-size: 28px; font-weight: 800;">${grandTotal} RON</div>
                        </div>
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
        }
        
        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('colaboratoriModal');
            if (event.target === modal) {
                closeColaboratoriModal();
            }
        });
        
        // AI Photo Processing Function
        async function processPhotoWithAI(input) {
            const file = input.files[0];
            if (!file) return;
            
            // Show preview
            const preview = document.getElementById('photoPreview');
            const previewImage = document.getElementById('previewImage');
            preview.style.display = 'block';
            
            // Display image
            const reader = new FileReader();
            reader.onload = async function(e) {
                previewImage.src = e.target.result;
                
                // Convert to base64
                const base64Image = e.target.result.split(',')[1];
                
                // Call Claude AI API
                try {
                    const response = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            model: 'claude-sonnet-4-20250514',
                            max_tokens: 2000,
                            messages: [{
                                role: 'user',
                                content: [
                                    {
                                        type: 'image',
                                        source: {
                                            type: 'base64',
                                            media_type: file.type,
                                            data: base64Image
                                        }
                                    },
                                    {
                                        type: 'text',
                                        text: `AnalizeazƒÉ aceastƒÉ imagine »ôi extrage TOATE informa»õiile pentru un formular de eveniment petrecere copii. RƒÉspunde DOAR cu un obiect JSON valid, fƒÉrƒÉ text suplimentar. C√¢mpurile sunt:

{
  "dataFormular": "zi/luna/an (ex: 09/11/2025)",
  "nume": "nume client",
  "prenume": "prenume client", 
  "telefon": "telefon cu +40",
  "sursa": "de unde a venit (Facebook/Instagram/Recomandare/Site/TikTok/Alte)",
  "titlu": "titlu/personaj petrecere (ex: Chase + Skye, Elsa, Vata + Popcorn, Spider-Man + Iron Man)",
  "personaj": "personaj petrecere (ex: Chase + Skye, Elsa, Vata + Popcorn)",
  "dataPetrecere": "zi/luna/an",
  "oraPetrecere": "HH:MM (24h)",
  "durata": "numar minute (ex: 180)",
  "durataText": "text exact cum scrie durata (ex: 'Pentru cate ore: 2h', 'Vata 2 ore Popcorn 1 ora', 'Chase 2h Skye 3h')",
  "varsta": "numar ani",
  "numarCopii": "numar",
  "adresa": "adresa completa",
  "detaliiAdresa": "detalii extra",
  "sofer": "DA/NU",
  "avans": "suma RON",
  "rest": "suma RON", 
  "total": "suma RON totalƒÉ",
  "preturiDetaliate": "text exact cu pre»õuri per serviciu/rol dacƒÉ sunt specificate (ex: 'Ana 600 RON, Elsa 600 RON, Vata si Popcorn 300 RON' sau '2 ore Ana 600, 2 ore Elsa 600')",
  "observatii": "text liber"
}

IMPORTANT: 
- RƒÉspunde DOAR cu JSON-ul, fƒÉrƒÉ explica»õii sau text suplimentar. 
- Pentru "titlu" »ôi "personaj" extrage numele personajelor/caracterelor din petrecere (de obicei sunt la fel).
- Pentru "durataText" extrage exact textul complet cum scrie la durata/pentru cate ore, inclusiv dacƒÉ sunt mai multe roluri cu durate diferite.
- Pentru "preturiDetaliate" cautƒÉ √Æn toatƒÉ poza dacƒÉ sunt men»õionate pre»õuri separate pentru fiecare serviciu/personaj/rol »ôi extrage textul exact.
- DacƒÉ un c√¢mp nu e vizibil, pune null.`
                                    }
                                ]
                            }]
                        })
                    });
                    
                    const data = await response.json();
                    let jsonText = data.content[0].text;
                    
                    // Clean JSON response
                    jsonText = jsonText.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();
                    
                    const extractedData = JSON.parse(jsonText);
                    
                    // Fill form fields
                    fillFormFromAI(extractedData);
                    
                    // Hide preview after 2 seconds
                    setTimeout(() => {
                        preview.style.display = 'none';
                        alert('‚úÖ Formular completat automat cu date din pozƒÉ!');
                    }, 2000);
                    
                } catch (error) {
                    console.error('AI Processing Error:', error);
                    alert('‚ùå Eroare la procesarea imaginii. √éncearcƒÉ din nou sau completeazƒÉ manual.');
                    preview.style.display = 'none';
                }
            };
            
            reader.readAsDataURL(file);
        }
        
        function fillFormFromAI(data) {
            // Helper function to safely set value
            const setValue = (name, value) => {
                if (value && value !== null && value !== 'null') {
                    const element = document.querySelector(`[name="${name}"]`);
                    if (element) {
                        element.value = value;
                        // Trigger change event for any listeners
                        element.dispatchEvent(new Event('change', { bubbles: true }));
                    }
                }
            };
            
            // Process duration text and create durataDisplay
            if (data.durataText) {
                const durataInfo = parseDurationText(data.durataText, data.titlu || data.personaj);
                // Store the parsed duration info for later use
                window.currentEventDurataInfo = durataInfo;
                console.log('üìä Parsed duration info:', durataInfo);
            }
            
            // Process prices text and create price breakdown
            if (data.preturiDetaliate || data.total) {
                const priceBreakdown = parsePricesText(data.preturiDetaliate, data.titlu || data.personaj, data.total);
                // Store the parsed price breakdown for later use
                window.currentEventPriceBreakdown = priceBreakdown;
                console.log('üí∞ Parsed price breakdown:', priceBreakdown);
            }
            
            // Combine dataPetrecere + oraPetrecere into dataOraPetrecere (datetime-local format)
            if (data.dataPetrecere && data.oraPetrecere) {
                try {
                    // Parse date: "15/12/2025" or "15 decembrie 2025"
                    let dateStr = data.dataPetrecere;
                    let year, month, day;
                    
                    // Try format: dd/mm/yyyy
                    if (dateStr.includes('/')) {
                        const parts = dateStr.split('/');
                        day = parts[0].padStart(2, '0');
                        month = parts[1].padStart(2, '0');
                        year = parts[2];
                    } 
                    // Try format: dd month yyyy (ro format)
                    else if (dateStr.match(/\d+\s+\w+\s+\d+/)) {
                        const monthNames = {
                            'ianuarie': '01', 'februarie': '02', 'martie': '03', 'aprilie': '04',
                            'mai': '05', 'iunie': '06', 'iulie': '07', 'august': '08',
                            'septembrie': '09', 'octombrie': '10', 'noiembrie': '11', 'decembrie': '12'
                        };
                        const parts = dateStr.split(' ');
                        day = parts[0].padStart(2, '0');
                        month = monthNames[parts[1].toLowerCase()] || '01';
                        year = parts[2];
                    }
                    
                    // Parse time: "14:00" or "14:30"
                    let timeStr = data.oraPetrecere;
                    if (!timeStr.includes(':')) {
                        timeStr = timeStr + ':00';
                    }
                    
                    // Format: YYYY-MM-DDTHH:MM
                    const datetimeLocal = `${year}-${month}-${day}T${timeStr}`;
                    setValue('dataOraPetrecere', datetimeLocal);
                    
                    console.log('‚úÖ Combined datetime:', datetimeLocal);
                } catch (error) {
                    console.error('Error combining date/time:', error);
                    // Fallback to individual fields
                    setValue('dataPetrecere', data.dataPetrecere);
                    setValue('oraPetrecere', data.oraPetrecere);
                }
            }
            
            // Fill all fields
            setValue('dataFormular', data.dataFormular);
            setValue('nume', data.nume);
            setValue('prenume', data.prenume);
            setValue('telefon', data.telefon);
            setValue('sursa', data.sursa);
            setValue('titlu', data.titlu || data.personaj); // Use titlu or fallback to personaj
            setValue('personaj', data.personaj);
            setValue('durata', data.durata);
            setValue('varsta', data.varsta);
            setValue('numarCopii', data.numarCopii);
            setValue('adresa', data.adresa);
            setValue('detaliiAdresa', data.detaliiAdresa);
            setValue('sofer', data.sofer);
            setValue('avans', data.avans);
            setValue('rest', data.rest);
            setValue('total', data.total);
            setValue('observatii', data.observatii);
            
            // Trigger live parsing for titlu if it was filled
            if (data.titlu || data.personaj) {
                if (typeof parseTitluLive === 'function') {
                    parseTitluLive();
                }
            }
            
            console.log('‚úÖ Form filled with AI data:', data);
        }
        
        // Parse duration text to create proper structure
        function parseDurationText(durataText, titlu) {
            if (!titlu) return null;
            
            // Search for durations in BOTH titlu and durataText
            const textToSearch = (titlu + ' ' + (durataText || '')).toLowerCase();
            const titluLower = titlu.toLowerCase();
            const roles = [];
            
            // Extract all role names from titlu field
            // Split by: +, »ôi, si, ,
            const allRolesInTitlu = titlu.split(/[+,]|»ôi|si/).map(r => r.trim()).filter(r => r.length > 0);
            
            console.log('üìã Toate rolurile din titlu:', allRolesInTitlu);
            console.log('üîç Text de cƒÉutat durate:', textToSearch);
            
            // Pattern: Look for "RoleName ore/h" or "RoleName si AltRol ore/h" in TITLU
            // Examples: "Ana »ôi Elsa 2 ore", "Vata 1 ora", "Chase 2h"
            const roleGroupWithDurationPattern = /([\w\sƒÉ√¢√Æ»õ»ô]+?)\s+(\d+)\s*(h|ore|ora|hour|hours)/gi;
            const matches = [...titluLower.matchAll(roleGroupWithDurationPattern)];
            
            console.log('üîç Durate detectate √Æn titlu:', matches.map(m => `"${m[1].trim()}" = ${m[2]}${m[3]}`));
            
            // If we found specific durations in titlu
            if (matches.length > 0) {
                const rolesWithDuration = new Set();
                const roleGroups = [];
                
                // Process roles that HAVE explicit durations in titlu
                matches.forEach(match => {
                    const textBeforeDuration = match[1].trim();
                    const hours = parseInt(match[2]);
                    
                    console.log(`\nüéØ Processing: "${textBeforeDuration}" = ${hours} ore`);
                    
                    // This text might be: "Ana »ôi Elsa" or just "Ana"
                    // Split to find individual roles
                    const rolesInThisGroup = textBeforeDuration.split(/»ôi|si/).map(r => r.trim()).filter(r => r.length > 0);
                    
                    console.log(`   Roluri √Æn grup: ${rolesInThisGroup.join(', ')}`);
                    
                    // Match each detected role with roles from titlu
                    const matchedRoles = [];
                    rolesInThisGroup.forEach(detectedRole => {
                        const normalized = detectedRole.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                        
                        const matchingRole = allRolesInTitlu.find(r => {
                            const rNorm = r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                            return rNorm.includes(normalized) || normalized.includes(rNorm);
                        });
                        
                        if (matchingRole && !rolesWithDuration.has(matchingRole)) {
                            matchedRoles.push(matchingRole);
                            rolesWithDuration.add(matchingRole);
                        }
                    });
                    
                    if (matchedRoles.length > 0) {
                        // Each matched role gets its own duplicate with this duration
                        matchedRoles.forEach(role => {
                            roleGroups.push({
                                roles: [role],
                                ore: hours,
                                minute: hours * 60,
                                isGroup: false
                            });
                            console.log(`   ‚úÖ ${role} ‚Üí ${hours} ore (individual)`);
                        });
                    }
                });
                
                // Now, find roles WITHOUT explicit durations - group them together
                const rolesWithoutDuration = allRolesInTitlu.filter(r => !rolesWithDuration.has(r));
                
                console.log(`\nüë• Roluri fƒÉrƒÉ duratƒÉ explicitƒÉ: ${rolesWithoutDuration.join(', ')}`);
                
                if (rolesWithoutDuration.length > 0) {
                    // These roles are grouped together (same person does all)
                    // Try to find a generic duration
                    const genericDurationPattern = /(\d+)\s*(h|ore|ora|hour|hours)/i;
                    const genericMatch = (durataText || textToSearch).match(genericDurationPattern);
                    
                    let groupHours = 2; // default for grouped roles
                    if (genericMatch) {
                        groupHours = parseInt(genericMatch[1]);
                    } else if (rolesWithoutDuration.length === 2) {
                        // "VatƒÉ »ôi Popcorn" without duration = assume 1h each = 2h total
                        groupHours = 2;
                    }
                    
                    roleGroups.push({
                        roles: rolesWithoutDuration,
                        ore: groupHours,
                        minute: groupHours * 60,
                        isGroup: true
                    });
                    
                    console.log(`   ‚úÖ Grup: ${rolesWithoutDuration.join(' »ôi ')} ‚Üí ${groupHours} ore (grupat)`);
                }
                
                // Create durataDisplay
                let durataDisplay;
                if (roleGroups.length === 1 && roleGroups[0].isGroup) {
                    // All roles grouped: "Chase + Skye pentru 2 ore"
                    durataDisplay = `${roleGroups[0].roles.join(' + ')} pentru ${roleGroups[0].ore} ${roleGroups[0].ore === 1 ? 'orƒÉ' : 'ore'}`;
                } else {
                    // Mixed or all separate: "2 ore Ana + 2 ore Elsa + VatƒÉ »ôi Popcorn"
                    durataDisplay = roleGroups.map(group => {
                        if (group.isGroup) {
                            return group.roles.join(' »ôi ');
                        } else {
                            return `${group.ore} ${group.ore === 1 ? 'orƒÉ' : 'ore'} ${group.roles[0]}`;
                        }
                    }).join(' + ');
                }
                
                console.log(`\nüìä Final: ${roleGroups.length} duplicate-uri`);
                console.log(`üìù Display: ${durataDisplay}`);
                
                return {
                    type: roleGroups.length > 1 || roleGroups[0].isGroup ? 'multiple' : 'single',
                    roleGroups: roleGroups,
                    durataDisplay: durataDisplay
                };
            }
            
            // Fallback: Single duration for ALL roles "Pentru cate ore: 2h" or "Durata: 2 ore"
            const singleDurationPattern = /(\d+)\s*(h|ore|ora|hour|hours)/i;
            const singleMatch = textToSearch.match(singleDurationPattern);
            
            if (singleMatch) {
                const hours = parseInt(singleMatch[1]);
                
                // All roles get same duration, each as separate duplicate
                const roleGroups = allRolesInTitlu.map(rol => ({
                    roles: [rol],
                    ore: hours,
                    minute: hours * 60,
                    isGroup: false
                }));
                
                const durataDisplay = `${allRolesInTitlu.join(' + ')} pentru ${hours} ${hours === 1 ? 'orƒÉ' : 'ore'}`;
                
                console.log(`\nüìä Fallback: To»õi ${allRolesInTitlu.length} cu ${hours} ore fiecare`);
                
                return {
                    type: 'single',
                    roleGroups: roleGroups,
                    durataDisplay: durataDisplay,
                    ore: hours
                };
            }
            
            return null;
        }
        
        // Parse prices text to extract price breakdown per role/service
        function parsePricesText(preturiDetaliate, titlu, totalGeneral) {
            if (!titlu) return null;
            
            const priceBreakdown = [];
            let foundPrices = false;
            
            // Extract all role names from titlu
            const allRolesInTitlu = titlu.split(/[+,]|»ôi|si/).map(r => r.trim()).filter(r => r.length > 0);
            
            console.log('üí∞ Parsare pre»õuri pentru roluri:', allRolesInTitlu);
            
            if (preturiDetaliate) {
                const text = preturiDetaliate.toLowerCase();
                console.log('üí∞ Text pre»õuri:', preturiDetaliate);
                
                // Pattern: "Ana 600 RON" or "Ana 600" or "2 ore Ana 600"
                const pricePattern = /([\w\sƒÉ√¢√Æ»õ»ô]+?)\s*(\d+)\s*(?:ron|lei)?/gi;
                const matches = [...text.matchAll(pricePattern)];
                
                console.log('üí∞ Matches gƒÉsite:', matches.length);
                
                if (matches.length > 0) {
                    const rolesWithPrice = new Set();
                    
                    matches.forEach(match => {
                        const textBeforePrice = match[1].trim();
                        const price = parseInt(match[2]);
                        
                        // Remove duration text if present (e.g., "2 ore Ana" -> "Ana")
                        const cleanText = textBeforePrice.replace(/\d+\s*(ore|ora|h|hour|hours)/gi, '').trim();
                        
                        console.log(`   Checking: "${cleanText}" = ${price} RON`);
                        
                        // This might be: "Ana »ôi Elsa" or just "Ana"
                        const rolesInText = cleanText.split(/»ôi|si/).map(r => r.trim()).filter(r => r.length > 0);
                        
                        rolesInText.forEach(detectedRole => {
                            const normalized = detectedRole.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                            
                            const matchingRole = allRolesInTitlu.find(r => {
                                const rNorm = r.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                                return rNorm.includes(normalized) || normalized.includes(rNorm);
                            });
                            
                            if (matchingRole && !rolesWithPrice.has(matchingRole)) {
                                priceBreakdown.push({
                                    rol: matchingRole,
                                    pret: price
                                });
                                rolesWithPrice.add(matchingRole);
                                foundPrices = true;
                                console.log(`   ‚úÖ ${matchingRole} = ${price} RON`);
                            }
                        });
                    });
                    
                    // Roles without explicit prices - distribute remaining amount equally
                    const rolesWithoutPrice = allRolesInTitlu.filter(r => !rolesWithPrice.has(r));
                    
                    if (rolesWithoutPrice.length > 0 && totalGeneral) {
                        const totalAssigned = priceBreakdown.reduce((sum, item) => sum + item.pret, 0);
                        const remaining = parseInt(totalGeneral) - totalAssigned;
                        
                        if (remaining > 0) {
                            const pricePerRole = Math.round(remaining / rolesWithoutPrice.length);
                            
                            rolesWithoutPrice.forEach(rol => {
                                priceBreakdown.push({
                                    rol: rol,
                                    pret: pricePerRole
                                });
                                console.log(`   üí° ${rol} = ${pricePerRole} RON (calculat)`);
                            });
                        }
                    }
                }
            }
            
            // Fallback: No prices found, distribute total equally
            if (!foundPrices && totalGeneral && allRolesInTitlu.length > 0) {
                const pricePerRole = Math.round(parseInt(totalGeneral) / allRolesInTitlu.length);
                
                allRolesInTitlu.forEach(rol => {
                    priceBreakdown.push({
                        rol: rol,
                        pret: pricePerRole
                    });
                });
                
                console.log(`üí° Fallback: √émpƒÉr»õit ${totalGeneral} la ${allRolesInTitlu.length} roluri = ${pricePerRole} RON/rol`);
            }
            
            return priceBreakdown.length > 0 ? priceBreakdown : null;
        }
        
        // Team Management Functions
        function addTeamMember() {
            document.getElementById('addMemberModal').style.display = 'flex';
        }
        
        function closeAddMemberModal() {
            document.getElementById('addMemberModal').style.display = 'none';
            document.getElementById('addMemberForm').reset();
        }
        
        async function submitNewMember(event) {
            event.preventDefault();
            
            const nume = document.getElementById('newMemberName').value;
            const cod = document.getElementById('newMemberCode').value;
            const telefon = document.getElementById('newMemberPhone').value;
            const email = document.getElementById('newMemberEmail').value;
            const rol = document.getElementById('newMemberRole').value || 'Membru';
            
            // Validate code format
            const codePattern = /^[A-Z]\d{1,2}$/;
            if (!codePattern.test(cod)) {
                alert('‚ùå Cod invalid! Folose»ôte format: A1-Z50 (literƒÉ mare + numƒÉr 1-50)');
                return;
            }
            
            // Validate number range
            const letter = cod.charAt(0);
            const number = parseInt(cod.substring(1));
            if (number < 1 || number > 50) {
                alert('‚ùå NumƒÉrul trebuie sƒÉ fie √Æntre 1 »ôi 50!');
                return;
            }
            
            const colors = [
                'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',
                'linear-gradient(135deg, #ec4899 0%, #be185d 100%)',
                'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                'linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)'
            ];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            
            try {
                // Save to Supabase
                const { data, error } = await supabase
                    .from('team_members')
                    .insert([{
                        nume: nume,
                        cod_trainer: cod,
                        telefon: telefon,
                        email: email,
                        rol: rol,
                        status: 'invited',
                        avatar_color: randomColor
                    }])
                    .select();
                
                if (error) {
                    console.error('Supabase error:', error);
                    alert('‚ùå Eroare la salvare: ' + error.message);
                    return;
                }
                
                console.log('‚úÖ Membru salvat √Æn Supabase:', data);
                
                // Add to table UI
                addMemberToTable(data[0], randomColor);
                
                // Close modal and reset form
                closeAddMemberModal();
                
                // Show success message
                alert(`‚úÖ Membru adƒÉugat cu succes!\n\nüìß Invita»õie va fi trimisƒÉ la: ${email}\n\nMembrul este acum √Æn baza de date!`);
                
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Eroare: ' + error.message);
            }
        }
        
        function addMemberToTable(memberData, avatarColor) {
            const tableBody = document.getElementById('teamTableBody');
            const initial = memberData.nume.charAt(0).toUpperCase();
            
            const rolColors = {
                'animator': 'background: #dcfce7; color: #16a34a;',
                'sofer': 'background: #dbeafe; color: #2563eb;',
                'asistent': 'background: #fef3c7; color: #d97706;',
                'fotograf': 'background: #fce7f3; color: #db2777;',
                'manager': 'background: #f3e8ff; color: #7c3aed;',
                'default': 'background: #f3f4f6; color: #6b7280;'
            };
            
            const rolLower = memberData.rol ? memberData.rol.toLowerCase() : '';
            let rolStyle = rolColors.default;
            if (rolLower.includes('animator')) rolStyle = rolColors.animator;
            else if (rolLower.includes('sofer') || rolLower.includes('»ôofer')) rolStyle = rolColors.sofer;
            else if (rolLower.includes('asistent')) rolStyle = rolColors.asistent;
            else if (rolLower.includes('fotograf')) rolStyle = rolColors.fotograf;
            else if (rolLower.includes('manager')) rolStyle = rolColors.manager;
            
            const newRow = document.createElement('tr');
            newRow.style.borderBottom = '1px solid #f3f4f6';
            newRow.setAttribute('data-id', memberData.id);
            newRow.setAttribute('data-email', memberData.email);
            newRow.innerHTML = `
                <td style="padding: 15px; color: #111827; font-weight: 500;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div style="width: 40px; height: 40px; border-radius: 50%; background: ${avatarColor}; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 16px;">
                            ${initial}
                        </div>
                        <span>${memberData.nume}</span>
                    </div>
                </td>
                <td style="padding: 15px; color: #6b7280;">
                    <span style="color: #667eea; font-weight: 500;">üìû ${memberData.telefon}</span>
                </td>
                <td style="padding: 15px; color: #6b7280;">
                    <span style="background: #f3f4f6; padding: 6px 12px; border-radius: 8px; font-weight: 600; color: #667eea;">${memberData.cod_trainer}</span>
                </td>
                <td style="padding: 15px;">
                    <span style="${rolStyle} padding: 6px 12px; border-radius: 8px; font-weight: 600; font-size: 13px;">${memberData.rol || 'Membru'}</span>
                </td>
                <td style="padding: 15px; text-align: center;">
                    <button onclick="editTeamMember(this)" style="background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; margin-right: 8px; font-size: 13px;">‚úèÔ∏è EditeazƒÉ</button>
                    <button onclick="deleteTeamMember(this)" style="background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 13px;">üóëÔ∏è »òterge</button>
                </td>
            `;
            
            tableBody.appendChild(newRow);
        }
        
        function editTeamMember(button) {
            const row = button.closest('tr');
            const cells = row.querySelectorAll('td');
            
            const numeSpan = cells[0].querySelector('span');
            const telefonSpan = cells[1].querySelector('span');
            const codSpan = cells[2].querySelector('span');
            const rolSpan = cells[3].querySelector('span');
            
            const newNume = prompt('Nume nou:', numeSpan.textContent);
            if (newNume) numeSpan.textContent = newNume;
            
            const currentTelefon = telefonSpan.textContent.replace('üìû ', '');
            const newTelefon = prompt('Telefon nou:', currentTelefon);
            if (newTelefon) telefonSpan.innerHTML = 'üìû ' + newTelefon;
            
            const newCod = prompt('Cod nou:', codSpan.textContent);
            if (newCod) codSpan.textContent = newCod;
            
            const newRol = prompt('Rol nou:', rolSpan.textContent);
            if (newRol) rolSpan.textContent = newRol;
            
            alert('‚úÖ Membru actualizat!');
        }
        
        function deleteTeamMember(button) {
            if (confirm('Sigur vrei sƒÉ »ôtergi acest membru?')) {
                const row = button.closest('tr');
                row.remove();
                alert('‚úÖ Membru »ôters!');
            }
        }
        
        // Func»õie pentru √ÆncƒÉrcarea evenimentelor cu facturƒÉ
        async function loadEvenimenteCuFactura() {
            try {
                // Interogare Supabase pentru evenimente cu metodƒÉ platƒÉ = FacturƒÉ
                const { data, error } = await supabase
                    .from('evenimente')
                    .select('*')
                    .eq('metoda_plata', 'FacturƒÉ')
                    .order('data_petrecere', { ascending: false });
                
                if (error) {
                    console.error('Eroare la √ÆncƒÉrcarea evenimentelor cu facturƒÉ:', error);
                    return;
                }
                
                // CalculeazƒÉ statistici
                const totalFacturi = data.length;
                const sumaFacturi = data.reduce((sum, evt) => sum + (parseFloat(evt.total) || 0), 0);
                
                // ActualizeazƒÉ statisticile
                document.getElementById('totalFacturi').textContent = totalFacturi;
                document.getElementById('sumaFacturi').textContent = sumaFacturi.toFixed(2) + ' RON';
                
                // GenereazƒÉ lista evenimentelor
                const listaFacturi = document.getElementById('listaFacturi');
                
                if (data.length === 0) {
                    listaFacturi.innerHTML = `
                        <p style="text-align: center; color: #6b7280; padding: 40px 0;">
                            üìÑ Nu existƒÉ evenimente cu facturƒÉ √ÆncƒÉ
                        </p>
                    `;
                    return;
                }
                
                // CreazƒÉ HTML pentru fiecare eveniment
                let html = '<div style="display: flex; flex-direction: column; gap: 15px;">';
                
                data.forEach(eveniment => {
                    const dataFormatata = eveniment.data_petrecere ? new Date(eveniment.data_petrecere).toLocaleDateString('ro-RO') : 'N/A';
                    const oraFormatata = eveniment.ora_petrecere || 'N/A';
                    
                    html += `
                        <div style="border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px; background: #f9fafb; transition: all 0.3s; cursor: pointer;" onmouseover="this.style.borderColor='#667eea'" onmouseout="this.style.borderColor='#e5e7eb'">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                                <div>
                                    <div style="font-size: 18px; font-weight: 700; color: #111827; margin-bottom: 5px;">
                                        üéâ ${eveniment.personaj || 'Eveniment'}
                                    </div>
                                    <div style="color: #6b7280; font-size: 14px;">
                                        üë§ ${eveniment.nume || ''} ${eveniment.prenume || ''} | üìû ${eveniment.telefon || 'N/A'}
                                    </div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 8px 16px; border-radius: 20px; font-weight: 700; font-size: 16px;">
                                        ${parseFloat(eveniment.total || 0).toFixed(2)} RON
                                    </div>
                                    <div style="margin-top: 5px;">
                                        <span style="background: #dcfce7; color: #16a34a; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: 600;">
                                            üßæ FacturƒÉ
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 15px; padding-top: 15px; border-top: 1px solid #e5e7eb;">
                                <div>
                                    <span style="color: #6b7280; font-size: 13px;">üìÖ Data:</span>
                                    <span style="color: #111827; font-weight: 600; margin-left: 5px;">${dataFormatata}</span>
                                </div>
                                <div>
                                    <span style="color: #6b7280; font-size: 13px;">‚è∞ Ora:</span>
                                    <span style="color: #111827; font-weight: 600; margin-left: 5px;">${oraFormatata}</span>
                                </div>
                                <div>
                                    <span style="color: #6b7280; font-size: 13px;">üë∂ V√¢rstƒÉ:</span>
                                    <span style="color: #111827; font-weight: 600; margin-left: 5px;">${eveniment.varsta || 'N/A'} ani</span>
                                </div>
                                <div>
                                    <span style="color: #6b7280; font-size: 13px;">üë• Copii:</span>
                                    <span style="color: #111827; font-weight: 600; margin-left: 5px;">${eveniment.numar_copii || 'N/A'}</span>
                                </div>
                            </div>
                            
                            ${eveniment.adresa ? `
                                <div style="margin-top: 12px; padding: 10px; background: white; border-radius: 8px;">
                                    <span style="color: #6b7280; font-size: 13px;">üìç AdresƒÉ:</span>
                                    <span style="color: #111827; font-weight: 500; margin-left: 5px;">${eveniment.adresa}</span>
                                </div>
                            ` : ''}
                            
                            ${eveniment.observatii ? `
                                <div style="margin-top: 12px; padding: 10px; background: #fef3c7; border-radius: 8px; border-left: 4px solid #f59e0b;">
                                    <span style="color: #92400e; font-size: 13px; font-weight: 600;">üìù Observa»õii:</span>
                                    <p style="color: #78350f; margin: 5px 0 0 0; font-size: 14px;">${eveniment.observatii}</p>
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
                
                html += '</div>';
                listaFacturi.innerHTML = html;
                
                console.log('‚úÖ √éncƒÉrcate', totalFacturi, 'evenimente cu facturƒÉ');
                
            } catch (error) {
                console.error('Eroare la √ÆncƒÉrcarea evenimentelor cu facturƒÉ:', error);
                alert('‚ùå Eroare la √ÆncƒÉrcarea datelor: ' + error.message);
            }
        }
        
        // ============================================
        // ADMIN MODE FUNCTIONS
        // ============================================
        
        let isAdminMode = false;
        const ADMIN_PASSWORD = 'Andrei209512!0728242214';
        
        // ============================================================
        // FUNC»öII PENTRU PAGINA SECRETƒÇ
        // ============================================================
        
        function checkPasswordAndShowSecret() {
            console.log('üîí Deschid modal parola');
            const modal = document.getElementById('passwordModal');
            const input = document.getElementById('passwordInput');
            
            modal.style.display = 'flex';
            input.value = '';
            
            // Focus pe input dupƒÉ o micƒÉ √Ænt√¢rziere
            setTimeout(() => {
                input.focus();
            }, 100);
            
            // Permite Enter pentru submit
            input.onkeypress = function(e) {
                if (e.key === 'Enter') {
                    submitPassword();
                }
            };
        }

        function closePasswordModal() {
            console.log('‚ùå Modal √Ænchis');
            document.getElementById('passwordModal').style.display = 'none';
            document.getElementById('passwordInput').value = '';
        }

        function submitPassword() {
            const password = document.getElementById('passwordInput').value;
            console.log('üîç Verific parola...');
            
            if (password === '1234') {
                // ParolƒÉ corectƒÉ
                console.log('‚úÖ ParolƒÉ corectƒÉ!');
                closePasswordModal();
                showPage('pagina-secreta');
                
                // AratƒÉ meniul secret √Æn bara lateralƒÉ
                document.getElementById('secretMenuSection').style.display = 'block';
                
                // ActiveazƒÉ primul item din meniul secret
                showSecretPage('bifeaza-evenimente-secret');
                
                // Mesaj de succes
                setTimeout(() => {
                    alert('‚úÖ Acces permis! Bine ai venit √Æn pagina secretƒÉ!');
                }, 300);
            } else {
                // ParolƒÉ gre»ôitƒÉ
                console.log('‚ùå ParolƒÉ gre»ôitƒÉ:', password);
                alert('‚ùå ParolƒÉ gre»ôitƒÉ! √éncearcƒÉ din nou.');
                document.getElementById('passwordInput').value = '';
                document.getElementById('passwordInput').focus();
            }
        }

        function showSecretPage(pageId) {
            console.log('üîÑ Schimb la sec»õiunea:', pageId);
            
            // Ascunde toate sec»õiunile secrete
            document.querySelectorAll('.secret-content').forEach(content => {
                content.style.display = 'none';
                content.classList.remove('active');
            });
            
            // AratƒÉ sec»õiunea selectatƒÉ
            const selectedContent = document.getElementById(pageId);
            if (selectedContent) {
                selectedContent.style.display = 'block';
                selectedContent.classList.add('active');
            }
            
            // ActualizeazƒÉ menu items
            document.querySelectorAll('#secretMenuSection .menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // ActiveazƒÉ menu item-ul curent
            const currentMenuItem = Array.from(document.querySelectorAll('#secretMenuSection .menu-item')).find(item => 
                item.getAttribute('onclick') && item.getAttribute('onclick').includes(pageId)
            );
            if (currentMenuItem) {
                currentMenuItem.classList.add('active');
            }
            
            // If showing generate codes page, refresh the list
            if (pageId === 'genereaza-coduri-secret') {
                refreshCodesList();
            }
        }
        
        // ============================================================
        // FUNC»öII PENTRU ADMIN
        // ============================================================
        
        function checkAdminAccess() {
            if (isAdminMode) {
                alert('‚úÖ E»ôti deja √Æn modul admin!');
                return;
            }
            
            const password = prompt('üîê Introdu parola de admin:');
            
            if (password === null) return; // User cancelled
            
            if (password === ADMIN_PASSWORD) {
                isAdminMode = true;
                
                // ASCUNDE meniul normal
                document.getElementById('mainMenu').style.display = 'none';
                
                // ARATƒÇ meniul admin simplificat
                document.getElementById('adminMenu').style.display = 'block';
                
                alert('‚úÖ Bine ai venit √Æn modul ADMIN!\n\nAi acces complet la toate func»õiile administrative.');
                
                // MarcheazƒÉ header-ul ca admin
                const header = document.querySelector('.sidebar-header');
                header.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
                
                // AdaugƒÉ badge admin
                const byAi = document.querySelector('.by-ai');
                if (!document.getElementById('adminBadge')) {
                    const adminBadge = document.createElement('div');
                    adminBadge.id = 'adminBadge';
                    adminBadge.style.cssText = 'background: #fef2f2; color: #ef4444; padding: 5px 12px; border-radius: 20px; font-size: 11px; font-weight: 700; margin-top: 10px; border: 2px solid #ef4444;';
                    adminBadge.textContent = 'üîê ADMIN';
                    byAi.appendChild(adminBadge);
                }
                
                // Deschide prima paginƒÉ admin
                showPage('bifeaza-evenimente');
            } else {
                alert('‚ùå ParolƒÉ incorectƒÉ!');
            }
        }
        
        function logoutAdmin() {
            if (confirm('Sigur vrei sƒÉ ie»ôi din modul admin?')) {
                isAdminMode = false;
                
                // ASCUNDE meniul admin
                document.getElementById('adminMenu').style.display = 'none';
                
                // ARATƒÇ meniul normal
                document.getElementById('mainMenu').style.display = 'block';
                
                // ReseteazƒÉ header-ul
                const header = document.querySelector('.sidebar-header');
                header.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                
                // »òterge badge-ul admin
                const adminBadge = document.getElementById('adminBadge');
                if (adminBadge) adminBadge.remove();
                
                // Revino la pagina principalƒÉ
                showPage('home');
                document.querySelectorAll('.menu-item')[0].click();
                
                alert('‚úÖ Ai ie»ôit din modul admin!');
            }
        }
        
        // Admin Functions
        function exportAllData() {
            alert('üì• Export date √Æn curs...\n\nFunc»õionalitate √Æn dezvoltare!');
        }
        
        function backupDatabase() {
            alert('üíæ Backup database √Æn curs...\n\nFunc»õionalitate √Æn dezvoltare!');
        }
        
        function viewLogs() {
            alert('üìã Deschidere log-uri...\n\nFunc»õionalitate √Æn dezvoltare!');
        }
        
        function clearOldData() {
            if (confirm('‚ö†Ô∏è ATEN»öIE!\n\nSigur vrei sƒÉ »ôtergi datele vechi?\n\nAceastƒÉ ac»õiune NU poate fi anulatƒÉ!')) {
                alert('üóëÔ∏è »òtergere date √Æn curs...\n\nFunc»õionalitate √Æn dezvoltare!');
            }
        }
        
        function regenerateKeys() {
            if (confirm('‚ö†Ô∏è ATEN»öIE!\n\nRegenerarea cheilor API va invalida toate conexiunile existente!\n\nContinui?')) {
                alert('üîÑ Regenerare chei √Æn curs...\n\nFunc»õionalitate √Æn dezvoltare!');
            }
        }
        
        // Func»õie pentru gestionarea c√¢mpurilor condi»õionale la MetodƒÉ PlatƒÉ
        function handleMetodaPlataChange() {
            const metoda = document.getElementById('metodaPlata').value;
            const campCardPartial = document.getElementById('campCardPartial');
            const campCashPartial = document.getElementById('campCashPartial');
            const sumaCard = document.getElementById('sumaCard');
            const sumaCash = document.getElementById('sumaCash');
            
            // Ascunde toate c√¢mpurile mai √Ænt√¢i
            campCardPartial.style.display = 'none';
            campCashPartial.style.display = 'none';
            
            // EliminƒÉ required de pe c√¢mpuri
            sumaCard.removeAttribute('required');
            sumaCash.removeAttribute('required');
            
            // AratƒÉ c√¢mpul corespunzƒÉtor √Æn func»õie de selec»õie
            if (metoda === 'Card partial + Cash rest') {
                campCardPartial.style.display = 'block';
                sumaCard.setAttribute('required', 'required');
            } else if (metoda === 'Cash partial + Card rest') {
                campCashPartial.style.display = 'block';
                sumaCash.setAttribute('required', 'required');
            }
        }
        
        // Ata»ôeazƒÉ event listener pentru butonul secret admin
        document.addEventListener('DOMContentLoaded', function() {
            // SISTEM 10 CLICKURI SECRETE pentru butonul vizibil
            
            // Event listener pentru robotul din header (backup)
            const adminTrigger = document.getElementById('adminTrigger');
            // Admin trigger dezactivat
            /*
            if (adminTrigger) {
                adminTrigger.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    checkAdminAccess();
                });
                console.log('‚úÖ Admin trigger activated - Version: ADMIN-v2.0');
            }
            */
            
            // Verificare versiune (pentru debug)
            console.log('üéâ SuperParty Dashboard v2.3 - Admin Access Disabled');
        });
        
        // ==========================================
        // FILTRU DE DATƒÇ - TOTAL PETRECERI
        // ==========================================
        
        
        // Load parties from localStorage
        function loadPartiesFromStorage() {
            const stored = localStorage.getItem('superpartyEvents');
            partiesData = stored ? JSON.parse(stored) : [];
            console.log('üì¶ Loaded from storage:', partiesData.length, 'events');
        }

        // Quick filter functions
        function applyQuickFilter(type) {
            const today = new Date();
            let fromDate, toDate;
            
            switch(type) {
                case 'today':
                    fromDate = toDate = today.toISOString().split('T')[0];
                    break;
                case 'week':
                    fromDate = today.toISOString().split('T')[0];
                    const weekEnd = new Date(today);
                    weekEnd.setDate(today.getDate() + 6);
                    toDate = weekEnd.toISOString().split('T')[0];
                    break;
                case 'month':
                    const monthStart = new Date(today.getFullYear(), today.getMonth(), 1);
                    const monthEnd = new Date(today.getFullYear(), today.getMonth() + 1, 0);
                    fromDate = monthStart.toISOString().split('T')[0];
                    toDate = monthEnd.toISOString().split('T')[0];
                    break;
                case 'year':
                    const yearStart = new Date(today.getFullYear(), 0, 1);
                    const yearEnd = new Date(today.getFullYear(), 11, 31);
                    fromDate = yearStart.toISOString().split('T')[0];
                    toDate = yearEnd.toISOString().split('T')[0];
                    break;
                case 'all':
                    fromDate = '';
                    toDate = '';
                    break;
            }
            
            document.getElementById('dateFrom').value = fromDate;
            document.getElementById('dateTo').value = toDate;
            
            // Auto apply filter
            applyDateFilter();
        }

        // Apply date filter
        function applyDateFilter() {
            loadPartiesFromStorage(); // Reload from storage
            
            const fromDate = document.getElementById('dateFrom').value;
            const toDate = document.getElementById('dateTo').value;
            
            let filteredParties = partiesData;
            
            // Filter by date range
            if (fromDate || toDate) {
                filteredParties = partiesData.filter(party => {
                    const partyDate = party.dateForFilter; // Use the formatted date
                    if (fromDate && toDate) {
                        return partyDate >= fromDate && partyDate <= toDate;
                    } else if (fromDate) {
                        return partyDate >= fromDate;
                    } else if (toDate) {
                        return partyDate <= toDate;
                    }
                    return true;
                });
            }
            
            // Update cards
            updatePartiesCards(filteredParties);
            
            // Show success message
            console.log(`‚úÖ Filtru aplicat: ${filteredParties.length} petreceri gƒÉsite`);
        }

        // Update parties cards
        function updatePartiesCards(parties) {
            const container = document.getElementById('partiesCardsContainer');
            
            // Filter ONLY MAMA events (not duplicates)
            const mamaParties = parties.filter(p => p.isMama === true);
            
            if (mamaParties.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; padding: 60px; text-align: center; color: #9ca3af; font-size: 16px;">
                        <div style="font-size: 48px; margin-bottom: 15px;">üì≠</div>
                        <div style="font-weight: 600;">Nu existƒÉ petreceri √Æn intervalul selectat</div>
                        <div style="margin-top: 10px; font-size: 14px;">√éncearcƒÉ alt interval sau adaugƒÉ evenimente noi</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = mamaParties.map((party, index) => {
                const statusBadge = party.status === 'confirmed' 
                    ? '<div style="background: #d1fae5; color: #065f46; padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: 700; display: inline-flex; align-items: center; gap: 6px;"><span>‚úÖ</span><span>Confirmat</span></div>'
                    : '<div style="background: #fef3c7; color: #92400e; padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: 700; display: inline-flex; align-items: center; gap: 6px;"><span>‚è≥</span><span>√én A»ôteptare</span></div>';
                
                return `
                    <div style="background: white; border: 2px solid #f3f4f6; border-radius: 15px; padding: 20px; transition: all 0.3s; cursor: pointer;" onmouseover="this.style.borderColor='#667eea'; this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(102, 126, 234, 0.2)'" onmouseout="this.style.borderColor='#f3f4f6'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <!-- Header Card -->
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 8px 16px; border-radius: 10px; font-size: 16px; font-weight: 700;">
                                #${party.codEveniment || index + 1}
                            </div>
                            ${statusBadge}
                        </div>
                        
                        <!-- Content -->
                        <div style="margin-bottom: 15px;">
                            <div style="font-size: 18px; font-weight: 700; color: #1f2937; margin-bottom: 8px;">
                                ${party.personaj || 'Petrecere'}
                            </div>
                            <div style="font-size: 14px; color: #6b7280; display: flex; align-items: center; gap: 6px; margin-bottom: 5px;">
                                <span>üìÖ</span>
                                <span>${party.dataPetrecere || 'N/A'}</span>
                                <span style="margin-left: 5px;">‚è∞</span>
                                <span>${party.oraPetrecere || 'N/A'}</span>
                            </div>
                            <div style="font-size: 14px; color: #6b7280; display: flex; align-items: center; gap: 6px; margin-bottom: 5px;">
                                <span>üìç</span>
                                <span>${party.adresa || party.locatie || 'N/A'}</span>
                            </div>
                            <div style="font-size: 14px; color: #6b7280; display: flex; align-items: center; gap: 6px;">
                                <span>üìû</span>
                                <span>${party.telefon || 'N/A'}</span>
                            </div>
                        </div>
                        
                        <!-- Footer -->
                        <div style="border-top: 1px solid #f3f4f6; padding-top: 15px; display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 12px; color: #9ca3af; margin-bottom: 3px;">Valoare TotalƒÉ</div>
                                <div style="font-size: 20px; font-weight: 700; color: #10b981;">${parseInt(party.total || 0).toLocaleString('ro-RO')} RON</div>
                            </div>
                            <button onclick="viewPartyDetails(${party.id})" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 10px 20px; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                                üëÅÔ∏è Detalii
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // View party details
        function viewPartyDetails(partyId) {
            const party = partiesData.find(p => p.id === partyId);
            if (!party) return;
            
            alert(`üìã Detalii Eveniment #${party.codEveniment}\n\n` +
                  `Personaj: ${party.personaj || 'N/A'}\n` +
                  `Data »ôi Ora: ${party.dataPetrecere || 'N/A'} la ${party.oraPetrecere || 'N/A'}\n` +
                  `AdresƒÉ: ${party.adresa || 'N/A'}\n` +
                  `Telefon: ${party.telefon || 'N/A'}\n` +
                  `Durata: ${party.durataDisplay || party.durata + ' ore' || 'N/A'}\n` +
                  `Ore v√¢ndute: ${party.oreVandute || 'N/A'}\n` +
                  `Persoane necesare: ${party.persoaneNecesare || 'N/A'}\n` +
                  `Total: ${parseInt(party.total || 0).toLocaleString('ro-RO')} RON\n` +
                  `MetodƒÉ platƒÉ: ${party.metodaPlata || 'N/A'}\n` +
                  `Status: ${party.status === 'confirmed' ? 'Confirmat' : '√én A»ôteptare'}`);
        }
        
        // Load parties for specific trainer
        function loadMyParties() {
            const trainerCode = document.getElementById('myTrainerCode').value.trim().toUpperCase();
            
            if (!trainerCode) {
                alert('‚ùå Te rog introdu codul tƒÉu de trainer!\n\nExemplu: A1, B5, Z50');
                return;
            }
            
            // Load from storage
            loadPartiesFromStorage();
            
            // Filter ONLY DUPLICATES (NOT mama) by trainer code
            const myParties = partiesData.filter(party => {
                return party.isMama === false && // ONLY duplicates
                       party.cineNoteaza && 
                       party.cineNoteaza.toUpperCase() === trainerCode;
            });
            
            console.log(`üéØ Trainer: ${trainerCode} - GƒÉsite ${myParties.length} petreceri (duplicate)`);
            
            // Update title
            document.getElementById('myPartiesTitle').textContent = `üìã Petrecerile Mele (${myParties.length})`;
            
            // Update cards
            updateMyPartiesCards(myParties, trainerCode);
        }
        
        // Update my parties cards
        function updateMyPartiesCards(parties, trainerCode) {
            const container = document.getElementById('myPartiesCardsContainer');
            
            if (parties.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; padding: 60px; text-align: center; color: #9ca3af; font-size: 16px;">
                        <div style="font-size: 48px; margin-bottom: 15px;">üòî</div>
                        <div style="font-weight: 600;">Nu ai petreceri notate cu codul "${trainerCode}"</div>
                        <div style="margin-top: 10px; font-size: 14px;">AdaugƒÉ evenimente noi √Æn sec»õiunea "‚ûï NoteazƒÉ Eveniment"</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = parties.map((party, index) => {
                const statusBadge = party.status === 'confirmed' 
                    ? '<div style="background: #d1fae5; color: #065f46; padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: 700; display: inline-flex; align-items: center; gap: 6px;"><span>‚úÖ</span><span>Confirmat</span></div>'
                    : '<div style="background: #fef3c7; color: #92400e; padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: 700; display: inline-flex; align-items: center; gap: 6px;"><span>‚è≥</span><span>√én A»ôteptare</span></div>';
                
                return `
                    <div style="background: white; border: 2px solid #f3f4f6; border-radius: 15px; padding: 20px; transition: all 0.3s; cursor: pointer;" onmouseover="this.style.borderColor='#667eea'; this.style.transform='translateY(-5px)'; this.style.boxShadow='0 10px 30px rgba(102, 126, 234, 0.2)'" onmouseout="this.style.borderColor='#f3f4f6'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <!-- Header Card -->
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 8px 16px; border-radius: 10px; font-size: 16px; font-weight: 700;">
                                #${party.codEveniment || index + 1}
                            </div>
                            ${statusBadge}
                        </div>
                        
                        <!-- Content -->
                        <div style="margin-bottom: 15px;">
                            <div style="font-size: 18px; font-weight: 700; color: #1f2937; margin-bottom: 8px;">
                                ${party.personaj || 'Petrecere'}
                            </div>
                            
                            <!-- Ce personaj vrei sa fi -->
                            <div style="background: ${party.cePersonajVreisaFi ? '#f0fdf4' : '#fef3c7'}; border: 2px solid ${party.cePersonajVreisaFi ? '#86efac' : '#fcd34d'}; border-radius: 10px; padding: 12px; margin-bottom: 10px;">
                                <div style="font-size: 12px; color: #6b7280; margin-bottom: 4px; font-weight: 600;">üé≠ CE PERSONAJ VREI SƒÇ FI:</div>
                                <div style="font-size: 16px; font-weight: 700; color: ${party.cePersonajVreisaFi ? '#16a34a' : '#d97706'};">
                                    ${party.cePersonajVreisaFi || '‚ö†Ô∏è NECOMPLETAT'}
                                    ${party.autoFilled ? ' <span style="font-size: 11px; background: #dbeafe; color: #1e40af; padding: 2px 8px; border-radius: 6px;">ü§ñ Auto</span>' : ''}
                                </div>
                            </div>
                            
                            <!-- Durata pentru acest rol -->
                            <div style="background: #eff6ff; border: 2px solid #60a5fa; border-radius: 10px; padding: 12px; margin-bottom: 10px;">
                                <div style="font-size: 12px; color: #6b7280; margin-bottom: 4px; font-weight: 600;">‚è±Ô∏è DURATA:</div>
                                <div style="font-size: 16px; font-weight: 700; color: #1e40af;">
                                    ${party.durataDisplay || party.durata + ' ore' || 'N/A'}
                                </div>
                            </div>
                            
                            <div style="font-size: 14px; color: #6b7280; display: flex; align-items: center; gap: 6px; margin-bottom: 5px;">
                                <span>üìÖ</span>
                                <span>${party.dataPetrecere || 'N/A'}</span>
                                <span style="margin-left: 5px;">‚è∞</span>
                                <span>${party.oraPetrecere || 'N/A'}</span>
                            </div>
                            <div style="font-size: 14px; color: #6b7280; display: flex; align-items: center; gap: 6px; margin-bottom: 5px;">
                                <span>üìç</span>
                                <span>${party.adresa || party.locatie || 'N/A'}</span>
                            </div>
                            <div style="font-size: 14px; color: #6b7280; display: flex; align-items: center; gap: 6px;">
                                <span>üìû</span>
                                <span>${party.telefon || 'N/A'}</span>
                            </div>
                        </div>
                        
                        <!-- Footer -->
                        <div style="border-top: 1px solid #f3f4f6; padding-top: 15px; display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 12px; color: #9ca3af; margin-bottom: 3px;">Valoare TotalƒÉ</div>
                                <div style="font-size: 20px; font-weight: 700; color: #10b981;">${parseInt(party.total || 0).toLocaleString('ro-RO')} RON</div>
                            </div>
                            <button onclick="viewPartyDetails(${party.id})" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 10px 20px; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 14px;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                                üëÅÔ∏è Detalii
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // ============================================
        // PHOTO VERIFICATION SYSTEM
        // ============================================
        
        let systemVerificationPoints = 0;
        let currentVerificationPhotoData = null;

        // Initialize dates for verification
        function initializeVerificationDates() {
            const today = new Date();
            const todayString = today.toISOString().split('T')[0];
            const currentDateInput = document.getElementById('currentFormDate');
            if (currentDateInput) {
                currentDateInput.value = todayString;
            }
        }

        // Handle photo upload for verification
        document.addEventListener('DOMContentLoaded', function() {
            const photoInput = document.getElementById('verificationPhotoInput');
            if (photoInput) {
                photoInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        handleVerificationPhotoUpload(file);
                    }
                });
            }
            
            // Initialize dates
            initializeVerificationDates();
            
            // Auto-update current date every minute
            setInterval(initializeVerificationDates, 60000);
        });

        function handleVerificationPhotoUpload(file) {
            if (file.size > 10 * 1024 * 1024) {
                alert('‚ùå Fi»ôierul este prea mare! Maximum 10MB');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                currentVerificationPhotoData = e.target.result;
                
                // Show preview
                document.getElementById('verificationPhotoPreview').src = currentVerificationPhotoData;
                
                // Add current date overlay to photo
                const now = new Date();
                const dateString = now.toLocaleDateString('ro-RO', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
                document.getElementById('photoDateOverlay').textContent = `üìÖ PozƒÉ fƒÉcutƒÉ la: ${dateString}`;
                
                // Hide upload section and show verification section
                document.getElementById('uploadPhotoSection').style.display = 'none';
                document.getElementById('photoVerificationSection').style.display = 'block';
                document.getElementById('verificationResult').style.display = 'none';
            };
            reader.readAsDataURL(file);
        }

        function verifyFormDate() {
            const receivedDateInput = document.getElementById('receivedFormDate').value;
            const currentDateInput = document.getElementById('currentFormDate').value;
            
            if (!receivedDateInput) {
                alert('‚ùå Te rog introdu data primirii formularului din pozƒÉ!');
                return;
            }
            
            const receivedDate = new Date(receivedDateInput);
            const currentDate = new Date(currentDateInput);
            
            // Reset time to midnight for accurate day comparison
            receivedDate.setHours(0, 0, 0, 0);
            currentDate.setHours(0, 0, 0, 0);
            
            // Calculate difference in days
            const diffTime = currentDate - receivedDate;
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            // Format dates for display
            const receivedDateFormatted = new Date(receivedDateInput).toLocaleDateString('ro-RO', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
            const currentDateFormatted = new Date(currentDateInput).toLocaleDateString('ro-RO', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
            
            // Show result section
            const resultSection = document.getElementById('verificationResult');
            resultSection.style.display = 'block';
            
            // Populate details
            document.getElementById('detailReceivedFormDate').textContent = receivedDateFormatted;
            document.getElementById('detailCurrentFormDate').textContent = currentDateFormatted;
            document.getElementById('detailDifferenceDays').textContent = diffDays + ' zile';
            
            // Check if dates match (same day)
            if (diffDays === 0) {
                // SUCCESS - Same day
                systemVerificationPoints += 1;
                
                resultSection.style.background = 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)';
                resultSection.style.border = '3px solid #10b981';
                document.getElementById('resultIcon').textContent = 'üéâ';
                document.getElementById('resultTitle').innerHTML = '<span style="color: #065f46;">FELICITƒÇRI!</span>';
                document.getElementById('resultMessage').innerHTML = '<span style="color: #047857;">Data de notare este egalƒÉ cu ziua curentƒÉ!</span>';
                document.getElementById('resultPoints').innerHTML = '<span style="color: #059669;">+1 PUNCT</span>';
                document.getElementById('detailPointsAwarded').innerHTML = '<span style="color: #059669;">+1</span>';
                
            } else if (diffDays > 0) {
                // ERROR - Late submission
                systemVerificationPoints -= 3;
                
                resultSection.style.background = 'linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)';
                resultSection.style.border = '3px solid #ef4444';
                document.getElementById('resultIcon').textContent = '‚ö†Ô∏è';
                document.getElementById('resultTitle').innerHTML = '<span style="color: #991b1b;">DATA DE NOTAT DEPƒÇ»òITƒÇ!</span>';
                document.getElementById('resultMessage').innerHTML = '<span style="color: #dc2626;">Scad 3 puncte din sistem! Formularul a fost primit cu ' + diffDays + ' zi' + (diffDays > 1 ? 'le' : '') + ' √Æn urmƒÉ!</span>';
                document.getElementById('resultPoints').innerHTML = '<span style="color: #ef4444;">-3 PUNCTE</span>';
                document.getElementById('detailPointsAwarded').innerHTML = '<span style="color: #ef4444;">-3</span>';
                
            } else {
                // Future date - Invalid
                resultSection.style.background = 'linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)';
                resultSection.style.border = '3px solid #ef4444';
                document.getElementById('resultIcon').textContent = '‚ùå';
                document.getElementById('resultTitle').innerHTML = '<span style="color: #991b1b;">DATƒÇ INVALIDƒÇ!</span>';
                document.getElementById('resultMessage').innerHTML = '<span style="color: #dc2626;">Data primirii nu poate fi √Æn viitor!</span>';
                document.getElementById('resultPoints').innerHTML = '<span style="color: #6b7280;">0 PUNCTE</span>';
                document.getElementById('detailPointsAwarded').innerHTML = '<span style="color: #6b7280;">0</span>';
            }
            
            // Update system points display
            updateVerificationPointsDisplay();
            
            // Scroll to result
            resultSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function updateVerificationPointsDisplay() {
            const pointsElement = document.getElementById('systemPointsDisplay');
            if (pointsElement) {
                pointsElement.textContent = systemVerificationPoints;
                
                // Animate points change
                pointsElement.style.transform = 'scale(1.2)';
                
                setTimeout(() => {
                    pointsElement.style.transform = 'scale(1)';
                }, 500);
            }
        }

        function resetPhotoVerification() {
            document.getElementById('uploadPhotoSection').style.display = 'block';
            document.getElementById('photoVerificationSection').style.display = 'none';
            document.getElementById('verificationResult').style.display = 'none';
            document.getElementById('verificationPhotoInput').value = '';
            document.getElementById('receivedFormDate').value = '';
            currentVerificationPhotoData = null;
            
            // Scroll to top of page section
            document.getElementById('verifica-formular').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        // Initialize - load data on page load
        let partiesData = [];
        loadPartiesFromStorage();

        // ============================================
        // TARGET TRAINERI SYSTEM
        // ============================================
        let currentMonthTrainers = new Date();
        let eventsTrainers = [];
        let trainersData = [];
        
        // Initialize Trainers System
        function initializeTrainersSystem() {
            // Generate all trainers (Atrainer - Ztrainer)
            trainersData = [];
            for (let i = 65; i <= 90; i++) { // A-Z
                const letter = String.fromCharCode(i);
                trainersData.push({
                    code: `${letter}trainer`,
                    letter: letter,
                    totalHours: 0,
                    teamSales: 0,
                    level1Earnings: 0,
                    level2Earnings: 0
                });
            }
            
            // Load events from localStorage
            loadEventsTrainers();
            
            // Populate selectors
            populateSelectorsTrainers();
            
            // Add first executor row
            addExecutorRowTrainers();
            
            // Update displays
            updateMonthDisplayTrainers();
            calculateAndDisplayTrainers();
        }
        
        // Month Navigation
        function updateMonthDisplayTrainers() {
            const months = ['Ianuarie', 'Februarie', 'Martie', 'Aprilie', 'Mai', 'Iunie', 
                          'Iulie', 'August', 'Septembrie', 'Octombrie', 'Noiembrie', 'Decembrie'];
            const monthName = months[currentMonthTrainers.getMonth()];
            const year = currentMonthTrainers.getFullYear();
            document.getElementById('currentMonthDisplay').textContent = `${monthName} ${year}`;
        }
        
        function previousMonth() {
            currentMonthTrainers.setMonth(currentMonthTrainers.getMonth() - 1);
            updateMonthDisplayTrainers();
            calculateAndDisplayTrainers();
        }
        
        function nextMonth() {
            currentMonthTrainers.setMonth(currentMonthTrainers.getMonth() + 1);
            updateMonthDisplayTrainers();
            calculateAndDisplayTrainers();
        }
        
        // Tab Switching for Target Traineri
        function switchTargetTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.target-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Remove active from all buttons
            document.querySelectorAll('.target-tab').forEach(btn => {
                btn.style.background = 'white';
                btn.style.border = '2px solid #667eea';
                btn.style.color = '#667eea';
                btn.style.boxShadow = 'none';
            });
            
            // Show selected tab
            document.getElementById(tabName).style.display = 'block';
            
            // Add active to clicked button
            const clickedBtn = event.target;
            clickedBtn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            clickedBtn.style.border = 'none';
            clickedBtn.style.color = 'white';
            clickedBtn.style.boxShadow = '0 4px 15px rgba(102, 126, 234, 0.3)';
            
            // Refresh data if needed
            if (tabName === 'dashboard-traineri') {
                calculateAndDisplayTrainers();
            } else if (tabName === 'evenimente-traineri') {
                displayEventsListTrainers();
            } else if (tabName === 'calcule-traineri') {
                displayDetailedCalculationsTrainers();
            }
        }
        
        // Populate Selectors
        function populateSelectorsTrainers() {
            const sellerSelect = document.getElementById('sellerTrainers');
            
            // Clear existing options except first
            sellerSelect.innerHTML = '<option value="">SelecteazƒÉ v√¢nzƒÉtorul...</option>';
            
            // Add trainers
            trainersData.forEach(trainer => {
                const option = document.createElement('option');
                option.value = trainer.code;
                option.textContent = trainer.code;
                sellerSelect.appendChild(option);
            });
            
            // Add all people (A1-Z50)
            for (let i = 65; i <= 90; i++) { // A-Z
                const letter = String.fromCharCode(i);
                for (let j = 1; j <= 50; j++) {
                    const code = `${letter}${j}`;
                    const option = document.createElement('option');
                    option.value = code;
                    option.textContent = code;
                    sellerSelect.appendChild(option);
                }
            }
        }
        
        function updateExecutorSelectorsTrainers() {
            document.querySelectorAll('.executor-code-trainers').forEach(select => {
                if (select.options.length === 1) { // Only default option
                    // Add all people (A1-Z50)
                    for (let i = 65; i <= 90; i++) { // A-Z
                        const letter = String.fromCharCode(i);
                        for (let j = 1; j <= 50; j++) {
                            const code = `${letter}${j}`;
                            const option = document.createElement('option');
                            option.value = code;
                            option.textContent = code;
                            select.appendChild(option);
                        }
                    }
                }
            });
        }
        
        // Event Management
        function addExecutorRowTrainers() {
            const container = document.getElementById('executorsContainerTrainers');
            const newRow = document.createElement('div');
            newRow.style.cssText = 'display: flex; gap: 15px; margin-bottom: 15px; align-items: flex-start;';
            newRow.innerHTML = `
                <div style="flex: 1;">
                    <label style="display: block; margin-bottom: 8px; color: #667eea; font-weight: 700; font-size: 14px;">Cod Executant</label>
                    <select class="executor-code-trainers" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                        <option value="">SelecteazƒÉ executant...</option>
                    </select>
                </div>
                <div style="flex: 1;">
                    <label style="display: block; margin-bottom: 8px; color: #667eea; font-weight: 700; font-size: 14px;">Rol (Spider-Man, etc.)</label>
                    <input type="text" class="executor-role-trainers" placeholder="Ex: Iron Man" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                </div>
                <div style="width: 150px;">
                    <label style="display: block; margin-bottom: 8px; color: #667eea; font-weight: 700; font-size: 14px;">Ore Lucrate</label>
                    <input type="number" class="executor-hours-trainers" placeholder="Ex: 3" step="0.5" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                </div>
                <button onclick="this.parentElement.remove()" style="background: #fee2e2; color: #dc2626; border: none; padding: 12px 20px; border-radius: 10px; cursor: pointer; font-weight: 700; margin-top: 32px;">üóëÔ∏è</button>
            `;
            container.appendChild(newRow);
            updateExecutorSelectorsTrainers();
        }
        
        function saveEventTrainers() {
            const clientName = document.getElementById('clientNameTrainers').value.trim();
            const eventValue = parseFloat(document.getElementById('eventValueTrainers').value);
            const eventDate = document.getElementById('eventDateTrainers').value;
            const seller = document.getElementById('sellerTrainers').value;
            
            // Validate
            if (!clientName || !eventValue || !eventDate || !seller) {
                showMessageTrainers('‚ùå Te rog completeazƒÉ toate c√¢mpurile obligatorii!', 'error');
                return;
            }
            
            // Get executors
            const executorRows = document.querySelectorAll('#executorsContainerTrainers > div');
            const executors = [];
            
            executorRows.forEach(row => {
                const code = row.querySelector('.executor-code-trainers').value;
                const role = row.querySelector('.executor-role-trainers').value.trim();
                const hours = parseFloat(row.querySelector('.executor-hours-trainers').value);
                
                if (code && role && hours > 0) {
                    executors.push({ code, role, hours });
                }
            });
            
            if (executors.length === 0) {
                showMessageTrainers('‚ùå AdaugƒÉ cel pu»õin un executant!', 'error');
                return;
            }
            
            // Create event object
            const event = {
                id: Date.now(),
                clientName,
                value: eventValue,
                date: eventDate,
                seller,
                executors,
                createdAt: new Date().toISOString()
            };
            
            // Save to events array
            eventsTrainers.push(event);
            saveEventsTrainers();
            
            // Show success message
            showMessageTrainers('‚úÖ Eveniment salvat cu succes!', 'success');
            
            // Reset form
            resetEventFormTrainers();
            
            // Recalculate
            calculateAndDisplayTrainers();
        }
        
        function resetEventFormTrainers() {
            document.getElementById('clientNameTrainers').value = '';
            document.getElementById('eventValueTrainers').value = '';
            document.getElementById('eventDateTrainers').value = '';
            document.getElementById('sellerTrainers').value = '';
            
            // Reset executors
            const container = document.getElementById('executorsContainerTrainers');
            container.innerHTML = '';
            addExecutorRowTrainers();
            
            document.getElementById('eventMessageTrainers').innerHTML = '';
        }
        
        function showMessageTrainers(message, type) {
            const msgDiv = document.getElementById('eventMessageTrainers');
            const bgColor = type === 'success' ? 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)' : 'linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)';
            const borderColor = type === 'success' ? '#10b981' : '#ef4444';
            const textColor = type === 'success' ? '#065f46' : '#991b1b';
            
            msgDiv.style.cssText = `background: ${bgColor}; border: 2px solid ${borderColor}; color: ${textColor}; padding: 20px; border-radius: 12px; margin-top: 20px; font-weight: 600; text-align: center;`;
            msgDiv.textContent = message;
            
            setTimeout(() => {
                msgDiv.innerHTML = '';
            }, 5000);
        }
        
        function displayEventsListTrainers() {
            const container = document.getElementById('eventsListTrainers');
            const monthEvents = getEventsForMonthTrainers();
            
            if (monthEvents.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #6b7280; padding: 40px;">Nu existƒÉ evenimente pentru luna selectatƒÉ.</p>';
                return;
            }
            
            let html = '<div style="display: grid; gap: 20px;">';
            
            monthEvents.forEach(event => {
                const totalHours = event.executors.reduce((sum, ex) => sum + ex.hours, 0);
                html += `
                    <div style="background: #f9fafb; border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                            <div>
                                <h4 style="color: #667eea; margin-bottom: 5px; font-size: 18px; font-weight: 700;">${event.clientName}</h4>
                                <p style="color: #6b7280; font-size: 14px;">${new Date(event.date).toLocaleDateString('ro-RO')}</p>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 24px; font-weight: 900; color: #667eea;">${event.value} lei</div>
                                <div style="color: #6b7280; font-size: 14px;">${totalHours}h total</div>
                            </div>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                            <strong style="color: #667eea;">V√¢nzƒÉtor:</strong> <span style="color: #1f2937; font-weight: 600;">${event.seller}</span>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px;">
                            <strong style="color: #667eea;">Executan»õi:</strong>
                            <div style="margin-top: 10px;">
                                ${event.executors.map(ex => `
                                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e5e7eb;">
                                        <span style="color: #1f2937;">${ex.code} - ${ex.role}</span>
                                        <span style="color: #667eea; font-weight: 700;">${ex.hours}h</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <button onclick="deleteEventTrainers(${event.id})" style="background: #fee2e2; color: #dc2626; border: none; padding: 12px 25px; border-radius: 10px; cursor: pointer; font-weight: 700; margin-top: 15px; width: 100%;">
                            üóëÔ∏è »òterge Eveniment
                        </button>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function deleteEventTrainers(eventId) {
            if (!confirm('Sigur vrei sƒÉ »ôtergi acest eveniment?')) return;
            
            eventsTrainers = eventsTrainers.filter(e => e.id !== eventId);
            saveEventsTrainers();
            displayEventsListTrainers();
            calculateAndDisplayTrainers();
        }
        
        // Calculations
        function calculateAndDisplayTrainers() {
            const monthEvents = getEventsForMonthTrainers();
            
            // Reset trainer stats
            trainersData.forEach(trainer => {
                trainer.totalHours = 0;
                trainer.teamSales = 0;
                trainer.level1Earnings = 0;
                trainer.level2Earnings = 0;
                trainer.positions = [];
            });
            
            // Calculate total sales
            const totalSales = monthEvents.reduce((sum, event) => sum + event.value, 0);
            
            // Calculate TEAM hours (all hours worked by each team, regardless of who sold)
            monthEvents.forEach(event => {
                event.executors.forEach(executor => {
                    const letter = executor.code.charAt(0);
                    const trainer = trainersData.find(t => t.letter === letter);
                    if (trainer) {
                        trainer.totalHours += executor.hours;
                    }
                });
            });
            
            // Calculate team sales (for LEVEL 2) - only events SOLD by team members
            monthEvents.forEach(event => {
                const sellerLetter = event.seller.charAt(0);
                const sellerTrainer = trainersData.find(t => t.letter === sellerLetter);
                
                if (sellerTrainer) {
                    sellerTrainer.teamSales += event.value;
                }
            });
            
            // Find top performer (team with most hours)
            const topPerformer = trainersData.reduce((max, trainer) => 
                trainer.totalHours > max.totalHours ? trainer : max
            , trainersData[0]);
            
            const topHours = topPerformer.totalHours;
            
            // ========================================
            // LEVEL 1 CALCULATIONS - POZI»öII SYSTEM
            // ========================================
            const level1Pot = totalSales * 0.01;
            
            // Determine number of positions based on top performer
            const numPositions = Math.floor((topHours - 150) / 10);
            
            if (numPositions > 0 && topHours >= 150) {
                const moneyPerPosition = level1Pot / numPositions;
                
                // For each position, find who qualifies
                for (let pos = 1; pos <= numPositions; pos++) {
                    const positionMinHours = 150 + (pos - 1) * 10;
                    const positionMaxHours = 150 + pos * 10;
                    
                    // Find trainers who reached this position
                    const qualifiedTrainers = trainersData.filter(t => t.totalHours >= positionMaxHours);
                    
                    if (qualifiedTrainers.length > 0) {
                        const moneyPerTrainer = moneyPerPosition / qualifiedTrainers.length;
                        
                        qualifiedTrainers.forEach(trainer => {
                            trainer.level1Earnings += moneyPerTrainer;
                            trainer.positions.push({
                                position: pos,
                                range: `${positionMinHours}-${positionMaxHours}h`,
                                earned: moneyPerTrainer,
                                shared: qualifiedTrainers.length
                            });
                        });
                    }
                }
            }
            
            // ========================================
            // LEVEL 2 CALCULATIONS - TEAM SALES
            // ========================================
            let totalCompanyMoney = 0;
            
            trainersData.forEach(trainer => {
                if (trainer.teamSales > 0 && topHours > 0) {
                    const level2Pot = trainer.teamSales * 0.01;
                    const hourValue = level2Pot / topHours;
                    trainer.level2Earnings = trainer.totalHours * hourValue;
                    
                    const companyShare = level2Pot - trainer.level2Earnings;
                    totalCompanyMoney += companyShare;
                }
            });
            
            // Update dashboard
            document.getElementById('totalSalesTrainers').textContent = totalSales.toLocaleString('ro-RO') + ' lei';
            document.getElementById('level1TotalTrainers').textContent = level1Pot.toLocaleString('ro-RO', {maximumFractionDigits: 2}) + ' lei';
            document.getElementById('totalHoursTrainers').textContent = trainersData.reduce((sum, t) => sum + t.totalHours, 0).toFixed(1) + 'h';
            document.getElementById('topPerformerTrainers').textContent = topPerformer.code;
            document.getElementById('currentThresholdTrainers').textContent = topHours.toFixed(1) + 'h';
            document.getElementById('companyMoneyTrainers').textContent = totalCompanyMoney.toLocaleString('ro-RO', {maximumFractionDigits: 2}) + ' lei';
            
            // Update rankings table
            displayTrainerRankingsTable();
        }
        
        function displayTrainerRankingsTable() {
            const tbody = document.getElementById('trainerRankingsTable');
            
            // Sort trainers by total earnings
            const sortedTrainers = [...trainersData]
                .filter(t => t.totalHours > 0 || t.teamSales > 0)
                .sort((a, b) => {
                    const totalA = a.level1Earnings + a.level2Earnings;
                    const totalB = b.level1Earnings + b.level2Earnings;
                    return totalB - totalA;
                });
            
            if (sortedTrainers.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" style="text-align: center; padding: 40px; color: #6b7280;">
                            <div style="font-size: 48px; margin-bottom: 15px;">üìä</div>
                            <p>Nu existƒÉ date pentru luna selectatƒÉ</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            const topPerformerCode = trainersData.reduce((max, t) => 
                t.totalHours > max.totalHours ? t : max
            , trainersData[0]).code;
            
            let html = '';
            sortedTrainers.forEach((trainer, index) => {
                const isTop = trainer.code === topPerformerCode;
                const total = trainer.level1Earnings + trainer.level2Earnings;
                
                let statusBadge = '';
                let statusStyle = '';
                if (trainer.totalHours >= 150) {
                    statusBadge = 'Activ';
                    statusStyle = 'background: #d1fae5; color: #065f46; padding: 6px 12px; border-radius: 6px; font-weight: 700; font-size: 13px;';
                } else if (trainer.totalHours > 0) {
                    statusBadge = 'Sub Prag';
                    statusStyle = 'background: #fef3c7; color: #92400e; padding: 6px 12px; border-radius: 6px; font-weight: 700; font-size: 13px;';
                } else {
                    statusBadge = 'Inactiv';
                    statusStyle = 'background: #fee2e2; color: #991b1b; padding: 6px 12px; border-radius: 6px; font-weight: 700; font-size: 13px;';
                }
                
                const rowStyle = isTop ? 'background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);' : '';
                
                html += `
                    <tr style="${rowStyle}">
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;"><strong>${index + 1}${isTop ? ' üëë' : ''}</strong></td>
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;"><strong style="color: #667eea;">${trainer.code}</strong></td>
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;">${trainer.totalHours.toFixed(1)}h</td>
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;">${trainer.teamSales.toLocaleString('ro-RO', {maximumFractionDigits: 0})} lei</td>
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;">${trainer.level1Earnings.toLocaleString('ro-RO', {maximumFractionDigits: 2})} lei</td>
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;">${trainer.level2Earnings.toLocaleString('ro-RO', {maximumFractionDigits: 2})} lei</td>
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;"><strong style="color: #10b981;">${total.toLocaleString('ro-RO', {maximumFractionDigits: 2})} lei</strong></td>
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;"><span style="${statusStyle}">${statusBadge}</span></td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }
        
        function displayDetailedCalculationsTrainers() {
            const container = document.getElementById('detailedCalculationsTrainers');
            const monthEvents = getEventsForMonthTrainers();
            
            if (monthEvents.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #6b7280; padding: 40px;">Nu existƒÉ date pentru luna selectatƒÉ.</p>';
                return;
            }
            
            // Get calculations data
            const totalSales = monthEvents.reduce((sum, event) => sum + event.value, 0);
            const level1Pot = totalSales * 0.01;
            
            const topPerformer = trainersData.reduce((max, t) => 
                t.totalHours > max.totalHours ? t : max
            , trainersData[0]);
            
            const topHours = topPerformer.totalHours;
            const numPositions = Math.floor((topHours - 150) / 10);
            const moneyPerPosition = numPositions > 0 ? level1Pot / numPositions : 0;
            
            let html = `
                <div style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border: 2px solid #667eea; border-radius: 12px; padding: 25px; margin-bottom: 30px;">
                    <h4 style="color: #667eea; margin-bottom: 20px; font-size: 20px; font-weight: 800;">üìä Rezumat General</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div>
                            <div style="color: #6b7280; font-size: 14px; margin-bottom: 5px;">Total V√¢nzƒÉri</div>
                            <div style="color: #1f2937; font-size: 24px; font-weight: 700;">${totalSales.toLocaleString('ro-RO')} lei</div>
                        </div>
                        <div>
                            <div style="color: #6b7280; font-size: 14px; margin-bottom: 5px;">Pot Nivel 1 (1%)</div>
                            <div style="color: #667eea; font-size: 24px; font-weight: 700;">${level1Pot.toLocaleString('ro-RO', {maximumFractionDigits: 2})} lei</div>
                        </div>
                        <div>
                            <div style="color: #6b7280; font-size: 14px; margin-bottom: 5px;">Top Performer</div>
                            <div style="color: #1f2937; font-size: 24px; font-weight: 700;">${topPerformer.code}</div>
                        </div>
                        <div>
                            <div style="color: #6b7280; font-size: 14px; margin-bottom: 5px;">Ore Top</div>
                            <div style="color: #1f2937; font-size: 24px; font-weight: 700;">${topHours.toFixed(1)}h</div>
                        </div>
                        <div>
                            <div style="color: #6b7280; font-size: 14px; margin-bottom: 5px;">NumƒÉr Pozi»õii</div>
                            <div style="color: #1f2937; font-size: 24px; font-weight: 700;">${numPositions}</div>
                        </div>
                        <div>
                            <div style="color: #6b7280; font-size: 14px; margin-bottom: 5px;">Bani per Pozi»õie</div>
                            <div style="color: #667eea; font-size: 24px; font-weight: 700;">${moneyPerPosition.toFixed(2)} lei</div>
                        </div>
                    </div>
                </div>
                
                <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 2px solid #f59e0b; border-radius: 12px; padding: 25px; margin-bottom: 30px;">
                    <h4 style="color: #d97706; margin-bottom: 20px; font-size: 20px; font-weight: 800;">üèÜ NIVEL 1 - Distribu»õie pe Pozi»õii</h4>
                    <p style="color: #78350f; margin-bottom: 20px; font-weight: 600;">Fiecare pozi»õie = 10h | Bani per pozi»õie: ${moneyPerPosition.toFixed(2)} lei</p>
            `;
            
            // Show position breakdown
            for (let pos = 1; pos <= numPositions; pos++) {
                const positionMinHours = 150 + (pos - 1) * 10;
                const positionMaxHours = 150 + pos * 10;
                const qualifiedTrainers = trainersData.filter(t => t.totalHours >= positionMaxHours);
                
                if (qualifiedTrainers.length > 0) {
                    const moneyPerTrainer = moneyPerPosition / qualifiedTrainers.length;
                    const trainerCodes = qualifiedTrainers.map(t => t.code).join(', ');
                    
                    html += `
                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 10px; border-left: 4px solid #f59e0b;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <strong style="color: #f59e0b; font-size: 16px;">Pozi»õia ${pos}</strong>
                                    <span style="color: #6b7280; font-size: 14px; margin-left: 10px;">(${positionMinHours}-${positionMaxHours}h)</span>
                                    <div style="color: #1f2937; font-size: 14px; margin-top: 5px;">
                                        üë• ${qualifiedTrainers.length} traineri: ${trainerCodes}
                                    </div>
                                    <div style="color: #6b7280; font-size: 13px; margin-top: 3px;">
                                        ${moneyPerPosition.toFixed(2)} lei √∑ ${qualifiedTrainers.length} = ${moneyPerTrainer.toFixed(2)} lei fiecare
                                    </div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="color: #f59e0b; font-size: 20px; font-weight: 700;">${moneyPerTrainer.toFixed(2)} lei</div>
                                    <div style="color: #6b7280; font-size: 12px;">per trainer</div>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }
            
            // Individual trainer breakdown
            html += `
                <div style="margin-top: 30px;">
                    <h4 style="color: #d97706; margin-bottom: 15px; font-size: 18px; font-weight: 800;">üìã C√¢»ôtiguri Individuale - Nivel 1</h4>
            `;
            
            const trainersWithEarnings = trainersData.filter(t => t.level1Earnings > 0).sort((a, b) => b.level1Earnings - a.level1Earnings);
            
            trainersWithEarnings.forEach(trainer => {
                const numPos = trainer.positions ? trainer.positions.length : 0;
                html += `
                    <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong style="color: #1f2937; font-size: 18px;">${trainer.code}</strong>
                                <div style="color: #6b7280; font-size: 14px; margin-top: 5px;">
                                    ${trainer.totalHours.toFixed(1)}h ‚Üí ${numPos} pozi»õii atinse
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="color: #f59e0b; font-size: 24px; font-weight: 700;">${trainer.level1Earnings.toLocaleString('ro-RO', {maximumFractionDigits: 2})} lei</div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += `
                </div>
                </div>
                
                <div style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border: 2px solid #667eea; border-radius: 12px; padding: 25px;">
                    <h4 style="color: #667eea; margin-bottom: 20px; font-size: 20px; font-weight: 800;">üí∞ NIVEL 2 - V√¢nzƒÉri EchipƒÉ</h4>
                    <p style="color: #1e3a8a; margin-bottom: 20px; font-weight: 600;">Formula: Ore echipƒÉ √ó (Pot echipƒÉ / ${topHours.toFixed(1)}h ore top)</p>
            `;
            
            trainersData.filter(t => t.teamSales > 0).forEach(trainer => {
                const level2Pot = trainer.teamSales * 0.01;
                const hourValue = level2Pot / topHours;
                const companyMoney = level2Pot - trainer.level2Earnings;
                
                html += `
                    <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 15px;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                            <div>
                                <strong style="color: #1f2937; font-size: 18px;">${trainer.code}</strong>
                                <div style="color: #6b7280; font-size: 14px; margin-top: 5px;">
                                    V√¢nzƒÉri echipƒÉ: ${trainer.teamSales.toLocaleString('ro-RO', {maximumFractionDigits: 0})} lei
                                </div>
                                <div style="color: #6b7280; font-size: 14px;">
                                    Pot maxim (1%): ${level2Pot.toLocaleString('ro-RO', {maximumFractionDigits: 2})} lei
                                </div>
                                <div style="color: #6b7280; font-size: 14px;">
                                    Valoare orƒÉ: ${hourValue.toFixed(2)} lei/h
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="color: #667eea; font-size: 28px; font-weight: 700;">${trainer.level2Earnings.toLocaleString('ro-RO', {maximumFractionDigits: 2})} lei</div>
                            </div>
                        </div>
                        <div style="background: #f9fafb; padding: 15px; border-radius: 8px;">
                            <div style="color: #1f2937; font-size: 14px; margin-bottom: 8px; font-weight: 600;">
                                Calcul: ${trainer.totalHours.toFixed(1)}h √ó ${hourValue.toFixed(2)} lei/h = ${trainer.level2Earnings.toLocaleString('ro-RO', {maximumFractionDigits: 2})} lei
                            </div>
                            ${companyMoney > 0 ? `
                                <div style="color: #ef4444; font-size: 14px; margin-top: 10px; font-weight: 700;">
                                    üè¢ Pentru firmƒÉ: ${companyMoney.toLocaleString('ro-RO', {maximumFractionDigits: 2})} lei
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function recalculateMonthTrainers() {
            calculateAndDisplayTrainers();
            displayDetailedCalculationsTrainers();
            alert('‚úÖ Calcule re√ÆmprospƒÉtate!');
        }
        
        // Storage
        function saveEventsTrainers() {
            localStorage.setItem('superparty_trainers_events', JSON.stringify(eventsTrainers));
        }
        
        function loadEventsTrainers() {
            const stored = localStorage.getItem('superparty_trainers_events');
            if (stored) {
                eventsTrainers = JSON.parse(stored);
            }
        }
        
        function getEventsForMonthTrainers() {
            const month = currentMonthTrainers.getMonth();
            const year = currentMonthTrainers.getFullYear();
            
            return eventsTrainers.filter(event => {
                const eventDate = new Date(event.date);
                return eventDate.getMonth() === month && eventDate.getFullYear() === year;
            });
        }
        
        // Initialize when target-traineri page is shown
        document.addEventListener('DOMContentLoaded', function() {
            // Check if we're on target-traineri page
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    const targetPage = document.getElementById('target-traineri');
                    if (targetPage && targetPage.classList.contains('active')) {
                        initializeTrainersSystem();
                    }
                });
            });
            
            observer.observe(document.body, {
                attributes: true,
                subtree: true,
                attributeFilter: ['class']
            });
        });

        // ============================================
        // TARGET ANIMA»öIE SYSTEM
        // ============================================
        let currentMonthAnimatie = new Date();
        let eventsAnimatie = [];
        let allPeopleAnimatie = []; // Traineri + Oameni
        
        // Roluri anima»õie care participƒÉ
        const ANIMATION_ROLES = [
            'Anima»õie', 'Animatie',
            'Ur»ôitoare', 'Ursitoare',
            'Arcade pe suport', 'Arcade fƒÉrƒÉ suport', 'Arcade fara suport',
            'Arcade pe suport cu cifre', 'Arcade fƒÉrƒÉ suport cu cifre', 'Arcade fara suport cu cifre',
            'Ghea»õƒÉ carbonicƒÉ', 'Gheata carbonica',
            'VatƒÉ', 'Vata',
            'Popcorn',
            'VatƒÉ »ôi Popcorn', 'Vata si Popcorn', 'VatƒÉ si Popcorn', 'Vata »ôi Popcorn',
            'Mo»ô CrƒÉciun', 'Mos Craciun',
            'Heliu',
            'Piniata personalizatƒÉ', 'Piniata personalizata'
        ];
        
        function isAnimationRole(role) {
            return ANIMATION_ROLES.some(ar => role.toLowerCase().includes(ar.toLowerCase()));
        }
        
        // Initialize Animatie System
        function initializeAnimatieSystem() {
            // Generate all people (traineri + oameni)
            allPeopleAnimatie = [];
            
            // Add trainers
            for (let i = 65; i <= 90; i++) {
                const letter = String.fromCharCode(i);
                allPeopleAnimatie.push({
                    code: `${letter}trainer`,
                    letter: letter,
                    animationHours: 0,
                    earnings: 0,
                    isTrainer: true
                });
            }
            
            // Add all people (A1-Z50)
            for (let i = 65; i <= 90; i++) {
                const letter = String.fromCharCode(i);
                for (let j = 1; j <= 50; j++) {
                    allPeopleAnimatie.push({
                        code: `${letter}${j}`,
                        letter: letter,
                        animationHours: 0,
                        earnings: 0,
                        isTrainer: false
                    });
                }
            }
            
            // Load events
            loadEventsAnimatie();
            
            // Populate selectors
            populateSelectorsAnimatie();
            
            // Add first executor row
            addExecutorRowAnimatie();
            
            // Update displays
            updateMonthDisplayAnimatie();
            calculateAndDisplayAnimatie();
        }
        
        // Month Navigation Animatie
        function updateMonthDisplayAnimatie() {
            const months = ['Ianuarie', 'Februarie', 'Martie', 'Aprilie', 'Mai', 'Iunie', 
                          'Iulie', 'August', 'Septembrie', 'Octombrie', 'Noiembrie', 'Decembrie'];
            const monthName = months[currentMonthAnimatie.getMonth()];
            const year = currentMonthAnimatie.getFullYear();
            document.getElementById('currentMonthDisplayAnimatie').textContent = `${monthName} ${year}`;
        }
        
        function previousMonthAnimatie() {
            currentMonthAnimatie.setMonth(currentMonthAnimatie.getMonth() - 1);
            updateMonthDisplayAnimatie();
            calculateAndDisplayAnimatie();
        }
        
        function nextMonthAnimatie() {
            currentMonthAnimatie.setMonth(currentMonthAnimatie.getMonth() + 1);
            updateMonthDisplayAnimatie();
            calculateAndDisplayAnimatie();
        }
        
        // Tab Switching Animatie
        function switchTargetTabAnimatie(tabName) {
            document.querySelectorAll('.target-content-animatie').forEach(tab => {
                tab.style.display = 'none';
            });
            
            document.querySelectorAll('.target-tab-animatie').forEach(btn => {
                btn.style.background = 'white';
                btn.style.border = '2px solid #f59e0b';
                btn.style.color = '#f59e0b';
                btn.style.boxShadow = 'none';
            });
            
            document.getElementById(tabName).style.display = 'block';
            
            const clickedBtn = event.target;
            clickedBtn.style.background = 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
            clickedBtn.style.border = 'none';
            clickedBtn.style.color = 'white';
            clickedBtn.style.boxShadow = '0 4px 15px rgba(245, 158, 11, 0.3)';
            
            if (tabName === 'dashboard-animatie') {
                calculateAndDisplayAnimatie();
            } else if (tabName === 'evenimente-animatie') {
                displayEventsListAnimatie();
            } else if (tabName === 'calcule-animatie') {
                displayDetailedCalculationsAnimatie();
            }
        }
        
        // Populate Selectors Animatie
        function populateSelectorsAnimatie() {
            const sellerSelect = document.getElementById('sellerAnimatie');
            sellerSelect.innerHTML = '<option value="">SelecteazƒÉ...</option>';
            
            allPeopleAnimatie.forEach(person => {
                const option = document.createElement('option');
                option.value = person.code;
                option.textContent = person.code;
                sellerSelect.appendChild(option);
            });
        }
        
        function updateExecutorSelectorsAnimatie() {
            document.querySelectorAll('.executor-code-animatie').forEach(select => {
                if (select.options.length === 1) {
                    allPeopleAnimatie.forEach(person => {
                        const option = document.createElement('option');
                        option.value = person.code;
                        option.textContent = person.code;
                        select.appendChild(option);
                    });
                }
            });
        }
        
        // Event Management Animatie
        function addExecutorRowAnimatie() {
            const container = document.getElementById('executorsContainerAnimatie');
            const newRow = document.createElement('div');
            newRow.style.cssText = 'display: flex; gap: 15px; margin-bottom: 15px; align-items: flex-start;';
            newRow.innerHTML = `
                <div style="flex: 1;">
                    <label style="display: block; margin-bottom: 8px; color: #f59e0b; font-weight: 700; font-size: 14px;">Cod Executant</label>
                    <select class="executor-code-animatie" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                        <option value="">SelecteazƒÉ...</option>
                    </select>
                </div>
                <div style="flex: 1;">
                    <label style="display: block; margin-bottom: 8px; color: #f59e0b; font-weight: 700; font-size: 14px;">Rol</label>
                    <select class="executor-role-animatie" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                        <option value="">SelecteazƒÉ rol...</option>
                        <option value="Anima»õie">Anima»õie</option>
                        <option value="Ur»ôitoare">Ur»ôitoare</option>
                        <option value="Arcade pe suport">Arcade pe suport</option>
                        <option value="Arcade fƒÉrƒÉ suport">Arcade fƒÉrƒÉ suport</option>
                        <option value="Arcade pe suport cu cifre">Arcade pe suport cu cifre</option>
                        <option value="Arcade fƒÉrƒÉ suport cu cifre">Arcade fƒÉrƒÉ suport cu cifre</option>
                        <option value="Ghea»õƒÉ carbonicƒÉ">Ghea»õƒÉ carbonicƒÉ</option>
                        <option value="VatƒÉ">VatƒÉ</option>
                        <option value="Popcorn">Popcorn</option>
                        <option value="VatƒÉ »ôi Popcorn">VatƒÉ »ôi Popcorn</option>
                        <option value="Mo»ô CrƒÉciun">Mo»ô CrƒÉciun</option>
                        <option value="Heliu">Heliu</option>
                        <option value="Piniata personalizatƒÉ">Piniata personalizatƒÉ</option>
                        <option value="Training">Training</option>
                    </select>
                </div>
                <div style="width: 150px;">
                    <label style="display: block; margin-bottom: 8px; color: #f59e0b; font-weight: 700; font-size: 14px;">Ore</label>
                    <input type="number" class="executor-hours-animatie" placeholder="Ex: 3" step="0.5" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 16px;">
                </div>
                <button onclick="this.parentElement.remove()" style="background: #fee2e2; color: #dc2626; border: none; padding: 12px 20px; border-radius: 10px; cursor: pointer; font-weight: 700; margin-top: 32px;">üóëÔ∏è</button>
            `;
            container.appendChild(newRow);
            updateExecutorSelectorsAnimatie();
        }
        
        function saveEventAnimatie() {
            const clientName = document.getElementById('clientNameAnimatie').value.trim();
            const eventValue = parseFloat(document.getElementById('eventValueAnimatie').value);
            const eventDate = document.getElementById('eventDateAnimatie').value;
            const seller = document.getElementById('sellerAnimatie').value;
            
            if (!clientName || !eventValue || !eventDate || !seller) {
                showMessageAnimatie('‚ùå CompleteazƒÉ toate c√¢mpurile!', 'error');
                return;
            }
            
            const executorRows = document.querySelectorAll('#executorsContainerAnimatie > div');
            const executors = [];
            
            executorRows.forEach(row => {
                const code = row.querySelector('.executor-code-animatie').value;
                const role = row.querySelector('.executor-role-animatie').value;
                const hours = parseFloat(row.querySelector('.executor-hours-animatie').value);
                
                if (code && role && hours > 0) {
                    executors.push({ code, role, hours });
                }
            });
            
            if (executors.length === 0) {
                showMessageAnimatie('‚ùå AdaugƒÉ cel pu»õin un executant!', 'error');
                return;
            }
            
            const event = {
                id: Date.now(),
                clientName,
                value: eventValue,
                date: eventDate,
                seller,
                executors,
                createdAt: new Date().toISOString()
            };
            
            eventsAnimatie.push(event);
            saveEventsAnimatie();
            showMessageAnimatie('‚úÖ Eveniment salvat!', 'success');
            resetEventFormAnimatie();
            calculateAndDisplayAnimatie();
        }
        
        function resetEventFormAnimatie() {
            document.getElementById('clientNameAnimatie').value = '';
            document.getElementById('eventValueAnimatie').value = '';
            document.getElementById('eventDateAnimatie').value = '';
            document.getElementById('sellerAnimatie').value = '';
            
            const container = document.getElementById('executorsContainerAnimatie');
            container.innerHTML = '';
            addExecutorRowAnimatie();
            
            document.getElementById('eventMessageAnimatie').innerHTML = '';
        }
        
        function showMessageAnimatie(message, type) {
            const msgDiv = document.getElementById('eventMessageAnimatie');
            const bgColor = type === 'success' ? 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)' : 'linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)';
            const borderColor = type === 'success' ? '#10b981' : '#ef4444';
            const textColor = type === 'success' ? '#065f46' : '#991b1b';
            
            msgDiv.style.cssText = `background: ${bgColor}; border: 2px solid ${borderColor}; color: ${textColor}; padding: 20px; border-radius: 12px; margin-top: 20px; font-weight: 600; text-align: center;`;
            msgDiv.textContent = message;
            
            setTimeout(() => { msgDiv.innerHTML = ''; }, 5000);
        }
        
        function displayEventsListAnimatie() {
            const container = document.getElementById('eventsListAnimatie');
            const monthEvents = getEventsForMonthAnimatie();
            
            if (monthEvents.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #6b7280; padding: 40px;">Nu existƒÉ evenimente.</p>';
                return;
            }
            
            let html = '<div style="display: grid; gap: 20px;">';
            
            monthEvents.forEach(event => {
                const totalHours = event.executors.reduce((sum, ex) => sum + ex.hours, 0);
                html += `
                    <div style="background: #fef3c7; border: 2px solid #f59e0b; border-radius: 12px; padding: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                            <div>
                                <h4 style="color: #d97706; font-weight: 700;">${event.clientName}</h4>
                                <p style="color: #78350f; font-size: 14px;">${new Date(event.date).toLocaleDateString('ro-RO')}</p>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 24px; font-weight: 900; color: #d97706;">${event.value} lei</div>
                                <div style="color: #78350f; font-size: 14px;">${totalHours}h total</div>
                            </div>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                            <strong style="color: #f59e0b;">NoteazƒÉ:</strong> ${event.seller}
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 8px;">
                            <strong style="color: #f59e0b;">Executan»õi:</strong>
                            ${event.executors.map(ex => `
                                <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #e5e7eb;">
                                    <span>${ex.code} - ${ex.role}</span>
                                    <span style="color: #f59e0b; font-weight: 700;">${ex.hours}h</span>
                                </div>
                            `).join('')}
                        </div>
                        <button onclick="deleteEventAnimatie(${event.id})" style="background: #fee2e2; color: #dc2626; border: none; padding: 12px; border-radius: 10px; cursor: pointer; font-weight: 700; margin-top: 15px; width: 100%;">
                            üóëÔ∏è »òterge
                        </button>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function deleteEventAnimatie(eventId) {
            if (!confirm('»òtergi evenimentul?')) return;
            eventsAnimatie = eventsAnimatie.filter(e => e.id !== eventId);
            saveEventsAnimatie();
            displayEventsListAnimatie();
            calculateAndDisplayAnimatie();
        }
        
        // Calculations Animatie
        function calculateAndDisplayAnimatie() {
            const monthEvents = getEventsForMonthAnimatie();
            
            // Reset
            allPeopleAnimatie.forEach(person => {
                person.animationHours = 0;
                person.earnings = 0;
            });
            
            // Calculate total hours sold (toate rolurile minus Training)
            let totalHoursSold = 0;
            
            monthEvents.forEach(event => {
                event.executors.forEach(executor => {
                    if (executor.role.toLowerCase() !== 'training') {
                        totalHoursSold += executor.hours;
                    }
                    
                    // Calculate animation hours per person (doar roluri anima»õie)
                    if (isAnimationRole(executor.role)) {
                        const person = allPeopleAnimatie.find(p => p.code === executor.code);
                        if (person) {
                            person.animationHours += executor.hours;
                        }
                    }
                });
            });
            
            // Pot total
            const potTotal = totalHoursSold * 2.5;
            
            // Find top performer (cele mai multe ore anima»õie)
            const topPerformer = allPeopleAnimatie.reduce((max, person) => 
                person.animationHours > max.animationHours ? person : max
            , allPeopleAnimatie[0]);
            
            // Calculate points (doar peste 20h)
            const activeParticipants = allPeopleAnimatie.filter(p => p.animationHours > 20);
            const totalPoints = activeParticipants.reduce((sum, p) => sum + (p.animationHours - 20), 0);
            
            // Calculate earnings
            if (totalPoints > 0) {
                const pointValue = potTotal / totalPoints;
                activeParticipants.forEach(person => {
                    const points = person.animationHours - 20;
                    person.earnings = points * pointValue;
                });
            }
            
            // Update dashboard
            document.getElementById('totalHoursAnimatie').textContent = totalHoursSold.toFixed(1) + 'h';
            document.getElementById('potTotalAnimatie').textContent = potTotal.toLocaleString('ro-RO', {maximumFractionDigits: 2}) + ' lei';
            document.getElementById('topPerformerAnimatie').textContent = topPerformer.code;
            document.getElementById('topHoursAnimatie').textContent = topPerformer.animationHours.toFixed(1) + 'h';
            document.getElementById('activeParticipantsAnimatie').textContent = activeParticipants.length;
            document.getElementById('totalPointsAnimatie').textContent = totalPoints.toFixed(1);
            
            // Display rankings
            displayAnimatieRankings();
        }
        
        function displayAnimatieRankings() {
            const tbody = document.getElementById('animatieRankingsTable');
            
            const sorted = [...allPeopleAnimatie]
                .filter(p => p.animationHours > 0)
                .sort((a, b) => b.earnings - a.earnings);
            
            if (sorted.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px; color: #6b7280;">
                            <div style="font-size: 48px; margin-bottom: 15px;">üé≠</div>
                            <p>Nu existƒÉ date</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            const topCode = allPeopleAnimatie.reduce((max, p) => 
                p.animationHours > max.animationHours ? p : max
            , allPeopleAnimatie[0]).code;
            
            let html = '';
            sorted.forEach((person, index) => {
                const isTop = person.code === topCode;
                const points = person.animationHours > 20 ? person.animationHours - 20 : 0;
                
                let status = '';
                if (person.animationHours > 20) {
                    status = '<span style="background: #d1fae5; color: #065f46; padding: 6px 12px; border-radius: 6px; font-weight: 700;">Activ</span>';
                } else {
                    status = '<span style="background: #fee2e2; color: #991b1b; padding: 6px 12px; border-radius: 6px; font-weight: 700;">Sub prag</span>';
                }
                
                const rowStyle = isTop ? 'background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);' : '';
                
                html += `
                    <tr style="${rowStyle}">
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;"><strong>${index + 1}${isTop ? ' üëë' : ''}</strong></td>
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;"><strong style="color: #f59e0b;">${person.code}</strong></td>
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;">${person.animationHours.toFixed(1)}h</td>
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;">${points.toFixed(1)}</td>
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;"><strong style="color: #10b981;">${person.earnings.toLocaleString('ro-RO', {maximumFractionDigits: 2})} lei</strong></td>
                        <td style="padding: 15px; border-bottom: 1px solid #e5e7eb;">${status}</td>
                    </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }
        
        function displayDetailedCalculationsAnimatie() {
            const container = document.getElementById('detailedCalculationsAnimatie');
            const monthEvents = getEventsForMonthAnimatie();
            
            if (monthEvents.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #6b7280; padding: 40px;">Nu existƒÉ date.</p>';
                return;
            }
            
            let totalHoursSold = 0;
            monthEvents.forEach(event => {
                event.executors.forEach(ex => {
                    if (ex.role.toLowerCase() !== 'training') {
                        totalHoursSold += ex.hours;
                    }
                });
            });
            
            const potTotal = totalHoursSold * 2.5;
            const activeParticipants = allPeopleAnimatie.filter(p => p.animationHours > 20);
            const totalPoints = activeParticipants.reduce((sum, p) => sum + (p.animationHours - 20), 0);
            const pointValue = totalPoints > 0 ? potTotal / totalPoints : 0;
            
            const topPerformer = allPeopleAnimatie.reduce((max, p) => 
                p.animationHours > max.animationHours ? p : max
            , allPeopleAnimatie[0]);
            
            let html = `
                <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 2px solid #f59e0b; border-radius: 12px; padding: 25px; margin-bottom: 30px;">
                    <h4 style="color: #d97706; margin-bottom: 20px; font-size: 20px; font-weight: 800;">üìä Rezumat</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div>
                            <div style="color: #78350f; font-size: 14px; margin-bottom: 5px;">Ore v√¢ndute</div>
                            <div style="color: #1f2937; font-size: 24px; font-weight: 700;">${totalHoursSold.toFixed(1)}h</div>
                        </div>
                        <div>
                            <div style="color: #78350f; font-size: 14px; margin-bottom: 5px;">Pot Total</div>
                            <div style="color: #f59e0b; font-size: 24px; font-weight: 700;">${potTotal.toLocaleString('ro-RO', {maximumFractionDigits: 2})} lei</div>
                        </div>
                        <div>
                            <div style="color: #78350f; font-size: 14px; margin-bottom: 5px;">Top Performer</div>
                            <div style="color: #1f2937; font-size: 24px; font-weight: 700;">${topPerformer.code}</div>
                        </div>
                        <div>
                            <div style="color: #78350f; font-size: 14px; margin-bottom: 5px;">Total Puncte</div>
                            <div style="color: #1f2937; font-size: 24px; font-weight: 700;">${totalPoints.toFixed(1)}</div>
                        </div>
                        <div>
                            <div style="color: #78350f; font-size: 14px; margin-bottom: 5px;">Valoare Punct</div>
                            <div style="color: #f59e0b; font-size: 24px; font-weight: 700;">${pointValue.toFixed(2)} lei</div>
                        </div>
                    </div>
                </div>
                
                <div style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border: 2px solid #3b82f6; border-radius: 12px; padding: 25px;">
                    <h4 style="color: #1e40af; margin-bottom: 20px; font-size: 20px; font-weight: 800;">üßÆ Calcule Detaliate</h4>
                    <p style="color: #1e3a8a; margin-bottom: 20px; font-weight: 600;">Formula: (Ore anima»õie - 20) √ó ${pointValue.toFixed(2)} lei/punct</p>
            `;
            
            activeParticipants.forEach(person => {
                const points = person.animationHours - 20;
                html += `
                    <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong style="color: #1f2937; font-size: 18px;">${person.code}</strong>
                                <div style="color: #6b7280; font-size: 14px; margin-top: 5px;">
                                    ${person.animationHours.toFixed(1)}h - 20h = ${points.toFixed(1)} puncte √ó ${pointValue.toFixed(2)} lei
                                </div>
                            </div>
                            <div style="color: #f59e0b; font-size: 24px; font-weight: 700;">
                                ${person.earnings.toLocaleString('ro-RO', {maximumFractionDigits: 2})} lei
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function recalculateMonthAnimatie() {
            calculateAndDisplayAnimatie();
            displayDetailedCalculationsAnimatie();
            alert('‚úÖ Recalculat!');
        }
        
        // Storage Animatie
        function saveEventsAnimatie() {
            localStorage.setItem('superparty_animatie_events', JSON.stringify(eventsAnimatie));
        }
        
        function loadEventsAnimatie() {
            const stored = localStorage.getItem('superparty_animatie_events');
            if (stored) {
                eventsAnimatie = JSON.parse(stored);
            }
        }
        
        function getEventsForMonthAnimatie() {
            const month = currentMonthAnimatie.getMonth();
            const year = currentMonthAnimatie.getFullYear();
            
            return eventsAnimatie.filter(event => {
                const eventDate = new Date(event.date);
                return eventDate.getMonth() === month && eventDate.getFullYear() === year;
            });
        }
        
        // Initialize when target-animatie is shown
        document.addEventListener('DOMContentLoaded', function() {
            const observerAnimatie = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    const targetPage = document.getElementById('target-animatie');
                    if (targetPage && targetPage.classList.contains('active')) {
                        initializeAnimatieSystem();
                    }
                });
            });
            
            observerAnimatie.observe(document.body, {
                attributes: true,
                subtree: true,
                attributeFilter: ['class']
            });
        });

        // ============================================
        // LICENSE CODE GENERATION FUNCTIONS
        // ============================================

        // Generate random license code
        function generateRandomCode() {
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const numbers = '0123456789';
            
            let code = 'SP-';
            
            // Add 4 random alphanumeric characters
            for (let i = 0; i < 4; i++) {
                const useNumber = Math.random() > 0.5;
                code += useNumber ? numbers[Math.floor(Math.random() * numbers.length)] : letters[Math.floor(Math.random() * letters.length)];
            }
            
            code += '-';
            
            // Add 4 more random alphanumeric characters
            for (let i = 0; i < 4; i++) {
                const useNumber = Math.random() > 0.5;
                code += useNumber ? numbers[Math.floor(Math.random() * numbers.length)] : letters[Math.floor(Math.random() * letters.length)];
            }
            
            return code;
        }

        // Generate and save license code
        async function generateLicenseCode() {
            const loadingDiv = document.getElementById('codeGenerationLoading');
            const displayDiv = document.getElementById('generatedCodeDisplay');
            
            // Show loading
            loadingDiv.style.display = 'block';
            displayDiv.style.display = 'none';
            
            try {
                // Generate unique code
                const newCode = generateRandomCode();
                
                // Save to Supabase
                const { data, error } = await supabase
                    .from('license_keys')
                    .insert([
                        {
                            code: newCode,
                            used: false,
                            created_at: new Date().toISOString()
                        }
                    ])
                    .select();
                
                if (error) {
                    console.error('Error generating code:', error);
                    alert('‚ùå Eroare la generarea codului: ' + error.message);
                    loadingDiv.style.display = 'none';
                    return;
                }
                
                // Display the generated code
                document.getElementById('displayedCode').textContent = newCode;
                loadingDiv.style.display = 'none';
                displayDiv.style.display = 'block';
                
                // Refresh the list
                await refreshCodesList();
                
            } catch (err) {
                console.error('Error:', err);
                alert('‚ùå Eroare: ' + err.message);
                loadingDiv.style.display = 'none';
            }
        }

        // Copy code to clipboard
        function copyCodeToClipboard() {
            const code = document.getElementById('displayedCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('‚úÖ Cod copiat: ' + code);
            }).catch(err => {
                console.error('Error copying code:', err);
                alert('‚ùå Eroare la copiere');
            });
        }

        // Close code display
        function closeCodeDisplay() {
            document.getElementById('generatedCodeDisplay').style.display = 'none';
        }

        // Refresh codes list
        async function refreshCodesList() {
            const container = document.getElementById('codesListContainer');
            
            try {
                // Fetch all license codes from Supabase
                const { data: codes, error } = await supabase
                    .from('license_keys')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (error) {
                    console.error('Error fetching codes:', error);
                    container.innerHTML = '<div style="text-align: center; padding: 20px; color: #ef4444;">‚ùå Eroare la √ÆncƒÉrcarea codurilor</div>';
                    return;
                }
                
                if (!codes || codes.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: #9ca3af;">
                            <div style="font-size: 48px; margin-bottom: 15px;">üìù</div>
                            <p>Niciun cod generat √ÆncƒÉ</p>
                        </div>
                    `;
                    return;
                }
                
                // Display codes
                container.innerHTML = codes.map(code => {
                    const statusColor = code.used ? '#10b981' : '#f59e0b';
                    const statusText = code.used ? '‚úÖ Folosit' : '‚è≥ Neutilizat';
                    const createdDate = new Date(code.created_at).toLocaleString('ro-RO');
                    
                    return `
                        <div style="padding: 20px; background: #f9fafb; border-radius: 12px; border-left: 4px solid ${statusColor}; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                            <div style="flex: 1; min-width: 200px;">
                                <div style="font-weight: 700; color: #1f2937; font-size: 18px; font-family: monospace; margin-bottom: 5px;">${code.code}</div>
                                <div style="font-size: 13px; color: #6b7280;">Creat: ${createdDate}</div>
                                ${code.used ? `<div style="font-size: 13px; color: #10b981; margin-top: 3px;">Folosit la: ${new Date(code.used_at).toLocaleString('ro-RO')}</div>` : ''}
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="padding: 8px 16px; background: ${code.used ? '#d1fae5' : '#fef3c7'}; color: ${code.used ? '#065f46' : '#92400e'}; border-radius: 8px; font-size: 13px; font-weight: 700;">${statusText}</span>
                                ${!code.used ? `<button onclick="copyToClipboard('${code.code}')" style="background: #667eea; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 13px;">üìã CopiazƒÉ</button>` : ''}
                            </div>
                        </div>
                    `;
                }).join('');
                
            } catch (err) {
                console.error('Error:', err);
                container.innerHTML = '<div style="text-align: center; padding: 20px; color: #ef4444;">‚ùå Eroare</div>';
            }
        }

        // Copy any code to clipboard
        function copyToClipboard(code) {
            navigator.clipboard.writeText(code).then(() => {
                alert('‚úÖ Cod copiat: ' + code);
            }).catch(err => {
                console.error('Error copying:', err);
                alert('‚ùå Eroare la copiere');
            });
        }
    </script>
    <!-- Password Modal -->
    <div class="password-modal" id="passwordModal">
        <div class="password-modal-content">
            <h3>üîí Acces Restric»õionat</h3>
            <p style="color: #6b7280; margin-bottom: 20px;">Introdu parola pentru a accesa pagina secretƒÉ</p>
            <input type="password" id="passwordInput" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" maxlength="4" autofocus>
            <div class="password-modal-buttons">
                <button class="password-cancel" onclick="closePasswordModal()">‚ùå AnuleazƒÉ</button>
                <button class="password-submit" onclick="submitPassword()">‚úÖ AcceseazƒÉ</button>
            </div>
        </div>
    </div>
    
</body>
</html>
